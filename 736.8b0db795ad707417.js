"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[736],{4736:(mt,D,i)=>{i.r(D),i.d(D,{UsersModule:()=>ct});var _=i(5357),O=i(2266),a=i(3075),U=i(9646),Z=i(7579),m=i(2722),C=i(5119),z=i(4787),$=i(1910),N=i(8765),I=i(8288);const q={_id:null,userId:null,active:!0,name:null,lastname:null,email:null,password:null,role:""};var A=i(2729),f=i(2491),h=i(9784),e=i(5e3),T=i(1683),x=i(7495),G=i(1349),y=i(7261),w=i(5094),u=i(9808),R=i(393),K=i(508),k=i(7423),Y=i(7446),b=i(288),F=i(5245),g=i(7322),E=i(7531),H=i(4107),j=i(2368),M=i(1235);function V(o,s){1&o&&(e.ynx(0),e.TgZ(1,"a",37),e._uU(2,"Nuevo"),e.qZA(),e.BQk())}function W(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"a",37),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(2),e.AsE("",t.selectedUser.name," ",t.selectedUser.lastname,"")}}function X(o,s){1&o&&(e.ynx(0),e._uU(1," Nuevo "),e.BQk())}function ee(o,s){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.AsE(" ",t.selectedUser.name," ",t.selectedUser.lastname," ")}}const te=function(o){return{"cursor-not-allowed":o}};function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createUser())}),e._UZ(1,"mat-icon",39),e.TgZ(2,"span",40),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,te,t.userForm.invalid))("disabled",t.userForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function ne(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateUser())}),e._UZ(1,"mat-icon",39),e.TgZ(2,"span",40),e._uU(3,"Actualizar"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}function re(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function se(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre debe contener entre 3 y 20 caracteres. "),e.qZA())}function ie(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre no debe poseer n\xfameros. "),e.qZA())}function ae(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos son obligatorios. "),e.qZA())}function ce(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos deben contener entre 3 y 20 caracteres. "),e.qZA())}function le(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," los apellidos no deben poseer n\xfameros. "),e.qZA())}function me(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correo electr\xf3nico es obligatorio. "),e.qZA())}function ue(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correo no posee un formato v\xe1lido. "),e.qZA())}function de(o,s){if(1&o&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function pe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un negocio. "),e.qZA())}function ge(o,s){1&o&&e._UZ(0,"mat-icon",51),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function _e(o,s){1&o&&e._UZ(0,"mat-icon",51),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function fe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria. "),e.qZA())}function he(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,' La contrase\xf1a deber\xe1 tener entre 8 y 20 caracteres e incluir may\xfasculas, min\xfasculas n\xfameros y s\xedmbolos como: ! " ? $ % ^ &. '),e.qZA())}function xe(o,s){1&o&&e._UZ(0,"mat-icon",51),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function ve(o,s){1&o&&e._UZ(0,"mat-icon",51),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function be(o,s){1&o&&(e.TgZ(0,"mat-error",52),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Ue(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userForm.get("pwd2").getError("mustMatch")," ")}}function Ze(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header",21)(2,"mat-panel-title",22)(3,"div",23),e._uU(4," Contrase\xf1a "),e.qZA()()(),e.TgZ(5,"div",43)(6,"div",25)(7,"mat-form-field",19)(8,"mat-label"),e._uU(9,"Contrase\xf1a"),e.qZA(),e._UZ(10,"input",44,45),e.TgZ(12,"button",46),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(11);return e.KtG(r.type="password"===r.type?"text":"password")}),e.YNc(13,ge,1,1,"mat-icon",47),e.YNc(14,_e,1,1,"mat-icon",47),e.qZA(),e.YNc(15,fe,2,0,"mat-error",7),e.YNc(16,he,2,0,"mat-error",7),e.qZA()(),e.TgZ(17,"div",25)(18,"mat-form-field",19)(19,"mat-label"),e._uU(20,"Confirmar contrase\xf1a"),e.qZA(),e._UZ(21,"input",48,49),e.TgZ(23,"button",46),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(22);return e.KtG(r.type="password"===r.type?"text":"password")}),e.YNc(24,xe,1,1,"mat-icon",47),e.YNc(25,ve,1,1,"mat-icon",47),e.qZA(),e.YNc(26,be,2,0,"mat-error",50),e.YNc(27,Ue,2,1,"mat-error",7),e.qZA()()()()}if(2&o){const t=e.MAs(11),n=e.MAs(22),r=e.oxw();e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("formControlName","pwd")("minlength",8)("maxlength",20),e.xp6(3),e.Q6J("ngIf","password"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf",r.userForm.get("pwd").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.userForm.get("pwd").hasError("pattern")||r.userForm.get("pwd").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","pwd2"),e.xp6(3),e.Q6J("ngIf","password"===n.type),e.xp6(1),e.Q6J("ngIf","text"===n.type),e.xp6(1),e.Q6J("ngIf",r.userForm.get("pwd2").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.userForm.get("pwd2").hasError("mustMatch"))}}function Ce(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",58)(2,"mat-checkbox",59),e.NdJ("change",function(r){const c=e.CHM(t),l=c.$implicit,d=c.index,p=e.oxw(3);return e.KtG(p.manageRoles(l._id,r,d))}),e.qZA()(),e.TgZ(3,"div",60)(4,"span",61),e._uU(5),e.qZA(),e.TgZ(6,"span",62),e._uU(7),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index,r=e.oxw(3);e.xp6(2),e.Q6J("disabled",n!==r.selectedRoleIndex&&-1!==r.selectedRoleIndex)("color","primary")("checked",t.checked),e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," ")}}function Ie(o,s){if(1&o&&(e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header",21)(2,"mat-panel-title",22)(3,"div",23),e._uU(4," Rol "),e.qZA()()(),e.TgZ(5,"div",53)(6,"div",54)(7,"div",55),e.YNc(8,Ce,8,5,"div",56),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(7),e.Q6J("ngForOf",t.roles)}}function Ae(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ie,9,2,"mat-expansion-panel",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.editMode)}}let Te=(()=>{class o{constructor(t,n,r,c,l,d,p,v,lt){this._activatedRoute=t,this._fuseConfirmationService=n,this._changeDetectorRef=r,this._formBuilder=c,this._router=l,this._userService=d,this._roleService=p,this._snackBar=v,this.store=lt,this.dialogMode="view",this.editMode=!1,this.formSubmitted=!1,this.isValid=!1,this.selectedUser=q,this.showAlert=!1,this.userId=null,this.roles=[],this.user$=(0,U.of)(null),this.merchants$=(0,U.of)([]),this.selectedRoleIndex=-1,this._unsubscribeAll=new Z.x}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.authUser=t,this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select($.UV),this.userForm=this._formBuilder.group({_id:[null],active:[!0],userId:[this.authUser._id,[a.kI.required]],merchantId:["",[a.kI.required]],name:[null,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(250),f.L.onlyAlphabetsWithAccentPattern()]],lastname:[null,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(250),f.L.onlyAlphabetsWithAccentPattern()]],email:[null,[a.kI.email,a.kI.required]],pwd:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(20),f.L.strongPasWordPattern()]],pwd2:["",[a.kI.required]],role:[null]},{validators:f.L.mustMatch("pwd","pwd2")}),this.store.select(A.g).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{if("Due\xf1o"===this.authUser.role.name){const n=t.find(r=>"Ejecutivo"===r.name);n&&this.userForm.get("role").setValue(n._id)}}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({userId:t})=>{"Super Administrador"===this.authUser.role.name&&this.userForm.get("role").setValidators([a.kI.required]),this.userId=t,"new"!==this.userId&&(this.editMode=!0,this.store.select(N.dy).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedUser=n}),this.userForm.patchValue(this.selectedUser)),this._changeDetectorRef.markForCheck()}),this.editMode||this.store.select(A.g).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.roles=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUser(){let t=this.userForm.getRawValue();t.username=t.email.split("@",2)[0]+Date.now(),t=(0,C.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear usuario",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._userService.createUser(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{this._snackBar.openFromComponent(h.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${c.user.name} ${c.user.lastname} creado correctamente`,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/users"),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}updateUser(){let t=this.userForm.getRawValue();t=(0,C.Z)(t,["pwd, pwd2"]),this._fuseConfirmationService.open({title:"Actualizar datos del usuario",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._userService.update(t).subscribe(c=>{this._snackBar.openFromComponent(h.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${c.user.name} ${c.user.lastname} actualizado correctamente`,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/users"),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}trackByFn(t,n){return n.id||t}manageRoles(t,n,r){this.selectedRoleIndex=r,n.checked?(this.userForm.get("role").setValue(t),this._changeDetectorRef.markForCheck()):(this.selectedRoleIndex=-1,this.userForm.get("role").setValue(""),this._changeDetectorRef.markForCheck())}_isEmptyInputValue(t){return null==t||0===t.length}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.gz),e.Y36(T.R),e.Y36(e.sBO),e.Y36(a.QS),e.Y36(_.F0),e.Y36(x.K),e.Y36(G.N),e.Y36(y.ux),e.Y36(w.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-user-detail"]],decls:79,vars:47,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","","class","ml-4 text-white bg-primary-500 hover:shadow-lg","mat-button","",3,"ngClass","disabled","click",4,"ngIf"],["mat-raised-button","","class","ml-4 text-white bg-primary-500 hover:shadow-lg","mat-button","",3,"click",4,"ngIf"],[1,"flex-auto","p-6","shadow","bg-mine-200","sm:p-10","rounded-t-2xl"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],[1,"w-full"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","gap-6","p-8","mb-6","border-t-2","sm:grid-cols-4"],[1,"sm:col-span-2"],["matInput","","required","",3,"type","formControlName","placeholder","minlength","maxlength"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matInput","","required","",3,"type","formControlName","placeholder"],[3,"formControlName","placeholder"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","sm:col-span-2"],[1,"flex","flex-col","w-1/4"],[1,"items-start","font-medium"],[3,"formControlName","color"],[4,"ngxPermissionsOnly"],[1,"ml-1","text-primary-700"],["mat-raised-button","","mat-button","",1,"ml-4","text-white","bg-primary-500","hover:shadow-lg",3,"ngClass","disabled","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-raised-button","","mat-button","",1,"ml-4","text-white","bg-primary-500","hover:shadow-lg",3,"click"],[3,"value"],[1,"grid","w-full","gap-6","p-8","mb-6","border-t-2","sm:grid-cols-2","md:grid-cols-4"],["type","password","matInput","","placeholder","Contrase\xf1a","required","",3,"formControlName","minlength","maxlength"],["passwordField1",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["type","password","matInput","","placeholder","Repita la contrase\xf1a","required","",3,"formControlName"],["passwordField2",""],["class","pb-5",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"pb-5"],[1,"flex","flex-col","w-full","pl-8","pr-8","pt-6","space-y-4","sm:mt-4","sm:space-y-8"],[1,"flex","flex-col","mb-10"],[1,"w-full","flex","flex-wrap","gap-4","sm:grid","sm:grid-cols-2"],["class","w-full sm:w-auto rounded-sm border border-dashed border-primary-700 p-3 ",4,"ngFor","ngForOf"],[1,"w-full","sm:w-auto","rounded-sm","border","border-dashed","border-primary-700","p-3"],[1,"h-6"],[3,"disabled","color","checked","change"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-md","text-hint"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",5),e._uU(11,"Usuarios"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.YNc(14,V,3,0,"ng-container",7),e.YNc(15,W,3,2,"ng-container",7),e.qZA()(),e.TgZ(16,"div",8)(17,"a",9),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",10),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",11)(22,"div",12),e.YNc(23,X,2,0,"ng-container",7),e.YNc(24,ee,2,2,"ng-container",7),e.qZA()()(),e.TgZ(25,"div",13),e.YNc(26,oe,4,5,"button",14),e.YNc(27,ne,4,1,"button",15),e.qZA()(),e.TgZ(28,"div",16)(29,"div",17)(30,"form",18)(31,"mat-accordion",19)(32,"mat-expansion-panel",20)(33,"mat-expansion-panel-header",21)(34,"mat-panel-title",22)(35,"div",23),e._uU(36," Informaci\xf3n General "),e.qZA()()(),e.TgZ(37,"div",24)(38,"div",25)(39,"mat-form-field",19)(40,"mat-label"),e._uU(41,"Nombre"),e.qZA(),e._UZ(42,"input",26),e.YNc(43,re,2,0,"mat-error",7),e.YNc(44,se,2,0,"mat-error",7),e.YNc(45,ie,2,0,"mat-error",7),e.qZA()(),e.TgZ(46,"div",25)(47,"mat-form-field",19)(48,"mat-label"),e._uU(49,"Apellidos"),e.qZA(),e._UZ(50,"input",27),e.YNc(51,ae,2,0,"mat-error",7),e.YNc(52,ce,2,0,"mat-error",7),e.YNc(53,le,2,0,"mat-error",7),e.qZA()(),e.TgZ(54,"div",25)(55,"mat-form-field",19)(56,"mat-label"),e._uU(57,"Correo electr\xf3nico"),e.qZA(),e._UZ(58,"input",28),e.YNc(59,me,2,0,"mat-error",7),e.YNc(60,ue,2,0,"mat-error",7),e.qZA()(),e.TgZ(61,"div",25)(62,"mat-form-field",19)(63,"mat-label"),e._uU(64,"Asignar negocio"),e.qZA(),e.TgZ(65,"mat-select",29)(66,"mat-option",30),e._uU(67,"Seleccione el negocio"),e.qZA(),e.YNc(68,de,2,2,"mat-option",31),e.ALo(69,"async"),e.qZA(),e.YNc(70,pe,2,0,"mat-error",7),e.qZA()(),e.TgZ(71,"div",32)(72,"div",33)(73,"span",34),e._uU(74,"Estado"),e.qZA(),e.TgZ(75,"mat-slide-toggle",35),e._uU(76),e.qZA()()()()(),e.YNc(77,Ze,28,13,"mat-expansion-panel",7),e.YNc(78,Ae,2,1,"div",36),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("routerLink","/home"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("routerLink","/users"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf","new"===n.userId),e.xp6(1),e.Q6J("ngIf","new"!==n.userId),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(5),e.Q6J("ngIf","new"===n.userId),e.xp6(1),e.Q6J("ngIf","new"!==n.userId),e.xp6(2),e.Q6J("ngIf","new"===n.userId),e.xp6(1),e.Q6J("ngIf","new"!==n.userId),e.xp6(3),e.Q6J("formGroup",n.userForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre")("minlength",3)("maxlength",250),e.xp6(1),e.Q6J("ngIf",n.userForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("name").hasError("maxlength")||n.userForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname")("minlength",3)("maxlength",250),e.xp6(1),e.Q6J("ngIf",n.userForm.get("lastname").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("lastname").hasError("maxlength")||n.userForm.get("lastname").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("lastname").hasError("pattern")),e.xp6(5),e.Q6J("type","email")("formControlName","email")("placeholder","Correo electr\xf3nico"),e.xp6(1),e.Q6J("ngIf",n.userForm.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("email").hasError("email")),e.xp6(5),e.Q6J("formControlName","merchantId")("placeholder","Seleccione el negocio"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(69,45,n.merchants$)),e.xp6(2),e.Q6J("ngIf",n.userForm.get("merchantId").hasError("required")),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===n.userForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(1),e.Q6J("ngIf",!n.editMode),e.xp6(1),e.Q6J("ngxPermissionsOnly","Super Administrador"))},dependencies:[_.yS,u.mk,u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.sg,a.u,R.PQ,K.ey,k.lW,Y.oG,b.pp,b.ib,b.yz,b.yK,F.Hw,g.TO,g.KE,g.hX,g.R9,E.Nt,H.gD,j.Rr,M.gE,u.Ov],encapsulation:2,data:{animation:I.L},changeDetection:0}),o})();var S=i(6087),J=i(4847),ye=i(6451),we=i(3900),Q=i(8966),ke=i(7489),L=i(7238);const Fe=["imageFileInput"];function Je(o,s){1&o&&e._UZ(0,"mat-icon",26),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Qe(o,s){1&o&&e._UZ(0,"mat-icon",26),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function De(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Ne(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,' La contrase\xf1a deber\xe1 tener entre 8 y 20 caracteres e incluir may\xfasculas, min\xfasculas n\xfameros y s\xedmbolos como: !" ? $ % ^ &. '),e.qZA())}function qe(o,s){1&o&&e._UZ(0,"mat-icon",26),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Re(o,s){1&o&&e._UZ(0,"mat-icon",26),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function Ye(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Ee(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userPasswordForm.get("pwd2").getError("mustMatch")," ")}}function Me(o,s){if(1&o){const t=e.EpF();e.ynx(0)(1),e.TgZ(2,"div",14)(3,"div",15)(4,"div",16)(5,"form",17)(6,"div",18)(7,"mat-form-field",19)(8,"mat-label"),e._uU(9,"Contrase\xf1a"),e.qZA(),e._UZ(10,"input",20,21),e.TgZ(12,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(11);return e.KtG(r.type="password"===r.type?"text":"password")}),e.YNc(13,Je,1,1,"mat-icon",23),e.YNc(14,Qe,1,1,"mat-icon",23),e.qZA(),e.YNc(15,De,2,0,"mat-error",9),e.YNc(16,Ne,2,0,"mat-error",9),e.qZA(),e.TgZ(17,"mat-form-field",19)(18,"mat-label"),e._uU(19,"Confirmar contrase\xf1a "),e.qZA(),e._UZ(20,"input",24,25),e.TgZ(22,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(21);return e.KtG(r.type="password"===r.type?"text":"password")}),e.YNc(23,qe,1,1,"mat-icon",23),e.YNc(24,Re,1,1,"mat-icon",23),e.qZA(),e.YNc(25,Ye,2,0,"mat-error",9),e.YNc(26,Ee,2,1,"mat-error",9),e.qZA()()()()()(),e.BQk()()}if(2&o){const t=e.MAs(11),n=e.MAs(21),r=e.oxw();e.xp6(5),e.Q6J("formGroup",r.userPasswordForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","pwd")("minlength",8)("maxlength",20),e.xp6(3),e.Q6J("ngIf","password"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf",r.userPasswordForm.get("pwd").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.userPasswordForm.get("pwd").hasError("pattern")||r.userPasswordForm.get("pwd").hasError("minlength")),e.xp6(4),e.Q6J("formControlName","pwd2"),e.xp6(3),e.Q6J("ngIf","password"===n.type),e.xp6(1),e.Q6J("ngIf","text"===n.type),e.xp6(1),e.Q6J("ngIf",r.userPasswordForm.get("pwd2").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.userPasswordForm.get("pwd2").hasError("mustMatch"))}}function Se(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"mat-checkbox",33),e.NdJ("change",function(r){const c=e.CHM(t),l=c.$implicit,d=c.index,p=e.oxw(2);return e.KtG(p.manageRoles(l._id,r,d))}),e.qZA()(),e.TgZ(3,"div",34)(4,"span",35),e._uU(5),e.qZA(),e.TgZ(6,"span",36),e._uU(7),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index,r=e.oxw(2);e.xp6(2),e.Q6J("disabled",n!==r.selectedRoleIndex&&-1!==r.selectedRoleIndex)("color","primary")("checked",t.checked),e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," ")}}function Le(o,s){if(1&o&&(e.ynx(0)(1),e.TgZ(2,"div",14)(3,"div",15)(4,"div",27)(5,"div",28)(6,"div",29),e.YNc(7,Se,8,5,"div",30),e.qZA()()()()(),e.BQk()()),2&o){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.roles)}}const B=function(o){return{"cursor-not-allowed":o}};function Be(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateUser())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",-1===t.selectedRoleIndex)("matTooltip","Actualizar")("ngClass",e.VKq(3,B,-1===t.selectedRoleIndex))}}function Pe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateUserPassword())}),e._uU(1," Actualizar contrase\xf1a "),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.userPasswordForm.invalid)("matTooltip","Actualizar")("ngClass",e.VKq(3,B,t.userPasswordForm.invalid))}}let Oe=(()=>{class o{constructor(t,n,r,c,l,d,p,v){this.data=t,this._dialogRef=n,this._changeDetectorRef=r,this._formBuilder=c,this._fuseConfirmationService=l,this._userService=d,this._snackBar=p,this.store=v,this.dialogMode="edit",this.formSubmitted=!1,this.isValid=!1,this.roles=[],this.showAlert=!1,this.titles=[],this.selectedRole="",this.selectedRoleIndex=-1,this._unsubscribeAll=new Z.x,this.dialogMode=t.dialogMode,this.selectedUser=t.user}ngOnInit(){"editPass"===this.dialogMode&&(this.userPasswordForm=this._formBuilder.group({userId:[this.selectedUser._id,[a.kI.required]],pwd:[null,[a.kI.required,a.kI.minLength(8),a.kI.maxLength(20),f.L.strongPasWordPattern()]],pwd2:[null,[a.kI.required]]},{validators:f.L.mustMatch("pwd","pwd2")})),"edit"===this.dialogMode&&this.store.select(A.g).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{const n=(0,ke.cloneDeep)(t);n.forEach(r=>{r.checked=this.selectedUser.role._id===r._id,r.checked&&(this.selectedRole=r._id,this.selectedRoleIndex=n.indexOf(r))}),this.roles=n,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}updateUser(){this._fuseConfirmationService.open({title:"Actualizar roles de usuario",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._userService.updateUserRoles(this.selectedUser._id,this.selectedRole).subscribe(r=>{this._snackBar.openFromComponent(h.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Roles del usuario ${r.name}  actualizados correctamente`,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this.closeDialog(),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}updateUserPassword(){let t=this.userPasswordForm.getRawValue();t=(0,C.Z)(t,"pwd2"),this._fuseConfirmationService.open({title:"Actualizar contrase\xf1a",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._userService.resetUserPassword({userId:t.userId,newPwd:t.pwd}).subscribe(c=>{this._snackBar.openFromComponent(h.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this.closeDialog(),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}trackByFn(t,n){return n.id||t}manageRoles(t,n,r){this.selectedRoleIndex=r,n.checked?(this.selectedRole=t,this._changeDetectorRef.markForCheck()):(this.selectedRoleIndex=-1,this.selectedRole="",this._changeDetectorRef.markForCheck())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.WI),e.Y36(Q.so),e.Y36(e.sBO),e.Y36(a.QS),e.Y36(T.R),e.Y36(x.K),e.Y36(y.ux),e.Y36(w.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["user-role-dialog"]],viewQuery:function(t,n){if(1&t&&e.Gf(Fe,5),2&t){let r;e.iGM(r=e.CRH())&&(n._imageFileInput=r.first)}},decls:19,vars:10,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","flex-auto","w-full"],[1,"w-full","px-12","py-5"],[1,"flex","w-full"],[1,"flex","flex-col","justify-end","w-4/5","my-2"],[1,"text-2xl","font-bold","truncate","sm:text-2xl"],[1,"flex","text-xl","font-normal","text-red-900","truncate","cursor-pointer","hover:underline"],[1,"mr-2.5","text-mine-900",3,"svgIcon"],["target","_blank",1,"text-primary-900","hover:text-primary-700",3,"href"],[4,"ngIf"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","sm:px-12","bg-gray-50","dark:bg-transparent"],["mat-button","",1,"",3,"matTooltip","click"],["mat-flat-button","","class"," text-mine-900 bg-primary-700",3,"disabled","matTooltip","ngClass","click",4,"ngIf"],["mat-button","","class"," text-mine-900 bg-primary-700",3,"disabled","matTooltip","ngClass","click",4,"ngIf"],[1,"flex","flex-col","border-t","gap-y-5"],[1,"flex","flex-col","w-full","gap-8","md:flex-row"],[1,"flex","flex-col","w-full","space-y-4"],[1,"flex","flex-col",3,"formGroup","autocomplete"],[1,"flex","flex-col","w-full","gap-4","mt-5","mb-2"],[1,"w-full"],["id","pwd","matInput","","type","password","placeholder","Contrase\xf1a","required","",3,"formControlName","minlength","maxlength"],["passwordUpdateField1",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["type","password","matInput","","placeholder","Repita la contrase\xf1a","required","",3,"formControlName"],["passwordUpdateField2",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","w-full","pt-6","space-y-4","sm:mt-4","sm:space-y-8"],[1,"flex","flex-col","mb-10"],[1,"w-full","flex","flex-wrap","gap-4","sm:grid","sm:grid-cols-2"],["class","w-full sm:w-auto rounded-sm border border-dashed border-primary-700 p-3 ",4,"ngFor","ngForOf"],[1,"w-full","sm:w-auto","rounded-sm","border","border-dashed","border-primary-700","p-3"],[1,"h-6"],[3,"disabled","color","checked","change"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-md","text-hint"],["mat-flat-button","",1,"text-mine-900","bg-primary-700",3,"disabled","matTooltip","ngClass","click"],["mat-button","",1,"text-mine-900","bg-primary-700",3,"disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.qZA(),e.TgZ(7,"span",6),e._UZ(8,"mat-icon",7),e.TgZ(9,"a",8),e._uU(10),e.qZA()()()(),e.YNc(11,Me,27,14,"ng-container",9),e.YNc(12,Le,8,1,"ng-container",9),e.qZA(),e.ynx(13),e.TgZ(14,"div",10)(15,"button",11),e.NdJ("click",function(){return n.closeDialog()}),e._uU(16," Cancelar "),e.qZA(),e.YNc(17,Be,2,5,"button",12),e.YNc(18,Pe,2,5,"button",13),e.qZA(),e.BQk(),e.qZA()()),2&t&&(e.xp6(6),e.AsE(" ",n.selectedUser.name," ",n.selectedUser.lastname," "),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:mail"),e.xp6(1),e.Q6J("href","mailto:"+n.selectedUser.email,e.LSH),e.xp6(1),e.Oqu(n.selectedUser.email),e.xp6(1),e.Q6J("ngIf","editPass"===n.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===n.dialogMode),e.xp6(3),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf","editPass"===n.data.dialogMode))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.sg,a.u,k.lW,Y.oG,F.Hw,g.TO,g.KE,g.hX,g.R9,E.Nt,L.gM],encapsulation:2,data:{animation:I.L},changeDetection:0}),o})();var ze=i(6428),$e=i(1927);function Ge(o,s){if(1&o&&(e.TgZ(0,"div",40),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.merchantId.name," ")}}function Ke(o,s){1&o&&(e.TgZ(0,"div",41),e._uU(1," No posee ning\xfan negocio asociado "),e.qZA())}function He(o,s){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",42),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function je(o,s){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",43),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ve(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.openDialog(r,"edit","720px"))}),e._UZ(1,"mat-icon",36),e.qZA()}2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:shield-check"))}function We(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",24),e._uU(5),e.qZA(),e.YNc(6,Ge,2,1,"div",32),e.YNc(7,Ke,2,0,"div",33),e.TgZ(8,"div",25),e.YNc(9,He,2,1,"ng-container",27),e.YNc(10,je,2,1,"ng-container",27),e.qZA(),e.TgZ(11,"div",34)(12,"button",35),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.createOrEditUser(c._id))}),e._UZ(13,"mat-icon",36),e.qZA(),e.TgZ(14,"button",37),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.openDialog(c,"editPass","720px"))}),e._UZ(15,"mat-icon",36),e.qZA(),e.YNc(16,Ve,2,1,"button",38),e.TgZ(17,"button",39),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.deleteUser(c))}),e._UZ(18,"mat-icon",36),e.qZA()()(),e.BQk()}if(2&o){const t=s.$implicit;e.xp6(3),e.AsE(" ",t.name," ",t.lastname," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(1),e.Q6J("ngIf",null!=t.merchantId),e.xp6(1),e.Q6J("ngIf",null==t.merchantId),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:key"),e.xp6(1),e.Q6J("ngxPermissionsOnly","Super Administrador"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Xe(o,s){if(1&o&&(e.ynx(0),e.YNc(1,We,19,11,"ng-container",29),e.BQk()),2&o){const t=s.ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const et=function(o){return{"pointer-events-none":o}},tt=function(){return[10,25,50,100]};function ot(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",21)(2,"div",22)(3,"div",23),e._uU(4," Nombre y Apellidos "),e.qZA(),e.TgZ(5,"div",24),e._uU(6," Correo electr\xf3nico "),e.qZA(),e.TgZ(7,"div",24),e._uU(8," Negocio "),e.qZA(),e.TgZ(9,"div",25),e._uU(10," Activo "),e.qZA(),e.TgZ(11,"div",26),e._uU(12," Acciones "),e.qZA()(),e.YNc(13,Xe,2,2,"ng-container",27),e.ALo(14,"async"),e._UZ(15,"mat-paginator",28),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(10),e.Q6J("ngIf",e.lcZ(14,8,t.users$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,et,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,tt))("showFirstLastButtons",!0)}}function nt(o,s){1&o&&(e.TgZ(0,"div",45),e._uU(1,"A\xfan no hay usuarios para esta aplicaci\xf3n! "),e.qZA())}let rt=(()=>{class o{constructor(t,n,r,c,l,d,p,v){this._changeDetectorRef=t,this._fuseConfirmationService=n,this._fileSaverService=r,this._router=c,this._userDialog=l,this._userService=d,this._snackBar=p,this.store=v,this.emptyUser=q,this.searchInputControl=new a.p4(""),this.selectedUser=null,this.users=[],this.users$=(0,U.of)([]),this._unsubscribeAll=new Z.x}ngOnInit(){this.users$=this.store.select(N.YN),this.users$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.users=t,this._changeDetectorRef.markForCheck()}),this.store.select(ze.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"active",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,ye.T)(this._sort.sortChange,this._paginator.page).pipe((0,we.w)(()=>this._userService.getUsers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createOrEditUser(t="new"){this._router.navigateByUrl(`/modules/users/${t}`)}deleteUser(t){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar el usuario ${t.name} ${t.lastname}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._userService.deleteUser(t._id).subscribe(c=>{!c||(this._snackBar.openFromComponent(h.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${t.name} ${t.lastname} eliminado correctamente`,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck())})}),this._changeDetectorRef.markForCheck()}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.users,"users")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.users,"users")}trackByFn(t,n){return n.id||t}openDialog(t,n,r){this._userDialog.open(Oe,{data:{user:t,dialogMode:n},width:r,panelClass:"ath-dialog-panel"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(T.R),e.Y36($e.m),e.Y36(_.F0),e.Y36(Q.uw),e.Y36(x.K),e.Y36(y.ux),e.Y36(w.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-users"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S.NW,5),e.Gf(J.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:31,vars:9,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","","mat-button","",1,"ml-4","text-white","bg-primary-500",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noUsers",""],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","users-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","truncate","md:block"],[1,"hidden","text-center","lg:block"],[1,"text-center"],[4,"ngIf"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","users-grid","md:px-8"],[1,"flex","truncate"],["class","",4,"ngIf"],["class","text-red-600",4,"ngIf"],[1,"flex","flex-col","justify-center","gap-1","sm:flex-row"],["mat-stroked-button","","matTooltip","Editar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Cambiar contrase\xf1a",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Asignar Roles",3,"click",4,"ngxPermissionsOnly"],["mat-stroked-button","","matTooltip","Eliminar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,""],[1,"text-red-600"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Asignar Roles",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","sm:p-16"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Usuarios"),e.qZA()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()()(),e.TgZ(17,"div",11)(18,"h2",12),e._uU(19," Listado de usuarios "),e.qZA()()(),e.TgZ(20,"div",13)(21,"button",14),e.NdJ("click",function(){return n.createOrEditUser()}),e._UZ(22,"mat-icon",15),e.TgZ(23,"span",16),e._uU(24,"Nuevo"),e.qZA()()()(),e.TgZ(25,"div",17)(26,"div",18),e.YNc(27,ot,16,13,"ng-container",19),e.ALo(28,"async"),e.YNc(29,nt,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t){const r=e.MAs(30);e.xp6(6),e.Q6J("routerLink","/home"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(28,7,n.users$).length>0)("ngIfElse",r)}},dependencies:[_.yS,u.mk,u.sg,u.O5,R.PQ,k.lW,F.Hw,S.NW,J.YE,J.nU,L.gM,M.gE,u.Ov],encapsulation:2,data:{animation:I.L},changeDetection:0}),o})();var st=i(2911);let P=(()=>{class o{constructor(t){this._userService=t}resolve(t,n){return this._userService.getUsers()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(x.K))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const at=[{path:"",component:rt,resolve:{users:P}},{path:":userId",component:Te,resolve:{merchants:st.K,users:P,user:(()=>{class o{constructor(t){this._userService=t}resolve(t,n){const r=t.params.userId;if("new"!==r)return this._userService.getUserById(r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(x.K))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}];let ct=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.Bz.forChild(at),O.m]}),o})()}}]);