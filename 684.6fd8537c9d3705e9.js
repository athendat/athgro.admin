"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[684],{6428:(st,le,m)=>{m.d(le,{B:()=>de});const de=(0,m(5094).P1)(K=>K.pagination,K=>K.pagination)},2684:(st,le,m)=>{m.r(le),m.d(le,{StockModule:()=>Gi});var C=m(5357),e=m(5e3),de=m(655),K=m(2313),h=m(9808);const ct=["wrapper"],lt=["sourceImage"];function dt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.imageLoadedInView())})("mousedown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))})("touchstart",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))}),e.qZA()}if(2&i){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH)}}function mt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function pt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.keyboardAccess(n))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))})("touchstart",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))}),e.qZA(),e.YNc(2,mt,21,0,"ng-container",8),e.qZA()}if(2&i){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class ut{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var A=(()=>{return(i=A||(A={})).Drag="drag",i.Move="move",i.Resize="resize",i.Pinch="pinch",A;var i})();function Fe(i,s){return i/100*s}let xt=(()=>{class i{crop(t,o,n,r){const a=this.getImagePosition(t,o,n,r),l=a.x2-a.x1,d=a.y2-a.y1,u=document.createElement("canvas");u.width=l,u.height=d;const g=u.getContext("2d");if(!g)return null;null!=r.backgroundColor&&(g.fillStyle=r.backgroundColor,g.fillRect(0,0,l,d));const _=(r.transform.scale||1)*(r.transform.flipH?-1:1),w=(r.transform.scale||1)*(r.transform.flipV?-1:1),{translateH:W,translateV:L}=this.getCanvasTranslate(t,o,r),Q=o.transformed;g.setTransform(_,0,0,w,Q.size.width/2+W,Q.size.height/2+L),g.translate(-a.x1/_,-a.y1/w),g.rotate((r.transform.rotate||0)*Math.PI/180),g.drawImage(Q.image,-Q.size.width/2,-Q.size.height/2);const S={width:l,height:d,imagePosition:a,cropperPosition:Object.assign({},n)};r.containWithinAspectRatio&&(S.offsetImagePosition=this.getOffsetImagePosition(t,o,n,r));const ce=this.getResizeRatio(l,d,r);return 1!==ce&&(S.width=Math.round(l*ce),S.height=r.maintainAspectRatio?Math.round(S.width/r.aspectRatio):Math.round(d*ce),function ft(i,s,t){const o=i.width,n=i.height,r=o/(s=Math.round(s)),a=n/(t=Math.round(t)),l=Math.ceil(r/2),d=Math.ceil(a/2),u=i.getContext("2d");if(u){const g=u.getImageData(0,0,o,n),_=u.createImageData(s,t),w=g.data,W=_.data;for(let L=0;L<t;L++)for(let Q=0;Q<s;Q++){const S=4*(Q+L*s),ce=L*a;let B=0,we=0,et=0,tt=0,ot=0,it=0,nt=0;const ji=Math.floor(Q*r),Ki=Math.floor(L*a);let Qe=Math.ceil((Q+1)*r),Re=Math.ceil((L+1)*a);Qe=Math.min(Qe,o),Re=Math.min(Re,n);for(let Ae=Ki;Ae<Re;Ae++){const rt=Math.abs(ce-Ae)/d,Vi=Q*r,Xi=rt*rt;for(let Ie=ji;Ie<Qe;Ie++){const at=Math.abs(Vi-Ie)/l,G=Math.sqrt(Xi+at*at);if(G>=1)continue;B=2*G*G*G-3*G*G+1;const j=4*(Ie+Ae*o);nt+=B*w[j+3],et+=B,w[j+3]<255&&(B=B*w[j+3]/250),tt+=B*w[j],ot+=B*w[j+1],it+=B*w[j+2],we+=B}}W[S]=tt/we,W[S+1]=ot/we,W[S+2]=it/we,W[S+3]=nt/et}i.width=s,i.height=t,u.putImageData(_,0,0)}}(u,S.width,S.height)),S.base64=u.toDataURL("image/"+r.format,this.getQuality(r)),S}getCanvasTranslate(t,o,n){if("px"===n.transform.translateUnit){const r=this.getRatio(t,o);return{translateH:(n.transform.translateH||0)*r,translateV:(n.transform.translateV||0)*r}}return{translateH:n.transform.translateH?Fe(n.transform.translateH,o.transformed.size.width):0,translateV:n.transform.translateV?Fe(n.transform.translateV,o.transformed.size.height):0}}getRatio(t,o){return o.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,o,n,r){const a=this.getRatio(t,o),l={x1:Math.round(n.x1*a),y1:Math.round(n.y1*a),x2:Math.round(n.x2*a),y2:Math.round(n.y2*a)};return r.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,o.transformed.size.width),l.y2=Math.min(l.y2,o.transformed.size.height)),l}getOffsetImagePosition(t,o,n,r){const d=o.transformed.size.width/t.nativeElement.offsetWidth;let u,g;(r.canvasRotation+o.exifTransform.rotate)%2?(u=(o.transformed.size.width-o.original.size.height)/2,g=(o.transformed.size.height-o.original.size.width)/2):(u=(o.transformed.size.width-o.original.size.width)/2,g=(o.transformed.size.height-o.original.size.height)/2);const _={x1:Math.round(n.x1*d)-u,y1:Math.round(n.y1*d)-g,x2:Math.round(n.x2*d)-u,y2:Math.round(n.y2*d)-g};return r.containWithinAspectRatio||(_.x1=Math.max(_.x1,0),_.y1=Math.max(_.y1,0),_.x2=Math.min(_.x2,o.transformed.size.width),_.y2=Math.min(_.y2,o.transformed.size.height)),_}getResizeRatio(t,o,n){const r=n.resizeToWidth/t,a=n.resizeToHeight/o,l=new Array;n.resizeToWidth>0&&l.push(r),n.resizeToHeight>0&&l.push(a);const d=0===l.length?1:Math.min(...l);return d>1&&!n.onlyScaleDown?d:Math.min(d,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),vt=(()=>{class i{resetCropperPosition(t,o,n){if(null==t||!t.nativeElement)return;const r=t.nativeElement;if(n.cropperStaticHeight&&n.cropperStaticWidth)o.x1=0,o.x2=r.offsetWidth>n.cropperStaticWidth?n.cropperStaticWidth:r.offsetWidth,o.y1=0,o.y2=r.offsetHeight>n.cropperStaticHeight?n.cropperStaticHeight:r.offsetHeight;else{const a=Math.min(n.cropperScaledMaxWidth,r.offsetWidth),l=Math.min(n.cropperScaledMaxHeight,r.offsetHeight);if(n.maintainAspectRatio)if(r.offsetWidth/n.aspectRatio<r.offsetHeight){o.x1=0,o.x2=a;const d=a/n.aspectRatio;o.y1=(r.offsetHeight-d)/2,o.y2=o.y1+d}else{o.y1=0,o.y2=l;const d=l*n.aspectRatio;o.x1=(r.offsetWidth-d)/2,o.x2=o.x1+d}else o.x1=0,o.x2=a,o.y1=0,o.y2=l}}move(t,o,n){const r=this.getClientX(t)-o.clientX,a=this.getClientY(t)-o.clientY;n.x1=o.x1+r,n.y1=o.y1+a,n.x2=o.x2+r,n.y2=o.y2+a}resize(t,o,n,r,a){const l=this.getClientX(t)-o.clientX,d=this.getClientY(t)-o.clientY;switch(o.position){case"left":n.x1=Math.min(Math.max(o.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(o.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y1=Math.min(Math.max(o.y1+d,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(o.y1+d,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(o.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y1=Math.min(Math.max(o.y1+d,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(o.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(o.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y2=Math.max(Math.min(o.y2+d,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(o.y2+d,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(o.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y2=Math.max(Math.min(o.y2+d,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"center":const u=t.scale,g=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(o.x2-o.x1)*u),a.cropperScaledMaxWidth),_=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(o.y2-o.y1)*u),a.cropperScaledMaxHeight);n.x1=o.clientX-g/2,n.x2=o.clientX+g/2,n.y1=o.clientY-_/2,n.y2=o.clientY+_/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>r.width&&(n.x1-=n.x2-r.width,n.x2=r.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>r.height&&(n.y1-=n.y2-r.height,n.y2=r.height)}a.maintainAspectRatio&&this.checkAspectRatio(o.position,n,r,a)}checkAspectRatio(t,o,n,r){let a=0,l=0;switch(t){case"top":o.x2=o.x1+(o.y2-o.y1)*r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(0-o.y1,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y1+=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"bottom":o.x2=o.x1+(o.y2-o.y1)*r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(o.y2-n.height,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y2-=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"topleft":o.y1=o.y2-(o.x2-o.x1)/r.aspectRatio,a=Math.max(0-o.x1,0),l=Math.max(0-o.y1,0),(a>0||l>0)&&(o.x1+=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y1+=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"topright":o.y1=o.y2-(o.x2-o.x1)/r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(0-o.y1,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y1+=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"right":case"bottomright":o.y2=o.y1+(o.x2-o.x1)/r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(o.y2-n.height,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y2-=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"left":case"bottomleft":o.y2=o.y1+(o.x2-o.x1)/r.aspectRatio,a=Math.max(0-o.x1,0),l=Math.max(o.y2-n.height,0),(a>0||l>0)&&(o.x1+=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y2-=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"center":o.x2=o.x1+(o.y2-o.y1)*r.aspectRatio,o.y2=o.y1+(o.x2-o.x1)/r.aspectRatio;const d=Math.max(0-o.x1,0),u=Math.max(o.x2-n.width,0),g=Math.max(o.y2-n.height,0),_=Math.max(0-o.y1,0);(d>0||u>0||g>0||_>0)&&(o.x1+=g*r.aspectRatio>d?g*r.aspectRatio:d,o.x2-=_*r.aspectRatio>u?_*r.aspectRatio:u,o.y1+=_*r.aspectRatio>u?_:u/r.aspectRatio,o.y2-=g*r.aspectRatio>d?g:d/r.aspectRatio)}}getClientX(t){var o;return(null===(o=t.touches)||void 0===o?void 0:o[0].clientX)||t.clientX||0}getClientY(t){var o;return(null===(o=t.touches)||void 0===o?void 0:o[0].clientY)||t.clientY||0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();let wt=(()=>{class i{constructor(){this.autoRotateSupported=function Ct(){return new Promise(i=>{const s=new Image;s.onload=()=>{i(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,o){return new Promise((n,r)=>{const a=new FileReader;a.onload=l=>{this.loadImage(l.target.result,t.type,o).then(n).catch(r)},a.readAsDataURL(t)})}loadImage(t,o,n){return this.isValidImageType(o)?this.loadBase64Image(t,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,o){return new Promise((n,r)=>{const a=new Image;a.onerror=()=>r,a.onload=()=>{const l=document.createElement("canvas"),d=l.getContext("2d");l.width=a.width,l.height=a.height,null==d||d.drawImage(a,0,0),this.loadBase64Image(l.toDataURL(),o).then(n)},a.crossOrigin="anonymous",a.src=t})}loadBase64Image(t,o){return new Promise((n,r)=>{const a=new Image;a.onload=()=>n({originalImage:a,originalBase64:t}),a.onerror=r,a.src=t}).then(n=>this.transformImageBase64(n,o))}transformImageBase64(t,o){return(0,de.mG)(this,void 0,void 0,function*(){const n=yield this.autoRotateSupported,r=yield function yt(i){switch("string"==typeof i&&(i=function kt(i){const s=new DataView(function Zt(i){i=i.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(i),t=s.length,o=new Uint8Array(t);for(let n=0;n<t;n++)o[n]=s.charCodeAt(n);return o.buffer}(i));if(65496!==s.getUint16(0,!1))return-2;const t=s.byteLength;let o=2;for(;o<t;){if(s.getUint16(o+2,!1)<=8)return-1;const n=s.getUint16(o,!1);if(o+=2,65505==n){if(1165519206!==s.getUint32(o+=2,!1))return-1;const r=18761==s.getUint16(o+=6,!1);o+=s.getUint32(o+4,r);const a=s.getUint16(o,r);o+=2;for(let l=0;l<a;l++)if(274==s.getUint16(o+12*l,r))return s.getUint16(o+12*l+8,r)}else{if(65280!=(65280&n))break;o+=s.getUint16(o,!1)}}return-1}(i)),i){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?this.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:r},o):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(t,o){return(0,de.mG)(this,void 0,void 0,function*(){const n=o.canvasRotation+t.exifTransform.rotate,r={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===n&&!t.exifTransform.flip&&!o.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},transformed:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},exifTransform:t.exifTransform};const a=this.getTransformedSize(r,t.exifTransform,o),l=document.createElement("canvas");l.width=a.width,l.height=a.height;const d=l.getContext("2d");null==d||d.setTransform(t.exifTransform.flip?-1:1,0,0,1,l.width/2,l.height/2),null==d||d.rotate(Math.PI*(n/2)),null==d||d.drawImage(t.original.image,-r.width/2,-r.height/2);const u=l.toDataURL(),g=yield this.loadImageFromBase64(u);return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},transformed:{base64:u,image:g,size:{width:g.width,height:g.height}},exifTransform:t.exifTransform}})}loadImageFromBase64(t){return new Promise((o,n)=>{const r=new Image;r.onload=()=>o(r),r.onerror=n,r.src=t})}getTransformedSize(t,o,n){const r=n.canvasRotation+o.rotate;if(n.containWithinAspectRatio){if(r%2){const l=t.height/n.aspectRatio;return{width:Math.max(t.height,t.width*n.aspectRatio),height:Math.max(t.width,l)}}{const l=t.width/n.aspectRatio;return{width:Math.max(t.width,t.height*n.aspectRatio),height:Math.max(t.height,l)}}}return r%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Je=(()=>{class i{constructor(t,o,n,r,a){this.cropService=t,this.cropperPositionService=o,this.loadImageService=n,this.sanitizer=r,this.cd=a,this.Hammer=(null==window?void 0:window.Hammer)||null,this.settings=new ut,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=A,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){var o;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),(null===(o=this.loadedImage)||void 0===o?void 0:o.original.image.complete)&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck())}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t,o,n;return(null===(n=null===(o=null===(t=this.imageChangedEvent)||void 0===t?void 0:t.target)||void 0===o?void 0:o.files)||void 0===n?void 0:n.length)>0}setCssTransform(){var t;const o=(null===(t=this.transform)||void 0===t?void 0:t.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${o}, ${this.transform.translateV||0}${o}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t,o;return(null===(o=null===(t=this.sourceImage)||void 0===t?void 0:t.nativeElement)||void 0===o?void 0:o.offsetWidth)>0}onResize(){!this.loadedImage||(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const o=+t.key;o>=1&&o<=9&&(this.settings.stepSize=o)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const n=t.shiftKey?A.Resize:A.Move,r=t.altKey?function ht(i){switch(i){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function gt(i){switch(i){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function _t(i,s){switch(i){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},n,r),this.moveImg(a),this.moveStop()}startMove(t,o,n=null){var r,a;this.disabled||(null===(r=this.moveStart)||void 0===r?void 0:r.active)&&(null===(a=this.moveStart)||void 0===a?void 0:a.type)===A.Pinch||o===A.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:o,position:n,transform:Object.assign({},this.transform),clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper))}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:A.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){var o,n;if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===A.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===A.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===A.Drag){const r=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform=Object.assign(Object.assign({},this.transform),{translateH:((null===(o=this.moveStart.transform)||void 0===o?void 0:o.translateH)||0)+r,translateV:((null===(n=this.moveStart.transform)||void 0===n?void 0:n.translateV)||0)+a}),this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===A.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var t,o;null!==(o=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)&&void 0!==o&&o.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var t,o;if(null!==(o=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)&&void 0!==o&&o.image){const n=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/n:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/n:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){var t;this.moveStart.active&&(this.moveStart.active=!1,(null===(t=this.moveStart)||void 0===t?void 0:t.type)===A.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var t,o;if(null!=(null===(o=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===o?void 0:o.image)){this.startCropImage.emit();const n=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=n&&this.imageCropped.emit(n),n}return null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt),e.Y36(vt),e.Y36(wt),e.Y36(K.H7),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["image-cropper"]],viewQuery:function(t,o){if(1&t&&(e.Gf(ct,7),e.Gf(lt,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.wrapper=n.first),e.iGM(n=e.CRH())&&(o.sourceImage=n.first)}},hostVars:4,hostBindings:function(t,o){1&t&&e.NdJ("resize",function(){return o.onResize()},!1,e.Jf7)("mousemove",function(r){return o.moveImg(r)},!1,e.evT)("touchmove",function(r){return o.moveImg(r)},!1,e.evT)("mouseup",function(){return o.moveStop()},!1,e.evT)("touchend",function(){return o.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",o.alignImage),e.ekj("disabled",o.disabled))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,o){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,dt,2,7,"img",1),e._UZ(3,"div",2),e.YNc(4,pt,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",o.imageVisible&&o.backgroundColor),e.xp6(2),e.Q6J("ngIf",o.safeImgDataUrl),e.xp6(1),e.Udp("width",o.maxSize.width,"px")("height",o.maxSize.height,"px")("margin-left","center"===o.alignImage?o.marginLeft:null),e.xp6(1),e.Q6J("ngIf",o.imageVisible))},dependencies:[h.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),i})(),At=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez]]}),i})();var Ne=m(8314),It=m(2266),Y=m(4062),c=m(3075),y=m(9646),I=m(7579),p=m(2722),me=m(5119),z=m(4787);const De={_id:null,userId:null,merchantId:null,active:null,name:null,slug:null};var J=m(520),T=m(8505),pe=m(4813),k=m(5698),x=m(3900),b=m(4004),ue=m(5714),ge=m(2340),V=m(8124),v=m(5094);const Be=i=>i.brands,P=((0,v.P1)(Be,i=>i.brand),(0,v.P1)(Be,i=>i.brands)),X=ge.N.API_URL;let he=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}getBrands(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${X}/brands/`,{params:l}).pipe((0,T.b)(({pagination:d,brands:u})=>{this.store.dispatch((0,ue.Jr)({pagination:d})),this.store.dispatch((0,V.dk)({brands:u}))}))}getBrandById(t){return this._httpClient.get(`${X}/brands/${t}`).pipe((0,pe.j)("brand"),(0,T.b)(o=>{this.store.dispatch((0,V.HB)({brand:o}))}))}createBrand(t){return this.store.select(P).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${X}/brands/`,t).pipe((0,T.b)(n=>{this.store.dispatch((0,V.dk)({brands:[n.brand,...o]}))}))))}updateBrand(t){return this.store.select(P).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${X}/brands/${t._id}`,t).pipe((0,b.U)(n=>([...o][o.findIndex(l=>l._id===t._id)]=n.brand,this.store.dispatch((0,V.dk)({brands:o})),n)))))}deleteBrand(t){return this.store.select(P).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${X}/brands/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this.store.dispatch((0,V.dk)({brands:o})),n}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=m(1683),ze=m(7231),Ee=m(393),U=m(7423),F=m(5245),f=m(7322),R=m(7531),_e=m(2368);function Tt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createBrand())}),e._UZ(2,"mat-icon",31),e.TgZ(3,"span",32),e._uU(4,"Guardar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:save"))}function St(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateBrand())}),e._UZ(2,"mat-icon",31),e.TgZ(3,"span",32),e._uU(4,"Actualizar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:refresh"))}let Mt=(()=>{class i{constructor(t,o,n,r,a,l,d,u){this._activatedRoute=t,this._brandsService=o,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._imagesService=l,this._router=d,this.store=u,this.brandId=null,this.croppedImage="",this.editMode=!1,this.imageChangedEvent="",this.selectedBrand=De,this.user=null,this.user$=(0,y.of)(null),this._unsubscribeAll=new I.x}ngOnInit(){this._activatedRoute.params.pipe((0,p.R)(this._unsubscribeAll)).subscribe(({brandId:t})=>{this.brandId=t,"new"!==this.brandId&&(this.editMode=!0,this._brandsService.getBrandById(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedBrand=o,this.brandForm.patchValue(this.selectedBrand)})),this._changeDetectorRef.markForCheck()}),this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.brandForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],description:[null,[c.kI.minLength(3),c.kI.maxLength(250)]],logoUrl:[null]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createBrand(){let t=this.brandForm.getRawValue();t=(0,me.Z)(t,["_id"]),t.slug=new Y.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.createBrand(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/modules/stock/panels/brands")}),this._changeDetectorRef.markForCheck()})}updateBrand(){const t=this.brandForm.getRawValue();t.slug=new Y.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.updateBrand(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/modules/stock/panels/brands"),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64;const o=this.base64ToFile(t.base64,this.brandForm.get("name").value);this._imagesService.uploadImage("brands",o).pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{this.brandForm.get("logoUrl").setValue(n.imageUrl),this.editMode&&this._brandsService.updateBrand(this.brandForm.getRawValue()).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Imagen guardada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}base64ToFile(t,o){const n=t.split(","),a=n[0].match(/:(.*?);/)[1].split("/")[1],l=o+"."+a,d=atob(n[1]);let u=d.length;const g=new Uint8Array(u);for(;u--;)g[u]=d.charCodeAt(u);return new File([g],l,{type:a})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.gz),e.Y36(he),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(ze.C),e.Y36(C.F0),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-brand-details"]],decls:54,vars:21,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"z-20","flex","flex-col","p-6","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],["routerLink","/modules/stock/panels/brands",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[4,"ngIf"],["cdkScrollable","",1,"flex","flex-auto","p-6","overflow-y-auto","sm:py-8","sm:px-10"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","matTextareaAutosize","","maxlength","250",3,"formControlName"],[1,"flex","flex-col","gap-5","mt-4","sm:flex-row"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],["type","file",3,"change"],[3,"formControlName","color"],[1,"flex","flex-row","pb-10","mt-3","gap-x-3"],[1,"w-40","h-40"],["format","[png, jpeg, webp, jpg]",1,"w-40","h-40","border","shadow-sm",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","resizeToHeight","imageCropped"],[1,"w-40","h-40","border","shadow-sm"],[3,"src"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Producto"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Marcas"),e.qZA()(),e.TgZ(16,"div",5),e._UZ(17,"mat-icon",6),e.TgZ(18,"a",9),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",10)(21,"h2",11),e._uU(22),e.qZA()()(),e.TgZ(23,"div",12),e.YNc(24,Tt,5,1,"ng-container",13),e.YNc(25,St,5,1,"ng-container",13),e.qZA()(),e.TgZ(26,"div",14)(27,"form",15)(28,"div",16)(29,"mat-form-field",17)(30,"mat-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"input",18),e.qZA()(),e.TgZ(33,"div",16)(34,"mat-form-field",17)(35,"mat-label"),e._uU(36,"Descripci\xf3n"),e.qZA(),e.TgZ(37,"textarea",19),e._uU(38,"                    "),e.qZA()()(),e.TgZ(39,"div",20)(40,"div",21)(41,"span",22),e._uU(42,"Logo"),e.qZA(),e.TgZ(43,"input",23),e.NdJ("change",function(r){return o.fileChangeEvent(r)}),e.qZA()(),e.TgZ(44,"div",21)(45,"span",22),e._uU(46,"Estado"),e.qZA(),e.TgZ(47,"mat-slide-toggle",24),e._uU(48),e.qZA()()(),e.TgZ(49,"div",25)(50,"div",26)(51,"image-cropper",27),e.NdJ("imageCropped",function(r){return o.imageCropped(r)}),e.qZA()(),e.TgZ(52,"div",28),e._UZ(53,"img",29),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Oqu("new"===o.brandId?"Nuevo":o.selectedBrand.name),e.xp6(3),e.hij(" ","new"===o.brandId?"Nuevo":o.selectedBrand.name," "),e.xp6(2),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("formGroup",o.brandForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Marca"),e.xp6(5),e.Q6J("formControlName","description"),e.xp6(10),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===o.brandForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(3),e.Q6J("imageChangedEvent",o.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",800)("resizeToHeight",800),e.xp6(2),e.Q6J("src",o.croppedImage,e.LSH))},dependencies:[Je,C.yS,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,Ee.PQ,U.lW,F.Hw,f.KE,f.hX,R.Nt,_e.Rr],encapsulation:2}),i})();var E=m(6087),q=m(4847),fe=m(6451),H=m(8372),xe=m(6428),ve=m(8288),Z=m(8966);function Ut(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Marca "),e.qZA())}function qt(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Marca "),e.qZA())}function Qt(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(t.data.brand.name||"Sin nombre")}}function Rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"textarea",21),e._uU(13,"                                "),e.qZA()()(),e.TgZ(14,"div",22)(15,"div",23)(16,"span",24),e._uU(17,"Estado"),e.qZA(),e.TgZ(18,"mat-slide-toggle",25),e._uU(19),e.qZA()(),e.TgZ(20,"div",23)(21,"span",24),e._uU(22,"Logo"),e.qZA(),e.TgZ(23,"input",26),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.fileChangeEvent(n))}),e.qZA(),e.TgZ(24,"div",27)(25,"div",28)(26,"image-cropper",29),e.NdJ("imageCropped",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.imageCropped(n))})("imageLoaded",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.imageLoaded())})("cropperReady",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cropperReady())})("loadImageFailed",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadImageFailed())}),e.qZA()(),e.TgZ(27,"div",30),e._UZ(28,"img",31),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.brandForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Marca"),e.xp6(5),e.Q6J("matAutosizeMinRows",1)("formControlName","description"),e.xp6(6),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.brandForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(7),e.Q6J("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1),e.xp6(2),e.Q6J("src",t.croppedImage,e.LSH)}}function Ft(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateBrand())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.brandForm.invalid)("matDialogClose","confirmed")}}function Jt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createBrand())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.brandForm.invalid)("matDialogClose","confirmed")}}function Nt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",32),e.ynx(2),e.TgZ(3,"button",33),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Ft,3,3,"ng-container",6),e.YNc(6,Jt,3,3,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Dt=(()=>{class i{constructor(t,o,n,r,a,l,d){this.data=t,this._brandsService=o,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._dialogRef=l,this.store=d,this.dialogMode="view",this.user$=(0,y.of)(null),this.user=null,this.imageChangedEvent="",this.croppedImage="",this._unsubscribeAll=new I.x,this.dialogMode=t.dialogMode,this.brand=t.brand}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.brandForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],description:[null,[c.kI.minLength(3),c.kI.maxLength(250)]],logoUrl:[null]}),"edit"===this.dialogMode&&this.brandForm.patchValue(this.brand)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createBrand(){let t=this.brandForm.getRawValue();t=(0,me.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.createBrand(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateBrand(){const t=this.brandForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.updateBrand(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64}imageLoaded(t){}cropperReady(){}loadImageFailed(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(he),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(Z.so),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-brand-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","matTextareaAutosize","","maxlength","250",3,"matAutosizeMinRows","formControlName"],[1,"flex","flex-row","gap-3"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],["type","file",3,"change"],[1,"flex","flex-row","mt-3","gap-x-3","max-h-50"],[1,"w-2/3"],["format","[png, jpeg, webp, jpg]",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"w-1/3","border","shadow-sm"],[3,"src"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Ut,2,0,"h2",2),e.YNc(4,qt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Qt,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Rt,29,13,"div",5),e.BQk(),e.qZA(),e.YNc(10,Nt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[Je,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,U.lW,Z.ZT,f.KE,f.hX,R.Nt,_e.Rr],encapsulation:2}),i})();function Bt(i,s){if(1&i&&e._UZ(0,"img",42),2&i){const t=e.oxw().$implicit;e.Q6J("alt","Brand Logo")("src",t.logoUrl,e.LSH)}}function zt(i,s){1&i&&(e.TgZ(0,"div",43),e._uU(1," SIN LOGO "),e.qZA())}function Et(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",44),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Lt(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",45),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const Ot=function(i){return["/modules/stock/panels/brand",i]};function Yt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",31)(2,"div",32)(3,"div",33),e.YNc(4,Bt,1,2,"img",34),e.YNc(5,zt,2,0,"div",35),e.qZA()(),e.TgZ(6,"div",36),e._uU(7),e.qZA(),e.TgZ(8,"div",37)(9,"div",38),e._uU(10),e.qZA()(),e.TgZ(11,"div",39),e.YNc(12,Et,2,1,"ng-container",20),e.YNc(13,Lt,2,1,"ng-container",20),e.qZA(),e.TgZ(14,"div")(15,"button",40),e._UZ(16,"mat-icon",41),e.qZA()()(),e.BQk()),2&i){const t=s.$implicit;e.xp6(4),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.logoUrl),e.xp6(2),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink",e.VKq(8,Ot,t._id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil")}}function Pt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Yt,17,10,"ng-container",30),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const Ht=function(i){return{"pointer-events-none":i}},$t=function(){return[5,10,25,100]};function Wt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e._UZ(3,"div"),e.TgZ(4,"div",25),e._uU(5,"Nombre"),e.qZA(),e.TgZ(6,"div",26),e._uU(7," Descripci\xf3n "),e.qZA(),e.TgZ(8,"div",27),e._uU(9," Activo "),e.qZA(),e.TgZ(10,"div",28),e._uU(11,"Detalles"),e.qZA()(),e.YNc(12,Pt,2,2,"ng-container",20),e.ALo(13,"async"),e.qZA(),e._UZ(14,"mat-paginator",29),e.BQk()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(13,9,t.brands$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Ht,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,$t))("showFirstLastButtons",!0)}}function Gt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Wt,15,14,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function jt(i,s){1&i&&(e.TgZ(0,"div",46),e._uU(1,"\xa1No se ha creado ninguna marca!"),e.qZA())}let Kt=(()=>{class i{constructor(t,o,n,r,a){this._brandsService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=r,this.store=a,this.flashMessage=null,this.brands$=(0,y.of)([]),this.merchantInputControl=new c.p4,this.isLoading=!1,this.searchInputControl=new c.p4,this._unsubscribeAll=new I.x}ngOnInit(){this.brands$=this.store.select(P),this.store.select(xe.B).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,p.R)(this._unsubscribeAll),(0,H.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._brandsService.getBrands(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,fe.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._brandsService.getBrands(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createBrand(){this._openDialog(De,"add")}updateBrand(t){this._openDialog(t,"edit")}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(Dt,{data:{brand:t,dialogMode:o},panelClass:"ath-dialog-panel",height:"90%"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(he),e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-brands"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLink","/modules/stock/panels/brand/new",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noBrands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","brands-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","brands-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Producto"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Marcas"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Marcas "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,Gt,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,jt,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar marcas"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.brands$)))},dependencies:[C.rH,C.yS,h.mk,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov],styles:[".brands-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.brands-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.brands-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.brands-grid{grid-template-columns:72px auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:ve.L},changeDetection:0}),i})();var be=m(3259),Vt=m(8258),O=m(149),Xt=m(449),N=m(7489),Le=m(1910),eo=m(8675),Ce=m(9784),ye=m(2682),Te=m(7261),Oe=m(1079),ee=m(508);function to(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la categor\xeda es obligatorio. "),e.qZA())}function oo(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," La cueta padre es obligatoria. "),e.qZA())}function io(i,s){if(1&i&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function no(i,s){1&i&&(e.TgZ(0,"mat-icon",21),e._uU(1,"brush"),e.qZA())}function ro(i,s){if(1&i&&(e.TgZ(0,"mat-icon",21),e._uU(1),e.qZA()),2&i){e.oxw();const t=e.MAs(33);e.xp6(1),e.Oqu(t.value)}}const ao=function(i){return{"cursor-not-allowed":i}};let so=(()=>{class i{constructor(t,o,n,r,a,l,d,u){this.data=t,this._athConfirmationService=o,this._categoriesService=n,this._changeDetectorRef=r,this._dialogRef=a,this._formBuilder=l,this._snackBar=d,this.store=u,this.categories=[],this.categoriesData=[],this.category=null,this.mainCategory={_id:"000000000000000000000000",parentId:"000000000000000000000000",name:"Principal",level:0},this._unsubscribeAll=new I.x}ngOnInit(){this.store.select(z.rk).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t}),this.store.select(be.us).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=[...t],this.categoriesData=[...t]}),this.searchCategoriesControl=new c.NI("Principal"),this.categoryForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[c.kI.required]],active:[!1],name:[null,[c.kI.required,c.kI.maxLength(250)]],icon:["brush"],businessId:["000000000000000000000000"],parentId:["000000000000000000000000"],level:[0,[c.kI.required,c.kI.min(0)]]}),this.filteredCategories=this.searchCategoriesControl.valueChanges.pipe((0,p.R)(this._unsubscribeAll),(0,H.b)(600),(0,eo.O)(""),(0,x.w)(t=>(0,y.of)(this.categories.filter(o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())))))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}fillOwnerCategories(t){const o=t.option.value;this.categoryForm.get("parentId").setValue(o._id),this.categoryForm.get("level").setValue(o.level),this.searchCategoriesControl.setValue(o.name)}closeDialog(t){this.category=t,this.data.category=t,this._dialogRef.close(this.data)}createCategory(){let t=this.categoryForm.getRawValue();t=(0,N.omit)(t,["_id","createdAt","updatedAt"]),this._athConfirmationService.open({title:"Crear Categor\xeda",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._categoriesService.createCategory(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._snackBar.openFromComponent(Ce.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck(),this.closeDialog(r.category)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(M.R),e.Y36(ye.G),e.Y36(e.sBO),e.Y36(Z.so),e.Y36(c.QS),e.Y36(Te.ux),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["categories-dialog"]],decls:40,vars:26,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title",""],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-x-4"],[1,"w-full"],["matInput","","require","",3,"formControlName","type","placeholder"],[4,"ngIf"],["aria-label","String","matInput","","required","",3,"type","placeholder","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","icon-size-5 mr-2",4,"ngIf"],["iconInput",""],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","",1,"-ml-4","rounded-full",3,"color","click"],["mat-flat-button","",1,"rounded-full","bg-primary-500","text-black",3,"ngClass","disabled","click"],[1,"icon-size-5","mr-2"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1)(3,"h2",2),e._uU(4,"Agregar categor\xeda"),e.qZA()(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.TgZ(7,"div",4)(8,"div",5)(9,"form",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),e._uU(13,"Nombre de la categor\xeda"),e.qZA(),e._UZ(14,"input",9),e.YNc(15,to,2,0,"mat-error",10),e.qZA(),e.TgZ(16,"mat-form-field",8)(17,"mat-label"),e._uU(18,"Categor\xeda Padre"),e.qZA(),e._UZ(19,"input",11),e.YNc(20,oo,2,0,"mat-error",10),e.TgZ(21,"mat-autocomplete",12,13),e.NdJ("optionSelected",function(r){return o.fillOwnerCategories(r)}),e.TgZ(23,"mat-option",14),e._uU(24),e.qZA(),e.YNc(25,io,2,2,"mat-option",15),e.ALo(26,"async"),e.qZA()(),e.TgZ(27,"mat-form-field",8)(28,"mat-label"),e._uU(29,"Icono"),e.qZA(),e.YNc(30,no,2,0,"mat-icon",16),e.YNc(31,ro,2,1,"mat-icon",16),e._UZ(32,"input",9,17),e.qZA()()()()(),e.BQk(),e.qZA(),e.ynx(34),e.TgZ(35,"div",18)(36,"button",19),e.NdJ("click",function(){return o.closeDialog(null)}),e._uU(37,"Cancelar"),e.qZA(),e.TgZ(38,"button",20),e.NdJ("click",function(){return o.createCategory()}),e._uU(39,"Agregar"),e.qZA()(),e.BQk(),e.qZA()),2&t){const n=e.MAs(22),r=e.MAs(33);e.xp6(9),e.Q6J("formGroup",o.categoryForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("type","text")("placeholder","Introduzca el nombre de la categor\xeda"),e.xp6(1),e.Q6J("ngIf",o.categoryForm.get("name").hasError("required")),e.xp6(4),e.Q6J("type","text")("placeholder","Filtre por nombre o n\xfamero de categor\xeda")("formControl",o.searchCategoriesControl)("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",o.categoryForm.get("parentId").hasError("required")),e.xp6(3),e.Q6J("value",o.mainCategory),e.xp6(1),e.hij(" ",o.mainCategory.name," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(26,22,o.filteredCategories)),e.xp6(5),e.Q6J("ngIf",!r.value||""===r.value),e.xp6(1),e.Q6J("ngIf",r.value&&""!==r.value),e.xp6(1),e.Q6J("formControlName","icon")("type","text")("placeholder","Introduzca el nombre del \xedcono"),e.xp6(4),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngClass",e.VKq(24,ao,o.categoryForm.invalid))("disabled",o.categoryForm.invalid)}},dependencies:[h.mk,h.sg,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,Oe.XC,Oe.ZL,ee.ey,U.lW,Z.uh,F.Hw,f.TO,f.KE,f.hX,R.Nt,h.Ov],encapsulation:2,changeDetection:0}),i})();var co=m(7839),te=m(1233),lo=m(7238);function mo(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la categor\xeda es obligatorio. "),e.qZA())}const Ye=function(i){return{"cursor-not-allowed":i}};function po(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createCategory())}),e._UZ(1,"mat-icon",11),e._uU(2," Salvar "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,Ye,t.categoryForm.invalid))("disabled",t.categoryForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function uo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateCategory())}),e._UZ(1,"mat-icon",11),e._uU(2," Editar "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,Ye,t.categoryForm.invalid))("disabled",t.categoryForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}const go=function(i){return{"text-primary-500":i}},Pe=function(i){return{hidden:i}};let ho=(()=>{class i{constructor(t,o,n,r,a,l){this._athConfirmationService=t,this._categoriesService=o,this._changeDetectorRef=n,this._formBuilder=r,this.store=a,this._snackBar=l,this.isIcon=!1,this.mode="add",this._unsubscribeAll=new I.x}ngOnInit(){this.categoryForm=this._formBuilder.group({name:[this.node.item.name,[c.kI.required,c.kI.maxLength(250)]],icon:[this.node.item.icon]}),this.store.select(z.rk).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}fillOwnerCategories(t){}createCategory(){const t=(0,N.omit)(this.node.item,["_id"]);t.active=!0,t.icon="document-text",t.name=this.categoryForm.get("name").value,t.icon=this.categoryForm.get("icon").value,t.userId=this.user._id,this._categoriesService.createCategory(t).subscribe(o=>{this._snackBar.openFromComponent(Ce.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n de creaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})})}updateCategory(){const t=Object.assign({},this.node.item);t.active=!0,t.name=this.categoryForm.get("name").value,t.icon=this.categoryForm.get("icon").value,this._categoriesService.updateCategory(t).subscribe(o=>{this._snackBar.openFromComponent(Ce.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n de creaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})})}discardItem(){if("add"===this.mode)this.store.dispatch((0,te.sT)({category:{_id:"",parentId:this.node.item._id,level:this.node.item.level}}));else{const t=Object.assign({},this.node.item);t.mode="none","edit"===this.mode&&this.store.dispatch((0,te.yr)({category:t}))}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.R),e.Y36(ye.G),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(v.yh),e.Y36(Te.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["categories-single-input"]],inputs:{mode:"mode",node:"node"},decls:17,vars:22,consts:[[1,"flex","flex-wrap"],[3,"formGroup","autocomplete"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-64"],["mat-icon-button","",1,"mr-2",3,"matTooltip","click"],[1,"icon-size-5","text-grey-500",3,"ngClass"],["matInput","","require","",3,"formControlName","type","placeholder","ngClass"],["iconInput",""],[4,"ngIf"],[1,"flex","ml-5","justify-around","min-w-[70%]","max-w-[75%]","sm:min-w-[25%]","sm:max-w-[30%]"],["mat-button","",3,"ngClass","disabled","click",4,"ngIf"],["mat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["mat-button","",3,"ngClass","disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"button",3),e.NdJ("click",function(){return o.isIcon=!o.isIcon}),e.TgZ(4,"mat-icon",4),e._uU(5,"swap_horizontal_circle"),e.qZA()(),e._UZ(6,"input",5,6)(8,"input",5),e.YNc(9,mo,2,0,"mat-error",7),e.qZA()(),e.ynx(10),e.TgZ(11,"div",8),e.YNc(12,po,3,5,"button",9),e.YNc(13,uo,3,5,"button",9),e.TgZ(14,"button",10),e.NdJ("click",function(){return o.discardItem()}),e._UZ(15,"mat-icon",11),e._uU(16," Descartar "),e.qZA()(),e.BQk(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.categoryForm)("autocomplete","off"),e.xp6(2),e.Q6J("matTooltip","Intercalar Nombre/Icono"),e.xp6(1),e.Q6J("ngClass",e.VKq(16,go,o.isIcon)),e.xp6(2),e.Q6J("formControlName","icon")("type","text")("placeholder","Nombre del Icono")("ngClass",e.VKq(18,Pe,!o.isIcon)),e.xp6(2),e.Q6J("formControlName","name")("type","text")("placeholder","Nombre de la categor\xeda")("ngClass",e.VKq(20,Pe,o.isIcon)),e.xp6(1),e.Q6J("ngIf",o.categoryForm.get("name").hasError("required")),e.xp6(3),e.Q6J("ngIf","add"===o.mode),e.xp6(1),e.Q6J("ngIf","edit"===o.mode),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:backspace"))},dependencies:[h.mk,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,U.lW,F.Hw,f.TO,f.KE,R.Nt,lo.gM],encapsulation:2,changeDetection:0}),i})();const He=function(i,s){return{"bg-primary-100":i,"bg-gradient-to-r from-primary-200 to-primary-300":s}},$e=function(i){return{display:i}};function _o(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",20),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("mouseleave",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseOver(r.item._id))}),e.TgZ(1,"button",21),e._UZ(2,"div",22),e.qZA(),e.TgZ(3,"span",23),e._uU(4),e.qZA(),e.TgZ(5,"div",24)(6,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addNewItem(r))}),e._UZ(7,"mat-icon",26),e.qZA(),e.TgZ(8,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addUpdateItem(r))}),e._UZ(9,"mat-icon",26),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteCategory(r.item))}),e._UZ(11,"mat-icon",26),e.qZA()()()}if(2&i){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.WLB(7,He,t.item._id===o.selectedCategoryId,t.item._id===o.overCategoryId)),e.xp6(1),e.uIk("aria-label","Expandir "+t.item.name),e.xp6(3),e.Oqu(t.item.name),e.xp6(1),e.Q6J("ngStyle",e.VKq(10,$e,t.item._id===o.overCategoryId||t.item._id===o.selectedCategoryId?"flex":"none")),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash")}}function fo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",27),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("mouseleave",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseOver(r.item._id))}),e._UZ(1,"categories-single-input",28),e.qZA()}if(2&i){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("node",o.flatNodeMap.get(t))("mode",t.item.mode)}}function xo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",29),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("mouseleave",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseOver(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.dobleClick(r))}),e.TgZ(1,"button",21),e._UZ(2,"mat-icon",13),e.qZA(),e.TgZ(3,"span",23),e._uU(4),e.qZA(),e.TgZ(5,"div",24)(6,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addNewItem(r))}),e._UZ(7,"mat-icon",26),e.qZA(),e.TgZ(8,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addUpdateItem(r))}),e._UZ(9,"mat-icon",26),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteCategory(r.item))}),e._UZ(11,"mat-icon",26),e.qZA()(),e.TgZ(12,"span",30),e._uU(13),e.qZA()()}if(2&i){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.WLB(9,He,t.item._id===o.selectedCategoryId,t.item._id===o.overCategoryId)),e.xp6(1),e.uIk("aria-label","Expandir "+t.item.name),e.xp6(1),e.Q6J("svgIcon",o.treeControl.isExpanded(t)?"heroicons_outline:chevron-down":"heroicons_outline:chevron-right"),e.xp6(2),e.Oqu(t.item.name),e.xp6(1),e.Q6J("ngStyle",e.VKq(12,$e,t.item._id===o.overCategoryId||t.item._id===o.selectedCategoryId?"flex":"none")),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Oqu(o.flatNodeMap.get(t).children.length)}}let vo=(()=>{class i{constructor(t,o,n,r,a,l){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._categoriesService=r,this.store=a,this._snackBar=l,this.merchants=[],this.merchants$=(0,y.of)([]),this.categoriesNodes=[],this.categoriesNodes$=(0,y.of)([]),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.oldTreeControl=null,this.newItemName="",this.checklistSelection=new Xt.Ov(!0),this.selectedCategoryId="",this.overCategoryId="",this._unsubscribeAll=new I.x,this.getLevel=d=>d.level,this.isExpandable=d=>d.expandable,this.getChildren=d=>d.children,this.hasChild=(d,u)=>u.expandable,this.hasNoContent=(d,u)=>"add"===u.item.mode||"edit"===u.item.mode,this.transformer=(d,u)=>{var g;const _=this.nestedNodeMap.get(d),w=_&&_.item.name===d.item.name?_:new co.K;return w.item=d.item,w.level=u,w.expandable=!(null===(g=d.children)||void 0===g||!g.length),this.flatNodeMap.set(w,d),this.nestedNodeMap.set(d,w),w},this.treeFlattener=new O.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new Vt.C2(this.getLevel,this.isExpandable),this.dataSource=new O.kc(this.treeControl,this.treeFlattener)}ngOnInit(){this.merchants$=this.store.select(Le.UV),this.merchants$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.merchants=t}),this.categoriesNodes$=this.store.select(be.YK),this.categoriesNodes$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{if(this.oldTreeControl=N.cloneDeep(this.treeControl),this.dataSource.data=t,this.oldTreeControl&&void 0!==this.oldTreeControl.dataNodes)for(const o of this.oldTreeControl.dataNodes)if(this.oldTreeControl.isExpanded(o)){const n=this.treeControl.dataNodes.find(r=>r.item._id===o.item._id);this.treeControl.expand(n)}if(this.selectedParent){const o=this.treeControl.dataNodes.find(n=>n.item._id===this.selectedParent.item._id);"edit"===this.selectedParent.item.mode?this.treeControl.collapse(o):this.treeControl.expand(o)}}),this._categoriesService.getCategories().subscribe()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}mauseEnterLeave(t){this.selectedCategoryId=t===this.selectedCategoryId?"":t}mauseOver(t){this.overCategoryId=t===this.overCategoryId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}descendantsAllSelected(t){const o=this.treeControl.getDescendants(t);return o.length>0&&o.every(r=>this.checklistSelection.isSelected(r))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(r=>this.checklistSelection.isSelected(r))&&!this.descendantsAllSelected(t)}getParentNode(t){const o=this.getLevel(t);if(o<1)return null;for(let r=this.treeControl.dataNodes.indexOf(t)-1;r>=0;r--){const a=this.treeControl.dataNodes[r];if(this.getLevel(a)<o)return a}return null}getRootParentsNode(t){if(!t||void 0===t)return null;const o=this.treeControl.dataNodes.find(n=>n.item._id===t.item.parentId);return o&&void 0!==o?this.getRootParentsNode(o):t}addNewItem(t){const o=this.flatNodeMap.get(t),n=(0,N.cloneDeep)(t);n.item.mode="add",this.selectedParent=n,this.store.dispatch((0,te.BD)({category:{_id:"",mode:"add",parentId:o.item._id,level:o.item.level+1}}))}addUpdateItem(t){const o=this.flatNodeMap.get(t),n=(0,N.cloneDeep)(t);n.item.mode="edit",this.selectedParent=n;const r=n.item;r.mode="edit",this.store.dispatch((0,te.sT)({category:{_id:"",parentId:o.item._id,level:r.level+1}})),this.store.dispatch((0,te.yr)({category:r}))}saveNode(t,o,n){const r=this.flatNodeMap.get(t);r.item.name=o,r.item.isGroup=n;const a=(0,N.omit)(r.item,["_id"]);this._categoriesService.createCategory(a).subscribe(l=>{this.treeControl.expand(this.selectedParent)})}openDialog(){this._dialog.open(so,{data:{account:null},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(o=>{let n;if(o.category){for(const r of this.flatNodeMap.keys())r.item._id===o.category.parentId&&(n=r);this.treeControl.expand(n)}})}deleteCategory(t){this._fuseConfirmationService.open({title:"Eliminar categor\xeda",message:`\xbfEst\xe1 seguro que desea eliminar el categor\xeda ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._categoriesService.deleteCategory(t._id).subscribe(r=>{!r||(this._snackBar.openFromComponent(Ce.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Categor\xeda ${t.name} eliminada correctamente`,title:"Confirmaci\xf3n de eliminaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck())},r=>{console.warn(r)})}),this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(ye.G),e.Y36(v.yh),e.Y36(Te.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-categories"]],decls:28,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","p-10","overflow-auto"],[1,"w-full",3,"dataSource","treeControl"],["class","flex flex-wrap","matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"mouseenter","mouseleave","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["class","relative flex flex-wrap","matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","flex-wrap",3,"ngClass","mouseenter","mouseleave","click"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"w-2","h-2","rounded-full","bg-primary-500"],[1,"cursor-default","whitespace-nowrap"],[1,"tree-actions",3,"ngStyle"],["mat-icon-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"mouseenter","mouseleave","click"],[1,"w-full",3,"node","mode"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"relative","flex","flex-wrap",3,"ngClass","mouseenter","mouseleave","click"],[1,"absolute","right-5"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Producto"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Categor\xedas"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Categor\xedas "),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return o.openDialog()}),e._UZ(20,"mat-icon",13),e.TgZ(21,"span",14),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",15)(24,"mat-tree",16),e.YNc(25,_o,12,12,"mat-tree-node",17),e.YNc(26,fo,2,2,"mat-tree-node",18),e.YNc(27,xo,14,14,"mat-tree-node",19),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(4),e.Q6J("dataSource",o.dataSource)("treeControl",o.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",o.hasNoContent),e.xp6(1),e.Q6J("matTreeNodeDefWhen",o.hasChild))},dependencies:[C.yS,h.mk,h.PC,U.lW,F.Hw,O.fQ,O.ah,O.eu,O.gi,O.uo,ho],encapsulation:2}),i})(),bo=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ath-stock"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[C.lC],encapsulation:2}),i})();var Co=m(2451);let yo=(()=>{class i{constructor(t){this.store=t,this.stats$=null,this.stats=null,this._unsubscribeAll=new I.x}ngOnInit(){this.stats$=this.store.select(Co.q),this.stats$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.stats=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-panel"]],decls:69,vars:5,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","p-6","mx-auto","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","leading-8","tracking-tight"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","w-full","grid-cols-1","gap-8","mt-6","sm:grid-cols-2","lg:grid-cols-4","md:mt-8"],["routerLink","/modules/stock/panels/categories",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","leading-6","tracking-tight","truncate"],[1,"ml-2"],[1,"h-6","px-2","bg-yellow-100","rounded-lg","min-h-6"],[1,"font-mono","text-lg","font-medium","text-yellow-900"],["routerLink","/modules/stock/panels/products",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],["routerLink","/modules/stock/panels/brands",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"w-full","mt-12"],[1,"text-2xl","font-semibold","leading-6","tracking-tight"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","items-start","justify-start"],[1,"mr-3",3,"svgIcon"],[1,"flex","flex-col","mt-5"],["routerLink","/modules/stock/panels/products",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],[1,"flex","items-center","justify-center","w-6","h-6","mr-3","rounded-lg","bg-primary-100"],[1,"w-1","h-1","rounded-full","bg-primary-500"],[1,"text-lg","leading-6","tracking-tight"],["routerLink","/modules/stock/panels/brands",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/uom",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/categories",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Gesti\xf3n de Producto"),e.qZA(),e.TgZ(6,"div",4),e._uU(7," Este m\xf3dulo est\xe1 dedicado a todos los componentes de la gesti\xf3n de productos. "),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),e._uU(12,"Categor\xedas"),e.qZA(),e.TgZ(13,"div",9)(14,"div",10)(15,"span",11),e._uU(16),e.qZA()()()()(),e.TgZ(17,"div",12)(18,"div",7)(19,"div",8),e._uU(20,"Productos"),e.qZA(),e.TgZ(21,"div",9)(22,"div",10)(23,"span",11),e._uU(24),e.qZA()()()()(),e.TgZ(25,"div",13)(26,"div",7)(27,"div",8),e._uU(28,"Marcas"),e.qZA(),e.TgZ(29,"div",9)(30,"div",10)(31,"span",11),e._uU(32),e.qZA()()()()()(),e.TgZ(33,"div",14)(34,"div",15),e._uU(35,"Reportes y Listados"),e.qZA()(),e.TgZ(36,"div",5)(37,"div",16)(38,"div",17),e._UZ(39,"mat-icon",18),e.TgZ(40,"div",8),e._uU(41,"Productos"),e.qZA()(),e.TgZ(42,"div",19)(43,"div",20)(44,"div",21),e._UZ(45,"div",22),e.qZA(),e.TgZ(46,"div",23),e._uU(47,"Productos"),e.qZA()()()(),e.TgZ(48,"div",16)(49,"div",17),e._UZ(50,"mat-icon",18),e.TgZ(51,"div",8),e._uU(52,"Nomencladores"),e.qZA()(),e.TgZ(53,"div",19)(54,"div",24)(55,"div",21),e._UZ(56,"div",22),e.qZA(),e.TgZ(57,"div",23),e._uU(58,"Marcas"),e.qZA()(),e.TgZ(59,"div",25)(60,"div",21),e._UZ(61,"div",22),e.qZA(),e.TgZ(62,"div",23),e._uU(63,"Unidades de medida"),e.qZA()(),e.TgZ(64,"div",26)(65,"div",21),e._UZ(66,"div",22),e.qZA(),e.TgZ(67,"div",23),e._uU(68,"Categor\xedas de productos"),e.qZA()()()()()()()),2&t&&(e.xp6(16),e.Oqu(o.stats.entitiesLength.categoriesQty),e.xp6(8),e.Oqu(o.stats.entitiesLength.productsQty),e.xp6(8),e.Oqu(o.stats.entitiesLength.brandsQty),e.xp6(7),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(11),e.Q6J("svgIcon","heroicons_outline:document-text"))},dependencies:[C.rH,F.Hw],encapsulation:2}),i})();const We=i=>i.uoms,$=((0,v.P1)(We,i=>i.uom),(0,v.P1)(We,i=>i.uoms)),ko={_id:null,user:null,active:!0,category:"",name:"",description:"",guaranty:"",tags:[],sku:"",barcode:"",brand:"",supplier:"",uom:"",currency:"",stock:0,onSale:0,cost:0,discount:0,margin:0,taxPercent:0,price:0,weight:0,length:0,height:0,width:0,thumbnail:"",images:[],cumRatePoints:0,rates:0,comments:[],salesQty:0};var Zo=m(1135),wo=m(9300),Ao=m(5840),oe=m(4967);const Ge=i=>i.products,ie=((0,v.P1)(Ge,i=>i.product),(0,v.P1)(Ge,i=>i.products)),D=ge.N.API_URL;let ke=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o,this._tags=new Zo.X(null)}get tags$(){return this._tags.asObservable()}getProducts(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${D}/products/by-merchants-user`,{params:l}).pipe((0,b.U)(({pagination:d,products:u})=>(this.store.dispatch((0,ue.Jr)({pagination:d})),u)),(0,T.b)(d=>{this.store.dispatch((0,oe.RU)({products:d}))}))}getProductById(t){return this._httpClient.get(`${D}/products/find-by-id/${t}`).pipe((0,pe.j)("product"),(0,T.b)(o=>{this.store.dispatch((0,oe.Gr)({product:o}))}))}createProduct(t){return this.store.select(ie).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${D}/products/`,t).pipe((0,T.b)(n=>{this.store.dispatch((0,oe.RU)({products:[n.product,...o]}))}))))}updateProduct(t){return this.store.select(ie).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${D}/products/${t._id}`,t).pipe((0,b.U)(n=>{const r=(0,Ao.Z)(o);return r[o.findIndex(l=>l._id===t._id)]=n.updatedProduct,this.store.dispatch((0,oe.RU)({products:r})),n}))))}deleteProduct(t){return this.store.select(ie).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${D}/products/${t}`).pipe((0,b.U)(n=>{const r=[...o],a=r.findIndex(l=>l._id===t);return r.splice(a,1),this.store.dispatch((0,oe.RU)({products:r})),n}))))}getTags(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${D}/tags`,{params:l}).pipe((0,T.b)(({tags:d})=>{this._tags.next(d)}))}createTag(t){return this.tags$.pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${D}/tags`,t).pipe((0,b.U)(n=>(this._tags.next([...o,n.tag]),n.tag)))))}updateTag(t){return this.tags$.pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${D}/tags/${t._id}`,t).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t._id);return o[r]=n.tag,this._tags.next(o),n.tag}))))}deleteTag(t){return this.tags$.pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${D}/tags/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this._tags.next(o),n}),(0,wo.h)(n=>n),(0,x.w)(n=>this.store.select(ie).pipe((0,k.q)(1),(0,b.U)(r=>(r.forEach(a=>{const l=a.tags.findIndex(d=>d===t);l>-1&&a.tags.splice(l,1)}),n)))))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Io=m(7446),Se=m(4107);function To(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createProduct())}),e._UZ(2,"mat-icon",72),e.TgZ(3,"span",73),e._uU(4,"Guardar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:save"))}function So(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateProduct())}),e._UZ(2,"mat-icon",72),e.TgZ(3,"span",73),e._uU(4,"Actualizar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:refresh"))}function Mo(i,s){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function Uo(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",23),e._uU(2),e.qZA(),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function qo(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",23),e._uU(2),e.qZA(),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function Qo(i,s){1&i&&e._UZ(0,"mat-icon",34),2&i&&e.Q6J("svgIcon","heroicons_solid:pencil-alt")}function Ro(i,s){1&i&&e._UZ(0,"mat-icon",34),2&i&&e.Q6J("svgIcon","heroicons_solid:check")}function Fo(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",75),e.NdJ("change",function(n){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.toggleProductTag(a,n))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("checked",o.selectedProduct.tags.includes(t._id)),e.xp6(1),e.hij(" ",t.name," ")}}function Jo(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Fo,3,3,"ng-container",74),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function No(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",77)(2,"input",78),e.NdJ("input",function(n){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.updateTagName(a,n))}),e.qZA(),e.TgZ(3,"button",79),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.deleteTag(r))}),e._UZ(4,"mat-icon",34),e.qZA()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(2),e.Q6J("value",t.name),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Do(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",76),e.YNc(2,No,5,2,"ng-container",74),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function Bo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",80),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),r=e.MAs(72);return n.createTag(r.value),e.KtG(r.value="")}),e._UZ(1,"mat-icon",81),e.TgZ(2,"div",82),e._uU(3,'Crear "'),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._uU(6,'"'),e.qZA()()}if(2&i){e.oxw();const t=e.MAs(72);e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Oqu(t.value)}}function zo(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",23),e._uU(2),e.qZA(),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.abbr," ")}}function Eo(i,s){if(1&i&&e._UZ(0,"img",83),2&i){const t=e.oxw();e.Q6J("alt","Product thumbnail image")("src",t.thumbnail,e.LSH)}}function Lo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeFile(n.thumbnail,"thumbnail"))}),e._UZ(1,"mat-icon",85),e.qZA()}}function Oo(i,s){1&i&&(e.TgZ(0,"div",86),e._uU(1," SIN IMAGEN "),e.qZA())}function Yo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",66,67),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectFiles(n,"thumbnail"))}),e.qZA(),e.TgZ(3,"label",68)(4,"div",69),e._UZ(5,"mat-icon",34),e.TgZ(6,"span",70),e._uU(7," Agregar imagen principal "),e.qZA()()()()}2&i&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:plus-circle"))}function Po(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",59)(2,"div",60),e._UZ(3,"img",83),e.TgZ(4,"button",84),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeFile(r,"images"))}),e._UZ(5,"mat-icon",85),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(3),e.Q6J("alt","Product images")("src",t,e.LSH)}}const Ho=function(){return{height:"470px"}};let $o=(()=>{class i{constructor(t,o,n,r,a,l,d,u){this._activatedRoute=t,this._changeDetectorRef=o,this._formBuilder=n,this._fuseConfirmationService=r,this._imagesService=a,this._productsService=l,this._router=d,this.store=u,this.categories=[],this.editMode=!1,this.flashMessage=null,this.images=[],this.isLoading=!1,this.productId=null,this.products$=(0,y.of)([]),this.searchInputControl=new c.p4,this.selectedProduct=ko,this.tagsEditMode=!1,this.uoms=[],this.uoms$=(0,y.of)(null),this.merchants$=(0,y.of)([]),this.user=null,this.user$=(0,y.of)(null),this.descriptionLength=0,this.thumbnail="",this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new I.x}ngOnInit(){this._activatedRoute.params.pipe((0,p.R)(this._unsubscribeAll)).subscribe(({productId:t})=>{this.productId=t,"new"!==this.productId&&(this.editMode=!0,this._productsService.getProductById(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedProduct=o,this.productForm.patchValue(this.selectedProduct),this.productForm.get("category").patchValue(this.selectedProduct.category._id),this.productForm.get("brand").patchValue(this.selectedProduct.brand._id),this.productForm.get("supplier").patchValue(this.selectedProduct.supplier._id),o.thumbnail&&(this.thumbnail=o.thumbnail),this.images=this.selectedProduct.images})),this._changeDetectorRef.markForCheck()}),this.user$=this.store.select(z.rk),this.user$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>this.user=t),this.uoms$=this.store.select($),this.uoms$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.uoms=t,this._changeDetectorRef.markForCheck()}),this.store.select(P).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this.store.select(be.us).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this._productsService.tags$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()}),this.productForm=this._formBuilder.group({_id:[""],user:[this.user._id,[c.kI.required]],category:["",[c.kI.required]],name:["",[c.kI.required,c.kI.maxLength(255)]],description:["",[c.kI.maxLength(1e4)]],specifications:["",[c.kI.maxLength(1e6)]],tags:[[""]],sku:["",[c.kI.maxLength(50)]],barcode:["",[c.kI.maxLength(50)]],brand:["",[c.kI.required]],supplier:["",[c.kI.required]],uom:["",[c.kI.required]],currency:["",[c.kI.required]],stock:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],onSale:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],cost:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],margin:[0,[c.kI.min(0),c.kI.max(1),c.kI.maxLength(9)]],taxPercent:[0,[c.kI.min(0),c.kI.max(1),c.kI.maxLength(9)]],discount:[0,[c.kI.min(0),c.kI.max(1),c.kI.maxLength(9)]],price:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],weight:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],volume:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],size:["",[c.kI.maxLength(9)]],width:[0,[c.kI.min(0),c.kI.maxLength(9)]],length:[0,[c.kI.min(0),c.kI.maxLength(9)]],height:[0,[c.kI.min(0),c.kI.maxLength(9)]],thumbnail:[""],images:[[]],currentImageIndex:[0],merchantId:[null,[c.kI.required]],active:[!0,[c.kI.required]]},{validators:this._checkOnSaleQty("stock","onSale")}),this.productForm.get("thumbnail").valueChanges.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>this.thumbnail=t),this.productForm.get("images").valueChanges.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>this.images=t),this.productForm.get("description").valueChanges.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>this.descriptionLength=t.length),this.productForm.get("width").valueChanges.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{const r=(t*this.productForm.get("height").value*this.productForm.get("length").value).toFixed(2);this.productForm.get("volume").patchValue(r)}),this.productForm.get("length").valueChanges.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{const o=this.productForm.get("height").value,r=(this.productForm.get("width").value*o*t).toFixed(2);this.productForm.get("volume").patchValue(r)}),this.productForm.get("height").valueChanges.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{const o=this.productForm.get("length").value,r=(this.productForm.get("width").value*t*o/1e5).toFixed(2);this.productForm.get("volume").patchValue(r)}),this.merchants$=this.store.select(Le.UV),this.merchants$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{"Super Administrador"!==this.user.role.name&&t.length>0&&this.productForm.get("merchantId").setValue(t[0]._id)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}cycleImages(t=!0){const o=this.productForm.get("images").value.length,n=this.productForm.get("currentImageIndex").value,r=n+1===o?0:n+1,a=n-1<0?o-1:n-1;t?this.productForm.get("currentImageIndex").setValue(r):this.productForm.get("currentImageIndex").setValue(a)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const o=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(n=>n.name.toLowerCase().includes(o))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const o=this.filteredTags[0];this.selectedProduct.tags.find(r=>r===o._id)?this.removeTagFromProduct(o):this.addTagToProduct(o)}createTag(t){this._productsService.createTag({active:!0,user:this.user._id,name:t}).subscribe(n=>{this.addTagToProduct(n)})}updateTagName(t,o){t.name=o.target.value,this._productsService.updateTag(t).pipe((0,H.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._productsService.deleteTag(t._id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(t){const o=(0,N.cloneDeep)(this.selectedProduct);o.tags.unshift(t._id),this.productForm.get("tags").patchValue(o.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){const o=this.productForm.getRawValue();o.tags.splice(o.tags.findIndex(n=>n===t._id),1),this.productForm.get("tags").patchValue(o.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(t,o){o.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(o=>o.name.toLowerCase()===t.toLowerCase())>-1)}createProduct(){let t=this.productForm.getRawValue();t=(0,N.omit)(t,["_id","currentImageIndex"]),t.slug=new Y.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Producto",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._productsService.createProduct(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._router.navigateByUrl("/modules/stock/panels/products"),this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateProduct(){let t=this.productForm.getRawValue();t=(0,N.omit)(t,["currentImageIndex"]),t.slug=new Y.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Producto",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._productsService.updateProduct(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._router.navigateByUrl("/modules/stock/panels/products"),this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}selectFiles(t,o){if(0!==t.target.files.length){this.selectedFiles=t.target.files;for(const n of t.target.files)this._uploadFile(n,o)}}removeFile(t,o){void 0!==t&&this._imagesService.removeImage(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{if("thumbnail"===o&&this.productForm.get("thumbnail").reset(),"images"===o){const n=[...this.productForm.get("images").value],r=n.findIndex(a=>a===t);n.splice(r,1),this.productForm.get("images").setValue(n)}this._productsService.updateProduct(this.productForm.getRawValue()).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Imagen eliminada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}_uploadFile(t,o){this._imagesService.uploadImage("products",t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{if("thumbnail"===o&&this.productForm.get("thumbnail").setValue(n.imageUrl),"images"===o){const r=[...this.productForm.get("images").value,n.imageUrl];this.productForm.get("images").setValue(r)}this.editMode&&this._productsService.updateProduct(this.productForm.getRawValue()).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Imagen guardada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}_checkOnSaleQty(t,o){return n=>{const r=n.get(t),a=n.get(o);if(!r||!a||(a.hasError("invalid")&&(delete a.errors.invalid,a.updateValueAndValidity()),r.value<=a.value))return null;const l={invalid:"La cantidad en venta no debe ser mayor a la disponible"};return a.setErrors(l),l}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.gz),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(ze.C),e.Y36(ke),e.Y36(C.F0),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-product-detail"]],decls:226,vars:57,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"z-20","flex","flex-col","p-6","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],["routerLink","/modules/stock/panels/products",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[4,"ngIf"],["cdkScrollable","",1,"flex","flex-auto","overflow-y-auto"],[1,"flex","flex-col","w-full","divide-y","divide-dashed",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","p-10"],[1,"flex","flex-col"],[1,"text-xl","font-semibold"],[1,"flex","flex-col","gap-5","p-6","mt-5","border","shadow-md","sm:flex-row","bg-card","rounded-2xl"],[1,"flex","flex-col","w-full"],[1,"w-full"],[3,"formControlName","placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","matTextareaAutosize","","maxlength","10000","rows","19",3,"formControlName"],[1,"text-right"],["matInput","","type","text","maxlength","250","required","",3,"formControlName"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","rounded-md","border","border-gray-300","dark:border-gray-500","shadow-sm","overflow-hidden"],[1,"flex","items-center","px-3","py-2","-my-px"],[1,"flex","items-center","flex-auto","min-w-0"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Buscar",1,"min-w-0","py-1","ml-2","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"w-8","h-8","ml-3","min-h-8",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"overflow-y-auto","leading-none","border-t","border-gray-300","h-44","dark:border-gray-500"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer border-t hover:bg-gray-50 dark:hover:bg-hover","matRipple","",3,"click",4,"ngIf"],[1,"w-full","p-6","mt-5","border","shadow-md","bg-card","rounded-2xl"],[1,"h-full",3,"formControlName","styles","modules"],[1,"grid","grid-cols-1","p-10","md:grid-cols-2"],[1,"flex","flex-col","w-full","p-6","border","shadow-md","bg-card","rounded-2xl"],["value","USD"],["value","CUP"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName"],["matInput","","type","number","step","0.01","min","0","max","1","maxlength","9","required","",3,"formControlName"],["type","number","matInput","","step","0.01","min","0","max","1","maxlength","9","required","",3,"formControlName"],["matInput","","type","number","min","0","max","999999999","maxlength","50",3,"formControlName"],["matInput","","type","text","maxlength","50",3,"formControlName"],["matInput","","type","text","maxlength","24",3,"formControlName"],["matSuffix",""],["matInput","","type","number","step","0.01","maxlength","9",3,"formControlName"],["matInput","","type","number","min","0","max","999999999","maxlength","9",3,"formControlName"],[1,"flex","flex-col","w-full","p-6","border","divide-y","shadow-md","bg-card","rounded-2xl","gap-y-6"],[1,"font-medium"],[1,"flex","items-center","mt-3"],[1,"relative","flex","items-center","justify-center","mr-6","overflow-hidden","border","rounded","w-26","h-26","flex-0"],[3,"alt","src",4,"ngIf"],["mat-mini-fab","","class","absolute p-5 transition-opacity ease-linear delay-200 rounded-full opacity-50 bg-primary-700 hover:opacity-100",3,"click",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"flex","flex-col","pt-6"],[1,"flex","flex-row","flex-wrap"],["id","image-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["imageFileInput",""],["for","image-file-input","matRipple",""],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","h-10","px-4","min-h-10",3,"color","checked","change"],[1,"p-4","space-y-2"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","border-t","hover:bg-gray-50","dark:hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[3,"alt","src"],["mat-mini-fab","",1,"absolute","p-5","transition-opacity","ease-linear","delay-200","rounded-full","opacity-50","bg-primary-700","hover:opacity-100",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white","icon-size-5"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Producto"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Productos"),e.qZA()(),e.TgZ(16,"div",5),e._UZ(17,"mat-icon",6),e.TgZ(18,"a",9),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",10)(21,"h2",11),e._uU(22),e.qZA()()(),e.TgZ(23,"div",12),e.YNc(24,To,5,1,"ng-container",13),e.YNc(25,So,5,1,"ng-container",13),e.qZA()(),e.TgZ(26,"div",14)(27,"form",15)(28,"div",16)(29,"div",17)(30,"span",18),e._uU(31,"Descripci\xf3n"),e.qZA(),e.TgZ(32,"span"),e._uU(33,"Ingrese la informaci\xf3n necesaria para describir e identificar el producto"),e.qZA()(),e.TgZ(34,"div",19)(35,"div",20)(36,"mat-form-field",21)(37,"mat-label"),e._uU(38,"Asignar negocio"),e.qZA(),e.TgZ(39,"mat-select",22)(40,"mat-option",23),e._uU(41,"Seleccione el negocio"),e.qZA(),e.YNc(42,Mo,2,2,"mat-option",24),e.ALo(43,"async"),e.qZA()(),e.TgZ(44,"mat-form-field",21)(45,"mat-label"),e._uU(46,"Descripci\xf3n"),e.qZA(),e._UZ(47,"textarea",25),e.TgZ(48,"mat-hint",26),e._uU(49),e.qZA()()(),e.TgZ(50,"div",20)(51,"mat-form-field",21)(52,"mat-label"),e._uU(53,"Nombre"),e.qZA(),e._UZ(54,"input",27),e.qZA(),e.TgZ(55,"mat-form-field",21)(56,"mat-label"),e._uU(57,"Categor\xeda"),e.qZA(),e.TgZ(58,"mat-select",28),e.YNc(59,Uo,3,2,"ng-container",29),e.qZA()(),e.TgZ(60,"mat-form-field",21)(61,"mat-label"),e._uU(62,"Marca"),e.qZA(),e.TgZ(63,"mat-select",28),e.YNc(64,qo,3,2,"ng-container",29),e.qZA()(),e.TgZ(65,"span",30),e._uU(66,"Etiquetas"),e.qZA(),e.TgZ(67,"div",31)(68,"div",32)(69,"div",33),e._UZ(70,"mat-icon",34),e.TgZ(71,"input",35,36),e.NdJ("input",function(r){return o.filterTags(r)})("keydown",function(r){return o.filterTagsInputKeyDown(r)}),e.qZA()(),e.TgZ(73,"button",37),e.NdJ("click",function(){return o.toggleTagsEditMode()}),e.YNc(74,Qo,1,1,"mat-icon",38),e.YNc(75,Ro,1,1,"mat-icon",38),e.qZA()(),e.TgZ(76,"div",39),e.YNc(77,Jo,2,2,"ng-container",13),e.YNc(78,Do,3,2,"ng-container",13),e.YNc(79,Bo,7,2,"div",40),e.qZA()()()()(),e.TgZ(80,"div",16)(81,"div",17)(82,"span",18),e._uU(83,"Especificaciones"),e.qZA(),e.TgZ(84,"span"),e._uU(85," Ingrese la informaci\xf3n detallada que le permita conocer al cliente las bondades el producto o sus m\xe9todos de empleo. "),e.qZA()(),e.TgZ(86,"div",41),e._UZ(87,"quill-editor",42),e.qZA()(),e.TgZ(88,"div",43)(89,"div",17)(90,"span",18),e._uU(91,"Valores"),e.qZA(),e.TgZ(92,"span"),e._uU(93,"Ingrese los precios, costes e impuestos del producto"),e.qZA()(),e.TgZ(94,"div",44)(95,"mat-form-field",21)(96,"mat-label"),e._uU(97,"Moneda"),e.qZA(),e.TgZ(98,"mat-select",28)(99,"mat-option",45),e._uU(100,"USD"),e.qZA(),e.TgZ(101,"mat-option",46),e._uU(102,"CUP"),e.qZA()()(),e.TgZ(103,"mat-form-field",21)(104,"mat-label"),e._uU(105,"Costo"),e.qZA(),e.TgZ(106,"span",47),e._uU(107,"$"),e.qZA(),e._UZ(108,"input",48),e.qZA(),e.TgZ(109,"mat-form-field",21)(110,"mat-label"),e._uU(111,"Margen comercial"),e.qZA(),e.TgZ(112,"span",47),e._uU(113,"%"),e.qZA(),e._UZ(114,"input",49),e.TgZ(115,"mat-hint"),e._uU(116,"El valor de este campo de estar entre 0 y 1"),e.qZA()(),e.TgZ(117,"mat-form-field",21)(118,"mat-label"),e._uU(119,"Impuesto"),e.qZA(),e.TgZ(120,"span",47),e._uU(121,"%"),e.qZA(),e._UZ(122,"input",50),e.TgZ(123,"mat-hint"),e._uU(124,"El valor de este campo de estar entre 0 y 1"),e.qZA()(),e.TgZ(125,"mat-form-field",21)(126,"mat-label"),e._uU(127,"Descuento"),e.qZA(),e.TgZ(128,"span",47),e._uU(129,"%"),e.qZA(),e._UZ(130,"input",50),e.TgZ(131,"mat-hint"),e._uU(132,"El valor de este campo de estar entre 0 y 1"),e.qZA()(),e.TgZ(133,"mat-form-field",21)(134,"mat-label"),e._uU(135,"Precio"),e.qZA(),e.TgZ(136,"span",47),e._uU(137,"$"),e.qZA(),e._UZ(138,"input",48),e.qZA()()(),e.TgZ(139,"div",43)(140,"div",17)(141,"span",18),e._uU(142,"Informaci\xf3n log\xedstica"),e.qZA(),e.TgZ(143,"span"),e._uU(144,"Ingrese los relacionados con la tipolog\xeda del producto"),e.qZA()(),e.TgZ(145,"div",44)(146,"mat-form-field",21)(147,"mat-label"),e._uU(148,"Unidad de Medida"),e.qZA(),e.TgZ(149,"mat-select",28),e.YNc(150,zo,3,2,"ng-container",29),e.qZA()(),e.TgZ(151,"mat-form-field",21)(152,"mat-label"),e._uU(153,"Cantidad"),e.qZA(),e._UZ(154,"input",51),e.qZA(),e.TgZ(155,"mat-form-field",21)(156,"mat-label"),e._uU(157,"En Venta"),e.qZA(),e._UZ(158,"input",51),e.qZA(),e.TgZ(159,"mat-form-field",21)(160,"mat-label"),e._uU(161,"SKU"),e.qZA(),e._UZ(162,"input",52),e.qZA(),e.TgZ(163,"mat-form-field",21)(164,"mat-label"),e._uU(165,"C\xf3digo de Barra"),e.qZA(),e._UZ(166,"input",53),e.qZA(),e.TgZ(167,"mat-form-field",21)(168,"mat-label"),e._uU(169,"Peso"),e.qZA(),e.TgZ(170,"span",54),e._uU(171,"kg"),e.qZA(),e._UZ(172,"input",48),e.qZA(),e.TgZ(173,"mat-form-field",21)(174,"mat-label"),e._uU(175,"Largo"),e.qZA(),e.TgZ(176,"span",54),e._uU(177,"cm"),e.qZA(),e._UZ(178,"input",55),e.qZA(),e.TgZ(179,"mat-form-field",21)(180,"mat-label"),e._uU(181,"Ancho"),e.qZA(),e.TgZ(182,"span",54),e._uU(183,"cm"),e.qZA(),e._UZ(184,"input",55),e.qZA(),e.TgZ(185,"mat-form-field",21)(186,"mat-label"),e._uU(187,"Altura"),e.qZA(),e.TgZ(188,"span",54),e._uU(189,"cm"),e.qZA(),e._UZ(190,"input",55),e.qZA(),e.TgZ(191,"mat-form-field",21)(192,"mat-label"),e._uU(193,"Volumen"),e.qZA(),e.TgZ(194,"span",54),e._uU(195,"m3"),e.qZA(),e._UZ(196,"input",56),e.qZA()()(),e.TgZ(197,"div",43)(198,"div",17)(199,"span",18),e._uU(200,"Im\xe1genes"),e.qZA(),e.TgZ(201,"span"),e._uU(202,"Inserte las im\xe1genes que del producto"),e.qZA()(),e.TgZ(203,"div",57)(204,"div",17)(205,"span",58),e._uU(206,"Imagen Principal"),e.qZA(),e.TgZ(207,"div",59)(208,"div",60),e.YNc(209,Eo,1,2,"img",61),e.YNc(210,Lo,2,0,"button",62),e.YNc(211,Oo,2,0,"div",63),e.qZA()(),e.YNc(212,Yo,8,3,"div",13),e.qZA(),e.TgZ(213,"div",64)(214,"span",58),e._uU(215,"Im\xe1genes de Apoyo"),e.qZA(),e.TgZ(216,"div",65),e.YNc(217,Po,6,2,"ng-container",29),e.qZA(),e.TgZ(218,"div")(219,"input",66,67),e.NdJ("change",function(r){return o.selectFiles(r,"images")}),e.qZA(),e.TgZ(221,"label",68)(222,"div",69),e._UZ(223,"mat-icon",34),e.TgZ(224,"span",70),e._uU(225," Agregar im\xe1genes "),e.qZA()()()()()()()()()()),2&t){const n=e.MAs(72);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Oqu("new"===o.productId?"Nuevo":o.selectedProduct.name),e.xp6(3),e.hij(" ","new"===o.productId?"Nuevo":o.selectedProduct.name," "),e.xp6(2),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("formGroup",o.productForm)("autocomplete","off"),e.xp6(12),e.Q6J("formControlName","merchantId")("placeholder","Seleccione el negocio"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(43,54,o.merchants$)),e.xp6(5),e.Q6J("formControlName","description"),e.xp6(2),e.hij("Total de caracteres ",o.descriptionLength," / 10000"),e.xp6(5),e.Q6J("formControlName","name"),e.xp6(4),e.Q6J("formControlName","category"),e.xp6(1),e.Q6J("ngForOf",o.categories),e.xp6(4),e.Q6J("formControlName","brand"),e.xp6(1),e.Q6J("ngForOf",o.brands),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("maxLength",50),e.xp6(3),e.Q6J("ngIf",!o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.tagsEditMode),e.xp6(2),e.Q6J("ngIf",!o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.shouldShowCreateTagButton(n.value)),e.xp6(8),e.Q6J("formControlName","specifications")("styles",e.DdM(56,Ho))("modules",o.quillModules),e.xp6(11),e.Q6J("formControlName","currency"),e.xp6(10),e.Q6J("formControlName","cost"),e.xp6(6),e.Q6J("formControlName","margin"),e.xp6(8),e.Q6J("formControlName","taxPercent"),e.xp6(8),e.Q6J("formControlName","discount"),e.xp6(8),e.Q6J("formControlName","price"),e.xp6(11),e.Q6J("formControlName","uom"),e.xp6(1),e.Q6J("ngForOf",o.uoms),e.xp6(4),e.Q6J("formControlName","stock"),e.xp6(4),e.Q6J("formControlName","onSale"),e.xp6(4),e.Q6J("formControlName","sku"),e.xp6(4),e.Q6J("formControlName","barcode"),e.xp6(6),e.Q6J("formControlName","weight"),e.xp6(6),e.Q6J("formControlName","length"),e.xp6(6),e.Q6J("formControlName","width"),e.xp6(6),e.Q6J("formControlName","height"),e.xp6(6),e.Q6J("formControlName","volume"),e.xp6(13),e.Q6J("ngIf",o.thumbnail),e.xp6(1),e.Q6J("ngIf",o.thumbnail),e.xp6(1),e.Q6J("ngIf",!o.thumbnail),e.xp6(1),e.Q6J("ngIf",!o.thumbnail),e.xp6(5),e.Q6J("ngForOf",o.images),e.xp6(2),e.Q6J("multiple",!0)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:plus-circle")}},dependencies:[C.yS,h.sg,h.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.nD,c.qQ,c.Fd,c.sg,c.u,Ee.PQ,ee.ey,U.lW,Io.oG,F.Hw,f.KE,f.bx,f.hX,f.qo,f.R9,R.Nt,ee.wG,Se.gD,Ne.g6,h.Ov],encapsulation:2}),i})(),Wo=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-products"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[C.lC],encapsulation:2}),i})();function Go(i,s){if(1&i&&e._UZ(0,"img",50),2&i){const t=e.oxw().$implicit;e.Q6J("alt","Product thumbnail image")("src",t.thumbnail,e.LSH)}}function jo(i,s){1&i&&(e.TgZ(0,"div",51),e._uU(1," SIN IMAGEN "),e.qZA())}function Ko(i,s){1&i&&(e.TgZ(0,"div",52),e._UZ(1,"div",53),e.qZA())}function Vo(i,s){1&i&&(e.TgZ(0,"div",54),e._UZ(1,"div",55),e.qZA())}function Xo(i,s){1&i&&(e.TgZ(0,"div",56),e._UZ(1,"div",57),e.qZA())}function ei(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",58),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function ti(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",59),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function oi(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"div",33)(3,"div",34),e.YNc(4,Go,1,2,"img",35),e.YNc(5,jo,2,0,"div",36),e.qZA()(),e.TgZ(6,"div",37),e._uU(7),e.qZA(),e.TgZ(8,"div",38),e._uU(9),e.qZA(),e.TgZ(10,"div",39),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",40)(14,"div",41),e._uU(15),e.qZA(),e.YNc(16,Ko,2,0,"div",42),e.YNc(17,Vo,2,0,"div",43),e.YNc(18,Xo,2,0,"div",44),e.qZA(),e.TgZ(19,"div",45),e._uU(20),e.qZA(),e.TgZ(21,"div",45),e.YNc(22,ei,2,1,"ng-container",20),e.YNc(23,ti,2,1,"ng-container",20),e.qZA(),e.TgZ(24,"div",46)(25,"button",47),e._UZ(26,"mat-icon",48),e.qZA(),e.TgZ(27,"button",49),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(4);return e.KtG(a.deleteProduct(r._id))}),e._UZ(28,"mat-icon",48),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(4),e.Q6J("ngIf",t.thumbnail),e.xp6(1),e.Q6J("ngIf",!t.thumbnail),e.xp6(2),e.hij(" ",t.sku," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",e.gM2(12,15,t.price,"$ ","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stock),e.xp6(1),e.Q6J("ngIf",t.stock<20),e.xp6(1),e.Q6J("ngIf",t.stock>=20&&t.stock<30),e.xp6(1),e.Q6J("ngIf",t.stock>=30),e.xp6(2),e.hij(" ",t.salesQty," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink","/modules/stock/panels/product/"+t._id),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function ii(i,s){if(1&i&&(e.ynx(0),e.YNc(1,oi,29,20,"ng-container",31),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const ni=function(i){return{"pointer-events-none":i}},ri=function(){return[5,10,25,100]};function ai(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e._UZ(3,"div"),e.TgZ(4,"div",25),e._uU(5," SKU "),e.qZA(),e.TgZ(6,"div",26),e._uU(7," Nombre "),e.qZA(),e.TgZ(8,"div",27),e._uU(9," Precio "),e.qZA(),e.TgZ(10,"div",28),e._uU(11," Stock "),e.qZA(),e.TgZ(12,"div",28),e._uU(13," Unidades Vendidas "),e.qZA(),e.TgZ(14,"div",28),e._uU(15," Activo "),e.qZA(),e.TgZ(16,"div",29),e._uU(17,"Detalles"),e.qZA()(),e.YNc(18,ii,2,2,"ng-container",20),e.ALo(19,"async"),e.qZA(),e._UZ(20,"mat-paginator",30),e.BQk()),2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","price"),e.xp6(2),e.Q6J("mat-sort-header","stock"),e.xp6(2),e.Q6J("mat-sort-header","salesQty"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(19,12,t.products$)),e.xp6(2),e.Q6J("ngClass",e.VKq(14,ni,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(16,ri))("showFirstLastButtons",!0)}}function si(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ai,21,17,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function ci(i,s){1&i&&(e.TgZ(0,"div",60),e._uU(1,"\xa1No se ha creado ning\xfan producto!"),e.qZA())}let li=(()=>{class i{constructor(t,o,n,r,a){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=n,this._productsService=r,this.store=a,this.flashMessage=null,this.isLoading=!1,this.products$=(0,y.of)([]),this.searchInputControl=new c.p4,this.selectedProduct=null,this.tagsEditMode=!1,this.user$=(0,y.of)(null),this.uoms$=(0,y.of)(null),this.user=null,this._unsubscribeAll=new I.x}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.uoms$=this.store.select($),this.store.select(P).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this.store.select(be.us).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this.store.select(xe.B).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.products$=this.store.select(ie),this._productsService.tags$.pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,p.R)(this._unsubscribeAll),(0,H.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._productsService.getProducts(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,fe.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._productsService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteProduct(t){this._fuseConfirmationService.open({title:"Eliminar Producto",message:"\xbfEsta seguro que desea eliminar el producto?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._productsService.deleteProduct(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(M.R),e.Y36(c.QS),e.Y36(ke),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-products-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLink","/modules/stock/panels/product/new",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noProducts",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","inventory-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"items-center","justify-center","hidden","md:flex"],[1,"flex","items-center","justify-start",3,"mat-sort-header"],[1,"items-center","justify-center","hidden","sm:flex",3,"mat-sort-header"],[1,"items-center","justify-center","hidden","lg:flex",3,"mat-sort-header"],[1,"items-center","justify-center","hidden","sm:flex"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","inventory-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","text-right","sm:block"],[1,"items-center","justify-center","hidden","lg:flex"],[1,"min-w-4"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-red-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-orange-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-green-100 rounded",4,"ngIf"],[1,"hidden","text-center","lg:block"],[1,"flex","flex-row","flex-wrap","justify-center","gap-3"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-red-200","rounded"],[1,"flex","w-full","bg-red-600","h-1/3"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-orange-200","rounded"],[1,"flex","w-full","bg-orange-400","h-2/4"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-green-100","rounded"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Producto"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Productos"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Productos "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,si,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,ci,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar productos"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.products$)))},dependencies:[C.rH,C.yS,h.mk,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov,h.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 200px 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:5% 15% auto 5% 10% 5% 5% 10%}}\n"],encapsulation:2,data:{animation:ve.L},changeDetection:0}),i})();var ne=m(1411);const re=ge.N.API_URL;let Me=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}getUoms(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${re}/uoms/`,{params:l}).pipe((0,T.b)(({pagination:d,uoms:u})=>{this.store.dispatch((0,ue.Jr)({pagination:d})),this.store.dispatch((0,ne.u8)({uoms:u}))}))}getUomById(t){return this._httpClient.get(`${re}/uoms/${t}`).pipe((0,pe.j)("uom"),(0,T.b)(o=>{this.store.dispatch((0,ne.sh)({uom:o}))}))}createUom(t){return this.store.select($).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${re}/uoms/`,t).pipe((0,T.b)(n=>{this.store.dispatch((0,ne.u8)({uoms:[n.uom,...o]}))}))))}updateUom(t){return this.store.select($).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${re}/uoms/${t._id}`,t).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t._id);return o[r]=n.uom,this.store.dispatch((0,ne.u8)({uoms:o})),n}))))}deleteUom(t){return this.store.select($).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${re}/uoms/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this.store.dispatch((0,ne.u8)({uoms:o})),n}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function di(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Unidad de Medida "),e.qZA())}function mi(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Unidad de Medida "),e.qZA())}function pi(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(t.data.uom.name||"Sin nombre")}}function ui(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Sigla"),e.qZA(),e._UZ(12,"input",20),e.qZA()(),e.TgZ(13,"div",18)(14,"mat-form-field",19)(15,"mat-label"),e._uU(16,"Tipo"),e.qZA(),e.TgZ(17,"mat-select",21)(18,"mat-option",22),e._uU(19,"\xc1rea"),e.qZA(),e.TgZ(20,"mat-option",22),e._uU(21,"Conteo"),e.qZA(),e.TgZ(22,"mat-option",22),e._uU(23,"Energ\xeda"),e.qZA(),e.TgZ(24,"mat-option",22),e._uU(25,"Longitud"),e.qZA(),e.TgZ(26,"mat-option",22),e._uU(27,"Peso"),e.qZA(),e.TgZ(28,"mat-option",22),e._uU(29,"Volumen"),e.qZA()()()(),e.TgZ(30,"div",23)(31,"span",24),e._uU(32,"Estado"),e.qZA(),e.TgZ(33,"mat-slide-toggle",25),e._uU(34),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.uomForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Unidad de Medida"),e.xp6(5),e.Q6J("formControlName","abbr")("placeholder","Siglas"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","area"),e.xp6(2),e.Q6J("value","conteo"),e.xp6(2),e.Q6J("value","energ\xeda"),e.xp6(2),e.Q6J("value","longitud"),e.xp6(2),e.Q6J("value","peso"),e.xp6(2),e.Q6J("value","volumen"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.uomForm.get("active").value?"Activo":"Inactivo"," ")}}function gi(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateUom())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function hi(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createUom())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function _i(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",26),e.ynx(2),e.TgZ(3,"button",27),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,gi,3,3,"ng-container",6),e.YNc(6,hi,3,3,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let fi=(()=>{class i{constructor(t,o,n,r,a,l,d){this.data=t,this._changeDetectorRef=o,this._formBuilder=n,this._fuseConfirmationService=r,this._dialogRef=a,this._uomService=l,this.store=d,this.dialogMode="view",this.user$=(0,y.of)(null),this.user=null,this._unsubscribeAll=new I.x,this.dialogMode=t.dialogMode,this.uom=t.uom}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.uomForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],abbr:[null,[c.kI.required,c.kI.maxLength(250)]],type:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let t=this.uomForm.getRawValue();t.slug=new Y.i(t.name).slug,t=(0,me.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.createUom(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateUom(){const t=this.uomForm.getRawValue();t.slug=new Y.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.updateUom(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(Z.so),e.Y36(Me),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-uom-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,di,2,0,"h2",2),e.YNc(4,mi,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,pi,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,ui,35,16,"div",5),e.BQk(),e.qZA(),e.YNc(10,_i,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,ee.ey,U.lW,Z.ZT,f.KE,f.hX,R.Nt,Se.gD,_e.Rr],encapsulation:2}),i})();const xi={_id:null,active:null,userId:null,name:null,slug:null,abbr:null,type:null};function vi(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",37),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function bi(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ci(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e._uU(6),e.qZA()(),e.TgZ(7,"div",32)(8,"div",33),e._uU(9),e.qZA()(),e.TgZ(10,"div",34),e.YNc(11,vi,2,1,"ng-container",20),e.YNc(12,bi,2,1,"ng-container",20),e.qZA(),e.TgZ(13,"div")(14,"button",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(4);return e.KtG(a.updateUom(r))}),e._UZ(15,"mat-icon",36),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.abbr),e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil")}}function yi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ci,16,6,"ng-container",29),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const ki=function(){return[5,10,25,100]};function Zi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"div",26),e._uU(6," Siglas "),e.qZA(),e.TgZ(7,"div",27),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",27),e._uU(10," Activo "),e.qZA(),e.TgZ(11,"div",26),e._uU(12,"Detalles"),e.qZA()(),e.YNc(13,yi,2,2,"ng-container",20),e.ALo(14,"async"),e.qZA(),e._UZ(15,"mat-paginator",28),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","value"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,9,t.uoms$)),e.xp6(2),e.Q6J("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,ki))("showFirstLastButtons",!0)}}function wi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Zi,16,12,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Ai(i,s){1&i&&(e.TgZ(0,"div",39),e._uU(1,"\xa1No se ha creado ninguna unidad de medida!"),e.qZA())}let Ii=(()=>{class i{constructor(t,o,n,r,a){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._uomService=r,this.store=a,this.flashMessage=null,this.uoms$=(0,y.of)([]),this.searchInputControl=new c.p4,this.isLoading=!1,this._unsubscribeAll=new I.x}ngOnInit(){this.uoms$=this.store.select($),this.store.select(xe.B).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,p.R)(this._unsubscribeAll),(0,H.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._uomService.getUoms(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,fe.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(xi,"add")}updateUom(t){this._openDialog(t,"edit")}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(fi,{data:{uom:t,dialogMode:o},panelClass:"ath-dialog-panel"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(Me),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-uom"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noUoms",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Producto"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Unidades de Medida"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Unidades de Medida "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return o.createUom()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,wi,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,Ai,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.uoms$)))},dependencies:[C.yS,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov],styles:[".uom-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.uom-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.uom-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.uom-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:ve.L},changeDetection:0}),i})(),Ue=(()=>{class i{constructor(t){this._brandsService=t}resolve(t,o){return this._brandsService.getBrands()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(he))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),je=(()=>{class i{constructor(t){this._categoriesService=t}resolve(t,o){return this._categoriesService.getCategories()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ye.G))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ke=(()=>{class i{constructor(t){this._productsService=t}resolve(t,o){return this._productsService.getProducts()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ke))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ti=(()=>{class i{constructor(t){this._productsService=t}resolve(t,o){return this._productsService.getTags()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ke))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ve=(()=>{class i{constructor(t){this._uomService=t}resolve(t,o){return this._uomService.getUoms()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Me))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Xe=i=>i.suppliers,Ze=((0,v.P1)(Xe,i=>i.supplier),(0,v.P1)(Xe,i=>i.suppliers));var ae=m(3024);const se=ge.N.API_URL;let qe=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}getSuppliers(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${se}/suppliers/`,{params:l}).pipe((0,T.b)(({pagination:d,suppliers:u})=>{this.store.dispatch((0,ue.Jr)({pagination:d})),this.store.dispatch((0,ae.bz)({suppliers:u}))}))}getSupplierById(t){return this._httpClient.get(`${se}/suppliers/${t}`).pipe((0,pe.j)("supplier"),(0,T.b)(o=>{this.store.dispatch((0,ae.n2)({supplier:o}))}))}createSupplier(t){return this.store.select(Ze).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${se}/suppliers/`,t).pipe((0,T.b)(n=>{this.store.dispatch((0,ae.bz)({suppliers:[n.supplier,...o]}))}))))}updateSupplier(t){return this.store.select(Ze).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${se}/suppliers/${t._id}`,t).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t._id);return o[r]=n.supplier,this.store.dispatch((0,ae.bz)({suppliers:o})),n}))))}deleteSupplier(t){return this.store.select(Ze).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${se}/suppliers/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this.store.dispatch((0,ae.bz)({suppliers:o})),n}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Si(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Proveedor "),e.qZA())}function Mi(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Proveedor "),e.qZA())}function Ui(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(t.data.supplier.name||"Sin nombre")}}function qi(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Categor\xeda"),e.qZA(),e.TgZ(12,"mat-select",21)(13,"mat-option",22),e._uU(14,"Farmac\xe9utico"),e.qZA(),e.TgZ(15,"mat-option",22),e._uU(16,"Material Sanitario"),e.qZA(),e.TgZ(17,"mat-option",22),e._uU(18,"Insumos M\xe9dicos"),e.qZA(),e.TgZ(19,"mat-option",22),e._uU(20,"Equipos M\xe9dicos"),e.qZA()()()(),e.TgZ(21,"div",18)(22,"mat-form-field",19)(23,"mat-label"),e._uU(24,"Tipo"),e.qZA(),e.TgZ(25,"mat-select",21)(26,"mat-option",22),e._uU(27,"Empresa"),e.qZA(),e.TgZ(28,"mat-option",22),e._uU(29,"Individual"),e.qZA()()()(),e.TgZ(30,"div",18)(31,"mat-form-field",19)(32,"mat-label"),e._uU(33,"Direcci\xf3n"),e.qZA(),e._UZ(34,"textarea",23),e.qZA()(),e.TgZ(35,"div",18)(36,"mat-form-field",19)(37,"mat-label"),e._uU(38,"Sitio web"),e.qZA(),e._UZ(39,"input",24),e.qZA()(),e.TgZ(40,"div",25)(41,"span",26),e._uU(42,"Estado"),e.qZA(),e.TgZ(43,"mat-slide-toggle",27),e._uU(44),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.supplierForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del proveedor"),e.xp6(5),e.Q6J("formControlName","category"),e.xp6(1),e.Q6J("value","farmac\xe9utico"),e.xp6(2),e.Q6J("value","material sanitario"),e.xp6(2),e.Q6J("value","insumos m\xe9dicos"),e.xp6(2),e.Q6J("value","equipos m\xe9dicos"),e.xp6(6),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","empresa"),e.xp6(2),e.Q6J("value","individual"),e.xp6(6),e.Q6J("matAutosizeMinRows",1)("formControlName","address"),e.xp6(5),e.Q6J("formControlName","website")("placeholder","https://....."),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.supplierForm.get("active").value?"Activo":"Inactivo"," ")}}function Qi(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateSupplier())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.supplierForm.invalid)("matDialogClose","confirmed")}}function Ri(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createSupplier())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.supplierForm.invalid)("matDialogClose","confirmed")}}function Fi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",28),e.ynx(2),e.TgZ(3,"button",29),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Qi,3,3,"ng-container",6),e.YNc(6,Ri,3,3,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ji=(()=>{class i{constructor(t,o,n,r,a,l,d){this.data=t,this._changeDetectorRef=o,this._dialogRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._suppliersService=l,this.store=d,this.dialogMode="view",this.user$=(0,y.of)(null),this.user=null,this._unsubscribeAll=new I.x,this.dialogMode=t.dialogMode,this.supplier=t.supplier}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.supplierForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],category:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],type:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],address:[null,[c.kI.minLength(3),c.kI.maxLength(250)]],website:[null,[c.kI.minLength(3),c.kI.maxLength(250),c.kI.pattern("/^(?:(?:(?:https?|ftp):)?//)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\xa1-\uffff0-9]-*)*[a-z\xa1-\uffff0-9]+)(?:.(?:[a-z\xa1-\uffff0-9]-*)*[a-z\xa1-\uffff0-9]+)*(?:.(?:[a-z\xa1-\uffff]{2,})))(?::d{2,5})?(?:[/?#]S*)?$/i")]]}),"edit"===this.dialogMode&&this.supplierForm.patchValue(this.supplier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createSupplier(){let t=this.supplierForm.getRawValue();t=(0,me.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Proveedor",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._suppliersService.createSupplier(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateSupplier(){const t=this.supplierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Proveedor",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._suppliersService.updateSupplier(t).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(e.sBO),e.Y36(Z.so),e.Y36(c.QS),e.Y36(M.R),e.Y36(qe),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-supplier-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],["matInput","","matTextareaAutosize","","maxlength","250",3,"matAutosizeMinRows","formControlName"],["matInput","","type","text","maxlength","250",3,"formControlName","placeholder"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Si,2,0,"h2",2),e.YNc(4,Mi,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Ui,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,qi,45,19,"div",5),e.BQk(),e.qZA(),e.YNc(10,Fi,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,ee.ey,U.lW,Z.ZT,f.KE,f.hX,R.Nt,Se.gD,_e.Rr],encapsulation:2}),i})();const Ni={_id:null,user:null,active:null,name:null,category:null,type:null};function Di(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Bi(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",39),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function zi(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",31)(2,"div",32),e._uU(3),e.qZA(),e.TgZ(4,"div",33)(5,"div",34),e._uU(6),e.qZA()(),e.TgZ(7,"div",35),e.YNc(8,Di,2,1,"ng-container",20),e.YNc(9,Bi,2,1,"ng-container",20),e.qZA(),e.TgZ(10,"div")(11,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(4);return e.KtG(a.updateSupplier(r))}),e._UZ(12,"mat-icon",37),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil")}}function Ei(i,s){if(1&i&&(e.ynx(0),e.YNc(1,zi,13,5,"ng-container",30),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const Li=function(i){return{"pointer-events-none":i}},Oi=function(){return[5,10,25,100]};function Yi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"div",26),e._uU(6," Descripci\xf3n "),e.qZA(),e.TgZ(7,"div",27),e._uU(8," Activo "),e.qZA(),e.TgZ(9,"div",28),e._uU(10,"Detalles"),e.qZA()(),e.YNc(11,Ei,2,2,"ng-container",20),e.ALo(12,"async"),e.qZA(),e._UZ(13,"mat-paginator",29),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(12,9,t.suppliers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Li,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,Oi))("showFirstLastButtons",!0)}}function Pi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Yi,14,14,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Hi(i,s){1&i&&(e.TgZ(0,"div",40),e._uU(1,"\xa1No se ha creado ning\xfan proveedor!"),e.qZA())}const $i=[{path:"",pathMatch:"full",redirectTo:"panels"},{path:"panels",component:bo,children:[{path:"",component:yo},{path:"products",component:Wo,children:[{path:"",component:li,resolve:{products:Ke}}]},{path:"product/:productId",component:$o,resolve:{brands:Ue,categories:je,products:Ke,tags:Ti,uoms:Ve}},{path:"brands",component:Kt,resolve:{brands:Ue}},{path:"brand/:brandId",component:Mt,resolve:{brands:Ue}},{path:"categories",component:vo,resolve:{categories:je}},{path:"suppliers",component:(()=>{class i{constructor(t,o,n,r,a){this._suppliersService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=r,this.store=a,this.flashMessage=null,this.suppliers$=(0,y.of)([]),this.merchantInputControl=new c.p4,this.isLoading=!1,this.searchInputControl=new c.p4,this._unsubscribeAll=new I.x}ngOnInit(){this.suppliers$=this.store.select(Ze),this.store.select(xe.B).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,p.R)(this._unsubscribeAll),(0,H.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._suppliersService.getSuppliers(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,fe.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._suppliersService.getSuppliers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createSupplier(){this._openDialog(Ni,"add")}updateSupplier(t){this._openDialog(t,"edit")}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(Ji,{data:{supplier:t,dialogMode:o},panelClass:"ath-dialog-panel"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe),e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-suppliers"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noSuppliers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","suppliers-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","suppliers-grid","md:px-8"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Inventario"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Proveedores"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Proveedores "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return o.createSupplier()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,Pi,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,Hi,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar proveedores"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.suppliers$)))},dependencies:[C.yS,h.mk,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov],styles:[".suppliers-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.suppliers-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.suppliers-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.suppliers-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:ve.L},changeDetection:0}),i})(),resolve:{suppliers:(()=>{class i{constructor(t){this._suppliersService=t}resolve(t,o){return this._suppliersService.getSuppliers()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(qe))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}},{path:"uom",component:Ii,resolve:{uoms:Ve}}]}];var Wi=m(7775);let Gi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[At,C.Bz.forChild($i),It.m,Ne.fi,Wi.fC]}),i})()}}]);