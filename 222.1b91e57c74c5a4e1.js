"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[222],{1222:(_i,V,c)=>{c.r(V),c.d(V,{ShopModule:()=>ui});var h=c(9516),ue=c(1987),y=c(6087),p=c(4847),M=c(1086),b=c(8929),d=c(7625),_=c(5094);const W=n=>n.categories,me=((0,_.P1)(W,n=>n.category),(0,_.P1)(W,n=>n.categories));var k=c(5700),B=c(6203),K=c(4787),a=c(3075),Z=c(8966),F=c(2198),E=c(7489),e=c(5e3),D=c(591),R=c(2994),I=c(2986),v=c(7545),A=c(4850),O=c(9839),Q=c(2340),X=c(520);const S=Q.N.API_URL;let P=(()=>{class n{constructor(t,i){this._httpClient=t,this.store=i,this._categories=new D.X([]),this._pagination=new D.X(null)}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}getCategories(){return this._httpClient.get(`${S}/categories`).pipe((0,R.b)(t=>{this._categories.next(t.categories),this.store.dispatch((0,O.DG)({categories:t.categories}))}))}getCategoriesByBusiness(t){return this._httpClient.get(`${S}/categories/business/${t}`).pipe((0,R.b)(i=>{this._categories.next(i.categories),this.store.dispatch((0,O.DG)({categories:i.categories}))}))}createCategory(t){return this.categories$.pipe((0,I.q)(1),(0,v.w)(i=>this._httpClient.post(`${S}/categories/`,t).pipe((0,A.U)(r=>(this._categories.next([r.category,...i]),this.store.dispatch((0,O.DG)({categories:[r.category,...i]})),r)))))}updateCategory(t){return this.categories$.pipe((0,I.q)(1),(0,v.w)(i=>this._httpClient.patch(`${S}/categories/${t._id}`,t).pipe((0,A.U)(r=>{const s=i.findIndex(l=>l._id===t._id);return i[s]=r.updatedCategory,this._categories.next(i),this.store.dispatch((0,O.DG)({categories:i})),r}))))}deleteCategory(t){return this.categories$.pipe((0,I.q)(1),(0,v.w)(i=>this._httpClient.delete(`${S}/categories/${t}`).pipe((0,A.U)(r=>{const s=i.findIndex(l=>l._id===t);return i.splice(s,1),this._categories.next(i),this.store.dispatch((0,O.DG)({categories:i})),r}))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(X.eN),e.LFG(_.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=c(7967),u=c(9808),g=c(7322),w=c(7531),L=c(4107),$=c(508),T=c(5245),j=c(2368),C=c(7423);function ge(n,o){1&n&&(e.TgZ(0,"h2",6),e._uU(1,"Agregar categor\xeda"),e.qZA())}function _e(n,o){1&n&&(e.TgZ(0,"h2",6),e._uU(1,"Editar categor\xeda"),e.qZA())}function pe(n,o){if(1&n&&e._UZ(0,"mat-icon",29),2&n){e.oxw();const t=e.MAs(13);e.Q6J("svgIcon","iconsmind:"+t.value)}}function fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"form",9),e.TgZ(3,"div",10),e.TgZ(4,"mat-form-field",11),e.TgZ(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",12),e.qZA(),e.TgZ(8,"mat-form-field",11),e.TgZ(9,"mat-label"),e._uU(10,"\xcdconos"),e.qZA(),e.YNc(11,pe,1,1,"mat-icon",13),e.TgZ(12,"mat-select",14,15),e.NdJ("valueChange",function(r){return e.CHM(t),e.oxw().selected=r}),e.TgZ(14,"mat-option",16),e.TgZ(15,"div",17),e._UZ(16,"mat-icon",18),e.TgZ(17,"div",19),e._uU(18,"Frutas"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"mat-option",16),e.TgZ(20,"div",17),e._UZ(21,"mat-icon",20),e.TgZ(22,"div",19),e._uU(23,"Granos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"mat-option",16),e.TgZ(25,"div",17),e._UZ(26,"mat-icon",21),e.TgZ(27,"div",19),e._uU(28,"Carnes"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"mat-option",16),e.TgZ(30,"div",17),e._UZ(31,"mat-icon",22),e.TgZ(32,"div",19),e._uU(33,"Pescados"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"mat-option",16),e.TgZ(35,"div",17),e._UZ(36,"mat-icon",23),e.TgZ(37,"div",19),e._uU(38,"L\xe1cteos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"mat-option",16),e.TgZ(40,"div",17),e._UZ(41,"mat-icon",24),e.TgZ(42,"div",19),e._uU(43,"Conservas"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"mat-option",16),e.TgZ(45,"div",17),e._UZ(46,"mat-icon",25),e.TgZ(47,"div",19),e._uU(48,"Condimentos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",26),e.TgZ(50,"span",27),e._uU(51,"Estado"),e.qZA(),e.TgZ(52,"mat-slide-toggle",28),e._uU(53),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(13),i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.categoryForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name"),e.xp6(4),e.Q6J("ngIf",t),e.xp6(1),e.Q6J("formControlName","icon")("value",i.selected),e.xp6(2),e.Q6J("value","fruits"),e.xp6(5),e.Q6J("value","coffee_bean"),e.xp6(5),e.Q6J("value","deer"),e.xp6(5),e.Q6J("value","fish"),e.xp6(5),e.Q6J("value","cheese"),e.xp6(5),e.Q6J("value","record_3"),e.xp6(5),e.Q6J("value","pepper"),e.xp6(8),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===i.categoryForm.get("active").value?"Activo":"Inactivo"," ")}}function he(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateCategory()}),e._uU(1,"Actualizar"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.categoryForm.invalid)("color","primary")}}function xe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).createCategory()}),e._uU(1,"Agregar"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.categoryForm.invalid)("color","primary")}}function Ze(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30),e.TgZ(2,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeDialog()}),e._uU(3,"Cancelar"),e.qZA(),e.YNc(4,he,2,2,"button",32),e.YNc(5,xe,2,2,"button",32),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let ve=(()=>{class n{constructor(t,i,r,s,l,m,x){this.data=t,this._categoriesService=i,this._changeDetectorRef=r,this._dialogRef=s,this._formBuilder=l,this._fuseConfirmationService=m,this.store=x,this.currentBusiness=null,this._unsubscribeAll=new b.xQ,this.dialogMode=t.dialogMode,this.category=this.data.category}ngOnInit(){this.store.select(K.dy).pipe((0,F.h)(t=>null!==t),(0,d.R)(this._unsubscribeAll)).subscribe(t=>{this._user=t,this._changeDetectorRef.markForCheck()}),this.store.select(B.pR).pipe((0,F.h)(t=>null!==t),(0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.currentBusiness=t,this._changeDetectorRef.markForCheck()}),this.categoryForm=this._formBuilder.group({_id:[null],businessId:[this.currentBusiness._id,[a.kI.required]],userId:[this._user._id,[a.kI.required]],createdAt:[null],active:[!0,[a.kI.required]],icon:["",[a.kI.required]],name:[null,[a.kI.required,a.kI.minLength(5),a.kI.maxLength(150)]]}),null!==this.category.name&&this.categoryForm.patchValue(this.category)}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createCategory(){let t=this.categoryForm.getRawValue();t=(0,E.omit)(t,["_id","createdAt"]),this._fuseConfirmationService.open({title:"Crear categor\xeda",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._categoriesService.createCategory(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck(),this.closeDialog()},s=>{let l;console.warn(s),l=s.error?s.error.title:s.message,this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:l,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}updateCategory(){const t=this.categoryForm.getRawValue();this._fuseConfirmationService.open({title:"Categor\xeda",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._categoriesService.updateCategory(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.closeDialog(),this._changeDetectorRef.markForCheck()},s=>{let l;l=s.error?s.error.message:s.message,this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:l,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.WI),e.Y36(P),e.Y36(e.sBO),e.Y36(Z.so),e.Y36(a.qu),e.Y36(U.R),e.Y36(_.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-category-detail"]],decls:9,vars:4,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"flex","flex-col","flex-auto","gap-4"],[1,"w-full"],["matInput","",3,"formControlName"],["class","mr-4",3,"svgIcon",4,"ngIf"],[3,"formControlName","value","valueChange"],["categorySelection",""],[3,"value"],[1,"flex","flex-row","items-center","justify-start","pl-3"],["svgIcon","iconsmind:fruits"],[1,"px-3","py-1","text-lg","font-light"],["svgIcon","iconsmind:coffee_bean"],["svgIcon","iconsmind:deer"],["svgIcon","iconsmind:fish"],["svgIcon","iconsmind:cheese"],["svgIcon","iconsmind:record_3"],["svgIcon","iconsmind:pepper"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"mr-4",3,"svgIcon"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","",1,"-ml-4",3,"color","click"],["mat-flat-button","",3,"disabled","color","click",4,"ngIf"],["mat-flat-button","",3,"disabled","color","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,ge,2,0,"h2",2),e.YNc(4,_e,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,fe,54,16,"div",4),e.BQk(),e.qZA(),e.YNc(8,Ze,6,3,"ng-container",5),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",!i.data.category._id&&"add"===i.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.category._id&&"edit"===i.dialogMode),e.xp6(3),e.Q6J("ngIf","view"!==i.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},directives:[u.O5,Z.uh,a._Y,a.JL,a.sg,g.KE,g.hX,w.Nt,a.Fj,a.JJ,a.u,L.gD,$.ey,T.Hw,j.Rr,C.lW],encapsulation:2,changeDetection:0}),n})();var Y=c(7838),J=c(2033),f=c(2181);function Te(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",40),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function be(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",41),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ae(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",35),e.TgZ(2,"div"),e._UZ(3,"mat-icon",36),e.qZA(),e.TgZ(4,"div",37),e._uU(5),e.qZA(),e.TgZ(6,"div",32),e.YNc(7,Te,2,1,"ng-container",26),e.YNc(8,be,2,1,"ng-container",26),e.qZA(),e.TgZ(9,"div",38),e.TgZ(10,"button",39),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).openDialog(s,"edit","90%")}),e._UZ(11,"mat-icon",23),e.qZA(),e.TgZ(12,"button",39),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).deleteCategory(s)}),e._UZ(13,"mat-icon",23),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit;e.xp6(3),e.Q6J("svgIcon","iconsmind:"+t.icon),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Ce(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Ae,14,6,"ng-container",34),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function qe(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",29),e.TgZ(2,"div",30),e.TgZ(3,"div"),e._uU(4," Icono "),e.qZA(),e.TgZ(5,"div",31),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",32),e._uU(8," Activo "),e.qZA(),e.TgZ(9,"div",33),e._uU(10," Acciones "),e.qZA(),e.qZA(),e.YNc(11,Ce,2,2,"ng-container",26),e.ALo(12,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("ngIf",e.lcZ(12,2,t.categories$))}}function ye(n,o){if(1&n&&(e.ynx(0),e.YNc(1,qe,13,4,"ng-container",28),e.BQk()),2&n){const t=o.ngIf;e.oxw();const i=e.MAs(40);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function we(n,o){1&n&&(e.TgZ(0,"div",42),e._uU(1,"No hay categor\xedas de productos creadas para la tienda!"),e.qZA())}let ke=(()=>{class n{constructor(t,i,r,s,l){this._categoriesService=t,this._changeDetectorRef=i,this._dialog=r,this._fuseConfirmationService=s,this.store=l,this.categories$=(0,M.of)([]),this.emptyCategory=Y.sk,this.selectedCategory=null,this._unsubscribeAll=new b.xQ}ngOnInit(){this.categories$=this.store.select(me)}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}deleteCategory(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar categor\xeda: ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._categoriesService.deleteCategory(t._id).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`${s.message}`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}trackByFn(t,i){return i.id||t}openDialog(t,i,r){this._dialog.open(ve,{data:{category:t,dialogMode:i},width:"500px",panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P),e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(U.R),e.Y36(_.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-categories"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i._paginator=r.first),e.iGM(r=e.CRH())&&(i._sort=r.first)}},decls:41,vars:9,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-button","",1,"ml-4","bg-primary-500",3,"click"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[1,"flex-auto","p-6","-mt-16","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listCard01Menu","matMenu"],["mat-menu-item",""],[4,"ngIf"],["noCategories",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","categories-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","categories-grid","md:px-8"],[3,"svgIcon"],[1,"truncate"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Nomencladores"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Categor\xedas"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19," Categor\xedas "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"button",14),e.NdJ("click",function(){return i.openDialog(i.emptyCategory,"add","90%")}),e._UZ(22,"mat-icon",15),e.TgZ(23,"span",16),e._uU(24,"Nueva"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",17),e.TgZ(26,"div",18),e.TgZ(27,"div",19),e.TgZ(28,"div",20),e._uU(29,"Listado de categor\xedas"),e.qZA(),e.TgZ(30,"div",21),e.TgZ(31,"button",22),e._UZ(32,"mat-icon",23),e.qZA(),e.TgZ(33,"mat-menu",null,24),e.TgZ(35,"button",25),e._uU(36,"Exportar a PDF"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(37,ye,2,2,"ng-container",26),e.ALo(38,"async"),e.YNc(39,we,2,0,"ng-template",null,27,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(34);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(9),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(5),e.Q6J("ngIf",e.lcZ(38,7,i.categories$))}},directives:[J.PQ,T.Hw,h.yS,C.lW,f.p6,f.VK,f.OP,u.O5,p.YE,p.nU,u.sg],pipes:[u.Ov],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})();function Ie(n,o){if(1&n&&e._UZ(0,"img",17),2&n){const t=e.oxw();e.Q6J("src",t.selectedClient.imageUrl,e.LSH)}}function Qe(n,o){if(1&n&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.selectedClient.name.charAt(0)," ")}}let ee=(()=>{class n{constructor(t,i){this.data=t,this._dialogRef=i,this.selectedClient=this.data,console.log(this.selectedClient)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.WI),e.Y36(Z.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-client-detail"]],decls:66,vars:25,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",1,"mb-0"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"relative","w-full","h-40","px-8","sm:h-48","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"relative","flex","flex-col","items-center","flex-auto","w-full","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full"],[1,"flex","items-end","flex-auto","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-full","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full overflow-hidden font-bold leading-none text-gray-600 uppercase bg-gray-200 rounded text-8xl dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"flex","flex-col","w-full","gap-10","border-t","sm:flex-row"],[1,"flex","flex-col","w-1/3","pt-6","mt-4","space-y-8"],[1,"flex","sm:items-center"],[3,"svgIcon"],[1,"ml-6","leading-6"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","overflow-hidden","font-bold","leading-none","text-gray-600","uppercase","bg-gray-200","rounded","text-8xl","dark:bg-gray-700","dark:text-gray-200"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.TgZ(3,"h2",2),e._uU(4,"Detalles del cliente"),e.qZA(),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e._UZ(7,"div",4),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.YNc(12,Ie,1,1,"img",9),e.YNc(13,Qe,2,1,"div",10),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e._uU(15),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"div",13),e.ynx(18),e.TgZ(19,"div",14),e._UZ(20,"mat-icon",15),e.TgZ(21,"div",16),e._uU(22),e.qZA(),e.qZA(),e.BQk(),e.ynx(23),e.TgZ(24,"div",14),e._UZ(25,"mat-icon",15),e.TgZ(26,"div",16),e._uU(27),e.qZA(),e.qZA(),e.BQk(),e.ynx(28),e.TgZ(29,"div",14),e._UZ(30,"mat-icon",15),e.TgZ(31,"div",16),e._uU(32),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(33,"div",13),e.ynx(34),e.TgZ(35,"div",14),e._UZ(36,"mat-icon",15),e.TgZ(37,"div",16),e._uU(38),e.qZA(),e.qZA(),e.BQk(),e.ynx(39),e.TgZ(40,"div",14),e._UZ(41,"mat-icon",15),e.TgZ(42,"div",16),e._uU(43),e.qZA(),e.qZA(),e.BQk(),e.ynx(44),e.TgZ(45,"div",14),e._UZ(46,"mat-icon",15),e.TgZ(47,"div",16),e._uU(48),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(49,"div",13),e.ynx(50),e.TgZ(51,"div",14),e._UZ(52,"mat-icon",15),e.TgZ(53,"div",16),e._uU(54),e.qZA(),e.qZA(),e.BQk(),e.ynx(55),e.TgZ(56,"div",14),e._UZ(57,"mat-icon",15),e.TgZ(58,"div",16),e._uU(59),e.ALo(60,"date"),e.qZA(),e.qZA(),e.BQk(),e.ynx(61),e.TgZ(62,"div",14),e._UZ(63,"mat-icon",15),e.TgZ(64,"div",16),e._uU(65),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA()),2&t&&(e.xp6(12),e.Q6J("ngIf",i.selectedClient.imageUrl),e.xp6(1),e.Q6J("ngIf",!i.selectedClient.imageUrl),e.xp6(2),e.lnq("",i.selectedClient.name," ",i.selectedClient.lastname1," ",i.selectedClient.lastname2,""),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:identification"),e.xp6(2),e.hij(" ",i.selectedClient.idNumber||"Por definir n\xfamero de identidad",""),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:mail"),e.xp6(2),e.hij(" ",i.selectedClient.email||"Por definir correo electr\xf3nico",""),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:phone"),e.xp6(2),e.hij("",i.selectedClient.phone||"Por definir tel\xe9fono"," "),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:location-marker"),e.xp6(2),e.hij("",i.selectedClient.address||"Por definir direcci\xf3n"," "),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:globe-alt"),e.xp6(2),e.hij("",i.selectedClient.state||"Por definir provincia"," "),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:map"),e.xp6(2),e.hij("",i.selectedClient.city||"Por definir municipio"," "),e.xp6(4),e.Q6J("svgIcon","mat_outline:transgender"),e.xp6(2),e.hij("",i.selectedClient.gender||"Por definir g\xe9nero"," "),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:cake"),e.xp6(2),e.hij(" ",e.lcZ(60,23,i.selectedClient.birthDate)||"Por definir cumplea\xf1os",""),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:calendar"),e.xp6(2),e.Oqu(i.selectedClient.age||"Por definir edad"))},directives:[Z.uh,u.O5,T.Hw],pipes:[u.uU],encapsulation:2,changeDetection:0}),n})();const te=n=>n.clients,Ue=((0,_.P1)(te,n=>n.client),(0,_.P1)(te,n=>n.clients));var Je=c(4768),H=c(262);function Ne(n,o){if(1&n&&e._UZ(0,"img",52),2&n){const t=e.oxw().$implicit;e.Q6J("alt","Logo")("src",t.logoUrl,e.LSH)}}function Fe(n,o){1&n&&(e.TgZ(0,"div",53),e._uU(1," SIN FOTO "),e.qZA())}function De(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",54),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Oe(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",55),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Se(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",41),e.TgZ(2,"div",42),e.TgZ(3,"div",43),e.YNc(4,Ne,1,2,"img",44),e.YNc(5,Fe,2,0,"div",45),e.qZA(),e.qZA(),e.TgZ(6,"div",46),e._uU(7),e.qZA(),e.TgZ(8,"div",47),e._uU(9),e.qZA(),e.TgZ(10,"div",48),e._uU(11),e.qZA(),e.TgZ(12,"div",49),e._uU(13),e.qZA(),e.TgZ(14,"div",50),e._uU(15),e.qZA(),e.TgZ(16,"div",35),e.YNc(17,De,2,1,"ng-container",26),e.YNc(18,Oe,2,1,"ng-container",26),e.qZA(),e.TgZ(19,"div",38),e.TgZ(20,"button",51),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).openDialog(s)}),e._UZ(21,"mat-icon",23),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit;e.xp6(4),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.logoUrl),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE(" ",t.lastname1," ",t.lastname2," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(2),e.hij(" ",t.state," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:eye")}}function Ye(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Se,22,11,"ng-container",40),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Me=function(n){return{"pointer-events-none":n}},Re=function(){return[5,10,25,100]};function Pe(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",29),e.TgZ(2,"div",30),e.TgZ(3,"div",31),e._uU(4," Foto "),e.qZA(),e.TgZ(5,"div",32),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",33),e._uU(8," Apellidos "),e.qZA(),e.TgZ(9,"div",34),e._uU(10," Correo electr\xf3nico "),e.qZA(),e.TgZ(11,"div",35),e._uU(12," Tel\xe9fono "),e.qZA(),e.TgZ(13,"div",36),e._uU(14," Provincia "),e.qZA(),e.TgZ(15,"div",37),e._uU(16," Activo "),e.qZA(),e.TgZ(17,"div",38),e._uU(18," Detalles "),e.qZA(),e.qZA(),e.YNc(19,Ye,2,2,"ng-container",26),e.ALo(20,"async"),e._UZ(21,"mat-paginator",39),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","name"),e.xp6(8),e.Q6J("mat-sort-header","state"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(20,10,t.clients$)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,Me,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(14,Re))("showFirstLastButtons",!0)}}function $e(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Pe,22,15,"ng-container",28),e.BQk()),2&n){const t=o.ngIf;e.oxw();const i=e.MAs(39);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Be(n,o){1&n&&(e.TgZ(0,"div",56),e._uU(1,"No hay clientes que registrados para este negocio!"),e.qZA())}let Ee=(()=>{class n{constructor(t,i,r,s){this._changeDetectorRef=t,this._clientDialog=i,this._clientsService=r,this.store=s,this.clients$=(0,M.of)([]),this.flashMessage=null,this.searchInputControl=new a.NI,this.selectedClient=null,this.tagsEditMode=!1,this._unsubscribeAll=new b.xQ}ngOnInit(){this.clients$=this.store.select(Ue),this._clientsService.pagination$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}trackByFn(t,i){return i.id||t}openDialog(t){this._clientDialog.open(ee,{data:t,panelClass:"toc-dialog-panel",width:"80%"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(Je.a),e.Y36(_.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-clients"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i._paginator=r.first),e.iGM(r=e.CRH())&&(i._sort=r.first)}},decls:40,vars:12,consts:[["cdkScrollable","","fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-80"],["matPrefix","",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex-auto","p-6","-mt-16","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listCard01Menu","matMenu"],["mat-menu-item",""],[4,"ngIf"],["noClients",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","clients-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","text-center","xl:block"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","text-center","sm:block"],[1,"hidden","text-center","lg:block"],[1,"hidden","text-center","xl:block",3,"mat-sort-header"],[1,"hidden","text-center","lg:block",3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","clients-grid","md:px-8"],[1,"items-center","hidden","text-center","xl:block"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"hidden","truncate","md:block"],[1,"hidden","truncate","sm:block"],[1,"hidden","lg:block"],[1,"hidden","truncate","xl:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Tienda"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Clientes"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19," Listado de clientes "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"mat-form-field",14),e._UZ(22,"mat-icon",15),e._UZ(23,"input",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",17),e.TgZ(25,"div",18),e.TgZ(26,"div",19),e.TgZ(27,"div",20),e._uU(28,"Listado de clientes"),e.qZA(),e.TgZ(29,"div",21),e.TgZ(30,"button",22),e._UZ(31,"mat-icon",23),e.qZA(),e.TgZ(32,"mat-menu",null,24),e.TgZ(34,"button",25),e._uU(35,"Exportar a PDF"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,$e,2,2,"ng-container",26),e.ALo(37,"async"),e.YNc(38,Be,2,0,"ng-template",null,27,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(33);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar clientes..."),e.xp6(7),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(5),e.Q6J("ngIf",e.lcZ(37,10,i.clients$))}},directives:[J.PQ,H.H,T.Hw,h.yS,g.KE,g.qo,w.Nt,a.Fj,a.JJ,a.oH,C.lW,f.p6,f.VK,f.OP,u.O5,p.YE,p.nU,y.NW,u.mk,u.sg],pipes:[u.Ov],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})();const N=Q.N.API_URL;let ne=(()=>{class n{constructor(t){this._httpClient=t,this._courier=new D.X(null),this._couriers=new D.X([]),this._pagination=new D.X(null)}get pagination$(){return this._pagination.asObservable()}get courier$(){return this._courier.asObservable()}get couriers$(){return this._couriers.asObservable()}createCourier(t){return this.couriers$.pipe((0,I.q)(1),(0,v.w)(i=>this._httpClient.post(`${N}/couriers/`,t).pipe((0,A.U)(r=>(this._couriers.next([r.courier,...i]),r)))))}getCouriers(t=0,i=10,r="orderNo",s="asc",l=""){return this._httpClient.get(`${N}/couriers/`,{params:{page:""+t,size:""+i,sort:r,order:s,search:l}}).pipe((0,R.b)(m=>(this._couriers.next(m.couriers),this._pagination.next(m.pagination),m)))}getCouriersByBusinessId(t=0,i=10,r="orderNo",s="asc",l="",m=""){return this._httpClient.get(`${N}/couriers/by-business/${m}`,{params:{page:""+t,size:""+i,sort:r,order:s,search:l}}).pipe((0,R.b)(x=>(this._couriers.next(x.couriers),this._pagination.next(x.pagination),x)))}getCourierById(t){return this._httpClient.get(`${N}/couriers/${t}`).pipe((0,A.U)(i=>(this._courier.next(i.courier),i.courier)))}updateCourier(t){return this.couriers$.pipe((0,I.q)(1),(0,v.w)(i=>this._httpClient.put(`${N}/couriers/${t._id}`,t).pipe((0,A.U)(r=>{const s=i.findIndex(l=>l._id===t._id);return i[s]=r.updatedCourier,this._couriers.next(i),r}))))}deleteCourier(t){return this.couriers$.pipe((0,I.q)(1),(0,v.w)(i=>this._httpClient.delete(`${N}/couriers/${t}`).pipe((0,A.U)(r=>{const s=i.findIndex(l=>l._id===t);return i.splice(s,1),this._couriers.next(i),r}))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(X.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Le=c(1158),je=c(7495),q=c(1125),ie=c(7238);function He(n,o){1&n&&(e.TgZ(0,"a",5),e._uU(1,"Nuevo"),e.qZA())}function ze(n,o){if(1&n&&(e.TgZ(0,"a",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.courier.name)}}function Ge(n,o){1&n&&(e.TgZ(0,"div",54),e._uU(1," Nuevo Transportista "),e.qZA())}function Ve(n,o){if(1&n&&(e.TgZ(0,"div",54),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.courier.name," ")}}function We(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().createCourier()}),e._UZ(1,"mat-icon",56),e.TgZ(2,"span",57),e._uU(3,"Guardar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.courierForm.valid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Ke(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateCourier()}),e._UZ(1,"mat-icon",56),e.TgZ(2,"span",57),e._uU(3,"Actualizar"),e.qZA(),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}function Xe(n,o){if(1&n&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function et(n,o){if(1&n&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij("",t.city," ")}}const tt=function(n,o){return{"hover:bg-gray-100 dark:hover:bg-hover":n,"bg-primary-50 dark:bg-hover":o}},nt=function(n){return{"text-primary dark:text-primary-500":n}};function it(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",60),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw();return l.goToStatePanel(l.states[s])}),e.TgZ(2,"div"),e.TgZ(3,"div",61),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(3,tt,!r.selectedDeliveryState||r.selectedDeliveryState!==r.states[i],r.selectedDeliveryState&&r.selectedDeliveryState===r.states[i])),e.xp6(2),e.Q6J("ngClass",e.VKq(6,nt,r.selectedDeliveryState&&r.selectedDeliveryState===r.states[i])),e.xp6(1),e.hij(" ",t," ")}}function ot(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",62),e.TgZ(2,"div",63),e._uU(3," Seleccione una provincia "),e.qZA(),e.qZA(),e.BQk())}function rt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",69),e.TgZ(2,"div",70),e.TgZ(3,"mat-form-field",27),e.TgZ(4,"mat-label"),e._uU(5,"Costo"),e.qZA(),e._UZ(6,"input",30),e.qZA(),e.ynx(7),e.TgZ(8,"div",71),e.TgZ(9,"button",72),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setCost()}),e._UZ(10,"mat-icon",73),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("formGroup",t.globalCostForm),e.xp6(5),e.Q6J("type","number")("formControlName","cost"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:clipboard-copy")}}function st(n,o){if(1&n&&(e.TgZ(0,"div",76),e.TgZ(1,"div",77),e._uU(2),e.qZA(),e.TgZ(3,"div",78),e.TgZ(4,"mat-form-field",27),e.TgZ(5,"mat-label"),e._uU(6,"Costo"),e.qZA(),e._UZ(7,"input",79),e.qZA(),e.qZA(),e.qZA()),2&n){const t=o.$implicit;e.xp6(2),e.hij(" ",t.get("name").value," "),e.xp6(5),e.Q6J("type","number")("formControl",t.get("cost"))}}function at(n,o){if(1&n&&(e.TgZ(0,"div",74),e.YNc(1,st,8,3,"div",75),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.dynamicStatesForm.get("cities").controls)}}function ct(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",81),e.TgZ(2,"span",82),e._uU(3,"Costos guardados correctamente"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function lt(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",81),e.TgZ(2,"span",82),e._uU(3,"Costos actualizados correctamente"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function dt(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",83),e.TgZ(2,"span",82),e._uU(3,"Ya existen costos para esta provincia"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function ut(n,o){if(1&n&&(e.TgZ(0,"div",80),e.YNc(1,ct,4,1,"ng-container",65),e.YNc(2,lt,4,1,"ng-container",65),e.YNc(3,dt,4,1,"ng-container",65),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","updated"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function mt(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",45),e._uU(2),e.TgZ(3,"mat-slide-toggle",64),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,rt,11,4,"div",65),e.YNc(6,at,2,1,"div",66),e.TgZ(7,"div",23),e.YNc(8,ut,4,3,"div",67),e.TgZ(9,"button",68),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveCitiesCosts()}),e._UZ(10,"mat-icon",56),e.TgZ(11,"span",57),e._uU(12,"Guardar"),e.qZA(),e.qZA(),e.TgZ(13,"button",68),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).clearCitiesCosts()}),e._UZ(14,"mat-icon",56),e.TgZ(15,"span",57),e._uU(16,"Borrar"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.hij(" Listado de municipios de ",t," "),e.xp6(1),e.Q6J("formControlName","allCities")("color","primary"),e.xp6(1),e.hij(" ",!0===i.courierForm.get("allCities").value?"Precio por municipios":"Precio para toda la provincia"," "),e.xp6(1),e.Q6J("ngIf",!i.courierForm.get("allCities").value),e.xp6(1),e.Q6J("ngIf",i.courierForm.get("allCities").value),e.xp6(2),e.Q6J("ngIf",i.flashMessage),e.xp6(1),e.Q6J("matTooltip","Guardar costo de env\xedo para la provincia "+t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save"),e.xp6(3),e.Q6J("matTooltip","Borrar costo de env\xedo para la provincia "+t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash")}}function gt(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,mt,17,11,"ng-container",51),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngSwitchCase",t)}}function _t(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().createCourier()}),e._UZ(1,"mat-icon",56),e.TgZ(2,"span",57),e._uU(3,"Guardar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.courierForm.valid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function pt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateCourier()}),e._UZ(1,"mat-icon",56),e.TgZ(2,"span",57),e._uU(3,"Actualizar"),e.qZA(),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}let oe=(()=>{class n{constructor(t,i,r,s,l,m,x){this._activatedRoute=t,this._changeDetectorRef=i,this._couriersService=r,this._formBuilder=s,this._fuseConfirmationService=l,this._locationService=m,this._userService=x,this.courier=Y.wq,this.cities=[],this.citiesToDelivery=[],this.states=[],this.selectedState=null,this.selectedDeliveryState=null,this.editMode=!1,this.courierId=null,this.destinations=[],this.flashMessage=null,this._unsubscribeAll=new b.xQ}ngOnInit(){var t;this._userService.user$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(i=>{this._user=i,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(i=>{this.states=i,this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(({courierId:i})=>{this.courierId=i,"new"!==this.courierId&&(this.editMode=!0,this._couriersService.getCourierById(i).pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{this.courier=r,console.log(r),this.courierForm.patchValue(this.courier)})),this._changeDetectorRef.markForCheck()}),this.courierForm=this._formBuilder.group({id:[null],userId:[null,[a.kI.required]],vendorId:[null,[a.kI.required]],active:[!0,[a.kI.required]],name:[null,[a.kI.required,a.kI.pattern("[a-zA-Z]{2,254}")]],contact:[null,[a.kI.required]],email:[null,[a.kI.email,a.kI.required]],phone:[null,[a.kI.required]],address:[null,[a.kI.required]],city:[null,[a.kI.required]],state:[null,[a.kI.required]],obs:[null],allCities:[!0,[a.kI.required]],destinations:[null]}),null===(t=this.courierForm.get("state"))||void 0===t||t.valueChanges.pipe((0,d.R)(this._unsubscribeAll)).subscribe(i=>{this._getCitiesByState(i),this._changeDetectorRef.markForCheck()}),this.dynamicStatesForm=this._formBuilder.group({name:[null],cities:this._formBuilder.array([])}),this.cityForm=this._formBuilder.group({name:[null],costCup:[null],costMlc:[null]}),this.globalCostForm=this._formBuilder.group({costCup:[null],costMlc:[null]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}createCourier(){let t=this.courierForm.getRawValue();t=(0,E.omit)(t,["_id"]),t.userId=this._user._id,t.businessId=this._user.businessId,t.destinations=this.destinations,this._fuseConfirmationService.open({title:"Crear Transportista",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.createCourier(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}updateCourier(){const t=this.courierForm.getRawValue();t.destinations=this.destinations,console.log(t),this._fuseConfirmationService.open({title:"Actualizar Transportista",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.updateCourier(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}goToStatePanel(t){if(this.selectedDeliveryState===t)return;this.selectedDeliveryState=t,this.destinations=this.courierForm.get("destinations").value;const r=[];if(null!==this.destinations){for(const s of this.destinations)s.name===t&&s.cities.forEach(m=>{r.push(this._formBuilder.group({name:m.name,cost:m.cost}))});this.dynamicStatesForm=this._formBuilder.group({name:[t],cities:this._formBuilder.array([])}),r.forEach(s=>{this.dynamicStatesForm.get("cities").push(s)})}else this.dynamicStatesForm=this._formBuilder.group({name:[t],cities:this._formBuilder.array([])}),this._locationService.getCitiesByState(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this.citiesToDelivery=s,s.forEach(l=>{r.push(this._formBuilder.group({name:l.city,costCup:0,costMlc:0}))}),r.forEach(l=>{this.dynamicStatesForm.get("cities").push(l)}),this._changeDetectorRef.markForCheck()})}saveCitiesCosts(){const t=this.destinations.findIndex(i=>i.name===this.selectedDeliveryState);if(t>-1){this._showFlashMessage("updated"),console.log(this.destinations),console.log(this.destinations[t]);const i=Object.assign({},this.dynamicStatesForm.getRawValue());return console.log(i),this.destinations[t]=i,void console.log(this.destinations)}console.log(this.dynamicStatesForm.getRawValue()),this._showFlashMessage("success"),this.destinations.push(this.dynamicStatesForm.getRawValue()),console.log(this.destinations)}clearCitiesCosts(){const t=this.destinations.findIndex(i=>i.name===this.selectedDeliveryState);t>-1&&(this.destinations.splice(t),console.log(this.destinations))}setCost(){const t=this.globalCostForm.get("cost").value,r=this.dynamicStatesForm.get("cities").controls;for(let s=0;s<r.length;s++)r[s].get("cost").setValue(t)}_getCitiesByState(t){t!==this.selectedState&&this._locationService.getCitiesByState(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(i=>{this.cities=i,this._changeDetectorRef.markForCheck()})}_showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(ne),e.Y36(a.qu),e.Y36(U.R),e.Y36(Le.a),e.Y36(je.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-courier-detail"]],decls:112,vars:44,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-500"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["class","ml-1 text-primary-500",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],["class","mt-2 text-3xl font-extrabold leading-tight tracking-tight sm:text-3xl",4,"ngIf"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white rounded-md bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","click",4,"ngIf"],["class","ml-4 text-white rounded-md bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"click",4,"ngIf"],[1,"flex-auto","p-6","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],[1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","gap-6","p-8","mb-6","border-t-2","sm:grid-cols-4"],[1,"sm:col-span-4"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","required","",3,"type","formControlName","placeholder"],[1,"sm:col-span-2"],["matInput","",3,"type","formControlName"],[1,"sm:col-span-1"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControlName","type"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","flex-col","sm:flex-row"],[1,"flex","w-1/5"],[1,"flex","flex-col","w-full","p-5"],[1,"w-full","pb-2","mb-2","text-xl","font-semibold","text-gray-900","border-b"],[1,"flex","flex-wrap","gap-1"],[4,"ngFor","ngForOf"],[1,"flex","w-4/5"],[1,"w-full","p-5"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"value"],[1,"flex","px-4","py-2","rounded-md","cursor-pointer","bg-gray-50",3,"ngClass","click"],[1,"font-medium","leading-6",3,"ngClass"],[1,"flex","items-center","justify-center","w-full","h-full","bg-gray-50"],[1,"ml-10","text-3xl","text-hint"],[1,"ml-5",3,"formControlName","color"],[4,"ngIf"],["class","grid w-full gap-5 p-5 mb-6 sm:grid-cols-2",4,"ngIf"],["class","flex items-center mr-4",4,"ngIf"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"matTooltip","click"],["autocomplete","off",1,"flex","w-full","gap-5","p-5","mb-6",3,"formGroup"],[1,"flex","w-50"],[1,"flex","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Establecer costo para todos los municipios",1,"w-8","h-8","min-h-8",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"grid","w-full","gap-5","p-5","mb-6","sm:grid-cols-2"],["class","flex flex-col gap-2 sm:flex-row",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-2","sm:flex-row"],[1,"flex","items-center","w-1/3","pt-3","text-lg","font-semibold","text-gray-900"],[1,"w-1/3"],["matInput","",3,"type","formControl"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"courier-detail works!"),e.qZA(),e.TgZ(2,"div",0),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"div"),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e.TgZ(8,"a",5),e._uU(9,"Tienda"),e.qZA(),e.qZA(),e.TgZ(10,"div",4),e._UZ(11,"mat-icon",6),e.TgZ(12,"a",7),e._uU(13,"Transportistas"),e.qZA(),e.qZA(),e.TgZ(14,"div",4),e._UZ(15,"mat-icon",6),e.YNc(16,He,2,0,"a",8),e.YNc(17,ze,2,1,"a",8),e.qZA(),e.qZA(),e.TgZ(18,"div",9),e.TgZ(19,"a",10),e._UZ(20,"mat-icon",6),e.TgZ(21,"span",11),e._uU(22,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",12),e.YNc(24,Ge,2,0,"div",13),e.YNc(25,Ve,2,1,"div",13),e.qZA(),e.qZA(),e.TgZ(26,"div",14),e.YNc(27,We,4,2,"button",15),e.YNc(28,Ke,4,1,"button",16),e.qZA(),e.qZA(),e.TgZ(29,"div",17),e.TgZ(30,"div",18),e.TgZ(31,"form",19),e.TgZ(32,"mat-accordion",20),e.TgZ(33,"mat-expansion-panel",21),e.TgZ(34,"mat-expansion-panel-header",22),e.TgZ(35,"mat-panel-title",23),e.TgZ(36,"div",24),e._uU(37," Informaci\xf3n General "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",25),e.TgZ(39,"div",26),e.TgZ(40,"mat-form-field",27),e.TgZ(41,"mat-label"),e._uU(42,"Nombre"),e.qZA(),e._UZ(43,"input",28),e.qZA(),e.qZA(),e.TgZ(44,"div",29),e.TgZ(45,"mat-form-field",27),e.TgZ(46,"mat-label"),e._uU(47,"Persona de contacto"),e.qZA(),e._UZ(48,"input",30),e.qZA(),e.qZA(),e.TgZ(49,"div",31),e.TgZ(50,"mat-form-field",27),e.TgZ(51,"mat-label"),e._uU(52,"Correo electr\xf3nico"),e.qZA(),e._UZ(53,"mat-icon",32),e._UZ(54,"input",33),e.qZA(),e.qZA(),e.TgZ(55,"div",31),e.TgZ(56,"mat-form-field",27),e.TgZ(57,"mat-label"),e._uU(58,"Tel\xe9fono"),e.qZA(),e._UZ(59,"mat-icon",32),e._UZ(60,"input",33),e.qZA(),e.qZA(),e.TgZ(61,"div",26),e.TgZ(62,"mat-form-field",27),e.TgZ(63,"mat-label"),e._uU(64,"Direcci\xf3n"),e.qZA(),e._UZ(65,"input",33),e.qZA(),e.qZA(),e.TgZ(66,"div",29),e.TgZ(67,"mat-form-field",27),e.TgZ(68,"mat-label"),e._uU(69,"Provincia"),e.qZA(),e._UZ(70,"mat-icon",34),e.TgZ(71,"mat-select",35),e.YNc(72,Xe,2,2,"mat-option",36),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",29),e.TgZ(74,"mat-form-field",27),e.TgZ(75,"mat-label"),e._uU(76,"Municipio"),e.qZA(),e._UZ(77,"mat-icon",34),e.TgZ(78,"mat-select",35),e.YNc(79,et,2,2,"mat-option",36),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",26),e.TgZ(81,"mat-form-field",37),e.TgZ(82,"mat-label"),e._uU(83,"Observaciones"),e.qZA(),e._UZ(84,"textarea",38),e.qZA(),e.qZA(),e.TgZ(85,"div",31),e.TgZ(86,"div",39),e.TgZ(87,"span",40),e._uU(88,"Estado"),e.qZA(),e.TgZ(89,"mat-slide-toggle",41),e._uU(90),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(91,"mat-expansion-panel"),e.TgZ(92,"mat-expansion-panel-header",22),e.TgZ(93,"mat-panel-title",23),e.TgZ(94,"div",24),e._uU(95," Destinos de entrega "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(96,"div",42),e.TgZ(97,"div",43),e.TgZ(98,"div",44),e.TgZ(99,"div",45),e._uU(100," Provincias "),e.qZA(),e.TgZ(101,"div",46),e.YNc(102,it,5,8,"ng-container",47),e.qZA(),e.qZA(),e.qZA(),e.TgZ(103,"div",48),e.TgZ(104,"div",49),e.ynx(105,50),e.YNc(106,ot,4,0,"ng-container",51),e.YNc(107,gt,2,1,"div",47),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(108,"div",52),e.TgZ(109,"div",53),e.YNc(110,_t,4,2,"button",15),e.YNc(111,pt,4,1,"button",16),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("routerLink","/shop/couriers"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf",!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(4),e.Q6J("ngIf",!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editMode),e.xp6(2),e.Q6J("ngIf","new"===i.courierId),e.xp6(1),e.Q6J("ngIf","new"!==i.courierId),e.xp6(3),e.Q6J("formGroup",i.courierForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre del transportista"),e.xp6(5),e.Q6J("type","text")("formControlName","contact"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControlName","email")("type","email"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:phone"),e.xp6(1),e.Q6J("formControlName","phone")("type","tel"),e.xp6(5),e.Q6J("formControlName","address")("type","text"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",i.states),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",i.cities),e.xp6(5),e.Q6J("formControlName","obs"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===i.courierForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(10),e.Q6J("ngForOf",i.states),e.xp6(3),e.Q6J("ngSwitch",i.selectedDeliveryState),e.xp6(2),e.Q6J("ngForOf",i.states),e.xp6(3),e.Q6J("ngIf","new"===i.courierId),e.xp6(1),e.Q6J("ngIf","new"!==i.courierId))},directives:[J.PQ,T.Hw,h.yS,u.O5,a._Y,a.JL,a.sg,q.pp,q.ib,q.yz,q.yK,g.KE,g.hX,w.Nt,a.Fj,a.Q7,a.JJ,a.u,g.qo,L.gD,u.sg,j.Rr,u.RF,u.n9,C.lW,$.ey,u.mk,ie.gM,a.oH],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})();var re=c(6787),se=c(4244);function ft(n,o){1&n&&(e.TgZ(0,"div",39),e._uU(1," Acciones "),e.qZA())}function ht(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.gM2(2,1,t.shippingCostCup,"CUP ","symbol","1.2-2")," ")}}function xt(n,o){1&n&&(e.TgZ(0,"span",47),e._uU(1," No disponible "),e.qZA())}function Zt(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.gM2(2,1,t.shippingCostMlc,"MLC ","symbol","1.2-2")," ")}}function vt(n,o){1&n&&(e.TgZ(0,"span",47),e._uU(1," No disponible "),e.qZA())}function Tt(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",48),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function bt(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",49),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const At=function(n){return[n]};function Ct(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"button",51),e._UZ(2,"mat-icon",26),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(4).deleteCourier(r)}),e._UZ(4,"mat-icon",26),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(3,At,"/shop/couriers/"+t.id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function qt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",41),e.TgZ(2,"div",42),e._uU(3),e.qZA(),e.TgZ(4,"div",43),e._uU(5),e.qZA(),e.TgZ(6,"div",44),e.YNc(7,ht,3,6,"span",29),e.YNc(8,xt,2,0,"span",45),e.qZA(),e.TgZ(9,"div",44),e.YNc(10,Zt,3,6,"span",29),e.YNc(11,vt,2,0,"span",45),e.qZA(),e.TgZ(12,"div",37),e.YNc(13,Tt,2,1,"ng-container",29),e.YNc(14,bt,2,1,"ng-container",29),e.qZA(),e.YNc(15,Ct,5,5,"div",46),e.qZA(),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.contact," "),e.xp6(2),e.Q6J("ngIf",t.shippingCostCup),e.xp6(1),e.Q6J("ngIf",!t.shippingCostCup),e.xp6(2),e.Q6J("ngIf",t.shippingCostMlc),e.xp6(1),e.Q6J("ngIf",!t.shippingCostMlc),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(1),e.Q6J("ngIf",i.roles.includes("SYSTEM_ADMIN"))}}function yt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,qt,16,9,"ng-container",40),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function wt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",32),e.TgZ(2,"div",33),e.TgZ(3,"div",34),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",35),e._uU(6," Contacto "),e.qZA(),e.TgZ(7,"div",36),e._uU(8," Precio CUP "),e.qZA(),e.TgZ(9,"div",36),e._uU(10," Precio MLC "),e.qZA(),e.TgZ(11,"div",37),e._uU(12," Activo "),e.qZA(),e.YNc(13,ft,2,0,"div",38),e.qZA(),e.YNc(14,yt,2,2,"ng-container",29),e.ALo(15,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","shippingCostCup"),e.xp6(2),e.Q6J("mat-sort-header","shippingCostMlc"),e.xp6(4),e.Q6J("ngIf",t.roles.includes("SYSTEM_ADMIN")),e.xp6(1),e.Q6J("ngIf",e.lcZ(15,5,t.couriers$))}}function kt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,wt,16,7,"ng-container",31),e.BQk()),2&n){const t=o.ngIf;e.oxw();const i=e.MAs(43);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function It(n,o){1&n&&(e.TgZ(0,"div",53),e._uU(1,"No hay mensajeros para este negocio!"),e.qZA())}let Qt=(()=>{class n{constructor(t,i,r,s,l){this._couriersService=t,this._changeDetectorRef=i,this._dialog=r,this._fuseConfirmationService=s,this._jwtService=l,this.emptyCourier=Y.wq,this.searchInputControl=new a.NI,this.selectedCourier=null,this.roles=[],this.vendorId=null,this._unsubscribeAll=new b.xQ}ngOnInit(){this._couriersService.pagination$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.couriers$=this._couriersService.couriers$}ngAfterViewInit(){this._sort&&this._paginator&&(this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),this.couriers$.pipe((0,A.U)(t=>{t.length>0&&(0,re.T)(this._sort.sortChange,this._paginator.page).pipe((0,v.w)(()=>this._couriersService.getCouriers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))).subscribe()})))}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}deleteCourier(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar este transportista: ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.deleteCourier(t._id).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`${s.message}`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}trackByFn(t,i){return i.id||t}openDialog(t,i,r="70%"){this._dialog.open(oe,{data:{courier:t,dialogMode:i},width:r,panelClass:"toc-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne),e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(U.R),e.Y36(se.N0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-couriers"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i._paginator=r.first),e.iGM(r=e.CRH())&&(i._sort=r.first)}},decls:44,vars:13,consts:[["cdkScrollable","","fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-80"],["matPrefix","",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-button","","routerLink","/shop/couriers/new",1,"ml-4","bg-primary-500"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[1,"flex-auto","p-6","-mt-16","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","overflow-auto","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listCard01Menu","matMenu"],["mat-menu-item",""],[4,"ngIf"],["noCouriers",""],[4,"ngIf","ngIfElse"],["fuseScrollbar","",1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","couriers-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","lg:block"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","text-center","lg:block"],["class","text-center",4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","courier-grid","md:px-8"],[1,"truncate"],[1,"hidden","truncate","lg:block"],[1,"hidden","sm:block"],["class","text-warn-500",4,"ngIf"],["class","flex flex-col items-center justify-center gap-1 md:flex-row",4,"ngIf"],[1,"text-warn-500"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Tienda"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Mensajeros"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19," Mensajeros "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"mat-form-field",14),e._UZ(22,"mat-icon",15),e._UZ(23,"input",16),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"mat-icon",18),e.TgZ(26,"span",19),e._uU(27,"Nuevo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",20),e.TgZ(29,"div",21),e.TgZ(30,"div",22),e.TgZ(31,"div",23),e._uU(32,"Listado de Mensajeros"),e.qZA(),e.TgZ(33,"div",24),e.TgZ(34,"button",25),e._UZ(35,"mat-icon",26),e.qZA(),e.TgZ(36,"mat-menu",null,27),e.TgZ(38,"button",28),e._uU(39,"Exportar a PDF"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(40,kt,2,2,"ng-container",29),e.ALo(41,"async"),e.YNc(42,It,2,0,"ng-template",null,30,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(37);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar mensajeros..."),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(9),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(5),e.Q6J("ngIf",e.lcZ(41,11,i.couriers$))}},directives:[J.PQ,H.H,T.Hw,h.yS,g.KE,g.qo,w.Nt,a.Fj,a.JJ,a.oH,C.lW,h.rH,f.p6,f.VK,f.OP,u.O5,p.YE,p.nU,u.sg],pipes:[u.Ov,u.H9],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})(),ae=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-order-detail"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"order-detail works!"),e.qZA())},encapsulation:2}),n})();var Ut=c(13);const ce=n=>n.orders,Jt=((0,_.P1)(ce,n=>n.order),(0,_.P1)(ce,n=>n.orders));var Nt=c(9672),Ft=c(7446),Dt=c(5899),Ot=c(6307);const St=["htmlOrderList"];function Yt(n,o){if(1&n&&(e.TgZ(0,"div",55),e._UZ(1,"mat-icon",56),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.shippingWay),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:home")}}function Mt(n,o){if(1&n&&(e.TgZ(0,"div",55),e._UZ(1,"mat-icon",56),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.shippingWay),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:office-building")}}function Rt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(4).toggleDetails(r.id)}),e._UZ(1,"mat-icon",23),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.Q6J("matTooltip",(null==i.selectedOrder?null:i.selectedOrder.id)===t.id?"Cerrar panel de estados":"Actualizar estado"),e.xp6(1),e.Q6J("svgIcon",(null==i.selectedOrder?null:i.selectedOrder.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:refresh")}}function Pt(n,o){1&n&&e.GkF(0)}const $t=function(n){return{$implicit:n}};function Bt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Pt,1,0,"ng-container",58),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const i=e.MAs(39);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,$t,t))}}const Et=function(n,o,t,i,r,s){return{"bg-pink-200 text-pink-800 dark:bg-pink-600 dark:text-pink-50":n,"bg-teal-200 text-teal-800 dark:bg-teal-600 dark:text-teal-50":o,"bg-orange-200 text-orange-800 dark:bg-orange-600 dark:text-orange-50":t,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-50":i,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":r,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":s}};function Lt(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",41),e.TgZ(2,"div",42),e._uU(3),e.qZA(),e.TgZ(4,"div",43),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",44),e._uU(8),e.qZA(),e.TgZ(9,"div",44),e._uU(10),e.qZA(),e.TgZ(11,"div",34),e._uU(12),e.qZA(),e.TgZ(13,"div",36),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"div",45),e.TgZ(17,"span",46),e.TgZ(18,"span",47),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",48),e.YNc(21,Yt,2,2,"div",49),e.YNc(22,Mt,2,2,"div",50),e.qZA(),e.TgZ(23,"div",51),e.TgZ(24,"button",52),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).viewPurchaseOrder(s.id)}),e._UZ(25,"mat-icon",23),e.qZA(),e.YNc(26,Rt,2,2,"button",53),e.qZA(),e.qZA(),e.TgZ(27,"div",54),e.YNc(28,Bt,2,4,"ng-container",26),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(3),e.hij(" ",t.orderNo," "),e.xp6(2),e.hij(" ",e.xi3(6,15,t.createdAt,"shortDate")," "),e.xp6(3),e.lnq(" ",t.beneficiaryName," ",t.beneficiaryLastname1," ",t.beneficiaryLastname2," "),e.xp6(2),e.hij(" ",i.getVendorName(t.vendorId)," "),e.xp6(2),e.hij(" ",t.currency," "),e.xp6(2),e.hij(" ",e.xi3(15,18,t.total,"1.2-2")," "),e.xp6(3),e.Q6J("ngClass",e.HTZ(21,Et,"Pendiente de pago"===t.status,"Pagada"===t.status,"Lista"===t.status,"Transportando"===t.status,"Entregada"===t.status,"Cancelada"===t.status)),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Q6J("ngIf","Entrega a domicilio"===t.shippingWay),e.xp6(1),e.Q6J("ngIf","Recogida en tienda"===t.shippingWay),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:document-text"),e.xp6(1),e.Q6J("ngIf",i.roles.includes("SYSTEM_ADMIN")),e.xp6(2),e.Q6J("ngIf",(null==i.selectedOrder?null:i.selectedOrder.id)===t.id)}}function jt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Lt,29,28,"ng-container",40),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Ht=function(n){return{"pointer-events-none":n}},zt=function(){return[5,10,25,100]};function Gt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",30,31),e.TgZ(3,"div",32),e.TgZ(4,"div",33),e._uU(5," N\xfamero "),e.qZA(),e.TgZ(6,"div",34),e._uU(7," Fecha "),e.qZA(),e.TgZ(8,"div",35),e._uU(9," Beneficiario "),e.qZA(),e.TgZ(10,"div",35),e._uU(11," Vendedor "),e.qZA(),e.TgZ(12,"div",34),e._uU(13," Moneda "),e.qZA(),e.TgZ(14,"div",36),e._uU(15," Importe "),e.qZA(),e.TgZ(16,"div",34),e._uU(17," Estado "),e.qZA(),e.TgZ(18,"div",37),e._uU(19," Entrega "),e.qZA(),e.TgZ(20,"div",38),e._uU(21," Acciones "),e.qZA(),e.qZA(),e.YNc(22,jt,2,2,"ng-container",26),e.ALo(23,"async"),e._UZ(24,"mat-paginator",39),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","orderNo"),e.xp6(18),e.Q6J("ngIf",e.lcZ(23,8,t.orders$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Ht,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,zt))("showFirstLastButtons",!0)}}function Vt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Gt,25,13,"ng-container",29),e.BQk()),2&n){const t=o.ngIf;e.oxw();const i=e.MAs(41);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Wt(n,o){1&n&&(e.TgZ(0,"div",75),e._UZ(1,"mat-progress-bar",76),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function Kt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"fuse-alert",78),e.TgZ(2,"span",79),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("type","success")("appearance","outline"),e.xp6(2),e.Oqu(t.alertTitle),e.xp6(1),e.hij(" ",t.alertMessage," ")}}function Xt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"fuse-alert",78),e.TgZ(2,"span",79),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("type","error")("appearance","outline"),e.xp6(2),e.Oqu(t.alertTitle),e.xp6(1),e.hij(" ",t.alertMessage," ")}}function en(n,o){if(1&n&&(e.TgZ(0,"div",77),e.YNc(1,Kt,5,4,"ng-container",26),e.YNc(2,Xt,5,4,"ng-container",26),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function tn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.createdAt))}}function nn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.createdAt,"hh:mm:ss a"))}}function on(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.payedAt))}}function rn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.payedAt,"hh:mm:ss a"))}}function sn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.readyAt))}}function an(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.readyAt,"hh:mm:ss a"))}}function cn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setReadyStatus()}),e._UZ(1,"mat-icon",85),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function ln(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",86),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setReadyStatus()}),e._UZ(1,"mat-icon",87),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function dn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",51),e.YNc(1,cn,2,1,"button",80),e.YNc(2,ln,2,1,"button",81),e.TgZ(3,"button",82),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveReadyStatus()}),e._UZ(4,"mat-icon",83),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.ready),e.xp6(1),e.Q6J("ngIf",t.ready),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function un(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.shippedAt))}}function mn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.shippedAt,"hh:mm:ss a"))}}function gn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setShippedStatus()}),e._UZ(1,"mat-icon",85),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function _n(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",91),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setShippedStatus()}),e._UZ(1,"mat-icon",87),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function pn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",51),e.YNc(1,gn,2,1,"button",88),e.YNc(2,_n,2,1,"button",89),e.TgZ(3,"button",82),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveShippedStatus()}),e._UZ(4,"mat-icon",83),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.shipped),e.xp6(1),e.Q6J("ngIf",t.shipped),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function fn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.deliveredAt))}}function hn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.deliveredAt,"hh:mm:ss a"))}}function xn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",94),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setDeliveredStatus()}),e._UZ(1,"mat-icon",85),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Zn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setDeliveredStatus()}),e._UZ(1,"mat-icon",87),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function vn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",51),e.YNc(1,xn,2,1,"button",92),e.YNc(2,Zn,2,1,"button",93),e.TgZ(3,"button",82),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveDeliveredStatus()}),e._UZ(4,"mat-icon",83),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.delivered),e.xp6(1),e.Q6J("ngIf",t.delivered),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function Tn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.canceledAt))}}function bn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.canceledAt,"hh:mm:ss a"))}}function An(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",98),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).setCanceledStatus()}),e._UZ(1,"mat-icon",85),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Cn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",99),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).setCanceledStatus()}),e._UZ(1,"mat-icon",87),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function qn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",51),e.YNc(1,An,2,1,"button",96),e.YNc(2,Cn,2,1,"button",97),e.TgZ(3,"button",82),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).saveCanceledStatus()}),e._UZ(4,"mat-icon",83),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.canceled),e.xp6(1),e.Q6J("ngIf",t.canceled),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function yn(n,o){if(1&n&&(e.TgZ(0,"div",68),e._UZ(1,"mat-checkbox",71),e.TgZ(2,"span"),e._uU(3," Cancelada "),e.qZA(),e.YNc(4,Tn,3,3,"span",26),e.YNc(5,bn,3,4,"span",26),e.YNc(6,qn,5,3,"div",72),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("color","primary")("checked",i.canceled)("formControlName","canceled"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.canceledAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.canceledAt),e.xp6(1),e.Q6J("ngIf",!i.delivered)}}function wn(n,o){1&n&&(e.TgZ(0,"div",100),e.TgZ(1,"mat-form-field",101),e.TgZ(2,"mat-label"),e._uU(3,"Motivos de la cancelaci\xf3n de la orden"),e.qZA(),e._UZ(4,"textarea",102),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("formControlName","cancelObs"))}function kn(n,o){if(1&n&&(e.TgZ(0,"div",59),e.YNc(1,Wt,2,1,"div",60),e.TgZ(2,"div",61),e.TgZ(3,"form",62),e.TgZ(4,"div",63),e.TgZ(5,"div",64),e.TgZ(6,"span",65),e._uU(7,"Actualizar estado"),e.qZA(),e.YNc(8,en,3,2,"div",66),e.TgZ(9,"div",67),e.TgZ(10,"div",68),e._UZ(11,"mat-checkbox",69),e.TgZ(12,"span"),e._uU(13," Pendiente de Pago "),e.qZA(),e.YNc(14,tn,3,3,"span",26),e.YNc(15,nn,3,4,"span",26),e.qZA(),e.TgZ(16,"div",68),e._UZ(17,"mat-checkbox",70),e.TgZ(18,"span"),e._uU(19," Pagada "),e.qZA(),e.YNc(20,on,3,3,"span",26),e.YNc(21,rn,3,4,"span",26),e.qZA(),e.TgZ(22,"div",68),e._UZ(23,"mat-checkbox",71),e.TgZ(24,"span"),e._uU(25," Lista "),e.qZA(),e.YNc(26,sn,3,3,"span",26),e.YNc(27,an,3,4,"span",26),e.YNc(28,dn,5,3,"div",72),e.qZA(),e.TgZ(29,"div",68),e._UZ(30,"mat-checkbox",71),e.TgZ(31,"span"),e._uU(32," Transportando "),e.qZA(),e.YNc(33,un,3,3,"span",26),e.YNc(34,mn,3,4,"span",26),e.YNc(35,pn,5,3,"div",72),e.qZA(),e.TgZ(36,"div",68),e._UZ(37,"mat-checkbox",71),e.TgZ(38,"span"),e._uU(39," Entregada "),e.qZA(),e.YNc(40,fn,3,3,"span",26),e.YNc(41,hn,3,4,"span",26),e.YNc(42,vn,5,3,"div",72),e.qZA(),e.YNc(43,yn,7,6,"div",73),e.qZA(),e.YNc(44,wn,5,1,"div",74),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.isLoadingState),e.xp6(2),e.Q6J("formGroup",i.selectedOrderForm),e.xp6(5),e.Q6J("ngIf",i.flashMessage),e.xp6(3),e.Q6J("color","primary")("checked",!0)("disabled",!0),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.createdAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.createdAt),e.xp6(2),e.Q6J("color","primary")("formControlName","payed"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.payedAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.payedAt),e.xp6(2),e.Q6J("color","primary")("checked",i.ready)("formControlName","ready"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.readyAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.readyAt),e.xp6(1),e.Q6J("ngIf",i.payed&&!i.canceled&&!i.shipped),e.xp6(2),e.Q6J("color","primary")("checked",i.shipped)("formControlName","shipped"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.shippedAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.shippedAt),e.xp6(1),e.Q6J("ngIf",i.ready&&!i.canceled&&!i.delivered),e.xp6(2),e.Q6J("color","primary")("checked",i.delivered)("formControlName","delivered"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.deliveredAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.deliveredAt),e.xp6(1),e.Q6J("ngIf",i.shipped&&!i.canceled),e.xp6(1),e.Q6J("ngIf",!(i.ready||i.shipped||i.delivered)),e.xp6(1),e.Q6J("ngIf",i.canceled)}}function In(n,o){1&n&&(e.TgZ(0,"div",103),e._uU(1,"No hay \xf3rdenes para esta tienda!"),e.qZA())}let Qn=(()=>{class n{constructor(t,i,r,s,l,m,x){this._changeDetectorRef=t,this._formBuilder=i,this._jwtService=r,this._ordersService=s,this._orderDialog=l,this._router=m,this.store=x,this.orders$=(0,M.of)([]),this.alertTitle=null,this.alertMessage=null,this.order=null,this.orders=[],this.flashMessage=null,this.searchInputControl=new a.NI,this.selectedOrder=null,this.payed=!1,this.ready=!1,this.shipped=!1,this.delivered=!1,this.canceled=!1,this.roles=[],this.vendorId=null,this._unsubscribeAll=new b.xQ}ngOnInit(){this._ordersService.pagination$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.orders$=this.store.select(Jt),this.searchInputControl.valueChanges.pipe((0,d.R)(this._unsubscribeAll),(0,Ut.b)(900),(0,v.w)(t=>this._ordersService.getOrders(0,10,"orderNo","asc",t))).subscribe(),this.selectedOrderForm=this._formBuilder.group({id:[null,a.kI.required],payed:[{value:this.payed,disabled:!0},a.kI.required],payedAt:[{value:null,disabled:!0},a.kI.required],ready:[{value:this.ready,disabled:!0},a.kI.required],readyAt:[{value:null,disabled:!0},a.kI.required],shipped:[{value:this.shipped,disabled:!0},a.kI.required],shippedAt:[{value:null,disabled:!0},a.kI.required],delivered:[{value:this.delivered,disabled:!0},a.kI.required],deliveredAt:[{value:null,disabled:!0},a.kI.required],canceled:[{value:this.canceled,disabled:!0},a.kI.required],canceledAt:[{value:null,disabled:!0},a.kI.required],cancelObs:[null],changeStateAt:[{value:null,disabled:!0},a.kI.required],status:[null,a.kI.required]})}ngAfterViewInit(){this._sort&&this._paginator&&(this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,re.T)(this._sort.sortChange,this._paginator.page).pipe((0,v.w)(()=>(this.closeDetails(),this._ordersService.getOrders(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction)))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}closeDetails(){this.selectedOrder=null}toggleDetails(t){this.selectedOrder&&this.selectedOrder._id===t?this.closeDetails():this._ordersService.getOrderById(t).subscribe(i=>{this.selectedOrder=i,this.payed=i.isPayed,this.ready=i.isReady,this.shipped=i.isShipped,this.delivered=i.isDelivered,this.canceled=i.isCanceled,this.selectedOrderForm.patchValue(i),this._changeDetectorRef.markForCheck()})}setReadyStatus(){if(this.ready){if(this.shipped)return void this.showFlashMessage("error","Esta orden ha sido marcada como envidada");this.ready=!1}else this.ready=!0}saveReadyStatus(){let t;t=this.ready?"Lista":"Pagada",this._ordersService.updateOrderStatus({orderId:this.selectedOrder._id,ready:this.ready,status:t}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{this.selectedOrder=r.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},r=>{this.alertTitle=`${r.status}: ${r.statusText}`,this.alertMessage=r.error.message?r.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()})}setShippedStatus(){if(this.shipped){if(this.delivered)return void this.showFlashMessage("error","Esta orden ha sido marcada como entregada");this.shipped=!1}else this.shipped=!0}saveShippedStatus(){let t;t=this.shipped?"Transportando":"Lista",this._ordersService.updateOrderStatus({orderId:this.selectedOrder._id,shipped:this.shipped,status:t}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{this.selectedOrder=r.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},r=>{this.alertTitle=`${r.status}: ${r.statusText}`,this.alertMessage=r.error.message?r.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()})}setDeliveredStatus(){this.delivered=!this.delivered}saveDeliveredStatus(){let t;t=this.delivered?"Entregada":"Transportando",this._ordersService.updateOrderStatus({orderId:this.selectedOrder._id,delivered:this.delivered,status:t}).pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{this.selectedOrder=r.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},r=>{this.alertTitle=`${r.status}: ${r.statusText}`,this.alertMessage=r.error.message?r.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()})}setCanceledStatus(){this.delivered?this.showFlashMessage("error","Esta orden ya fue entregada"):this.canceled=!this.canceled}saveCanceledStatus(){const i=this.selectedOrderForm.getRawValue(),r={orderId:this.selectedOrder._id,canceled:this.canceled,cancelObs:i.cancelObs,status:"Cancelada"};this.delivered?this.showFlashMessage("error","Esta orden ya fue entregada"):null!==r.cancelObs?this._ordersService.updateOrderStatus(r).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this.selectedOrder=s.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},s=>{this.alertTitle=`${s.status}: ${s.statusText}`,this.alertMessage=s.error.message?s.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()}):this.showFlashMessage("error","Para realizar la cancelaci\xf3n deber\xe1 exponer el motivo")}trackByFn(t,i){return i.id||t}openDialog(t,i,r="90%"){this._orderDialog.open(ae,{data:{order:t,dialogMode:i},width:r,panelClass:"toc-dialog-panel"})}showFlashMessage(t,i){this.flashMessage=t,this.alertMessage=i,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},5e3)}viewPurchaseOrder(t){this._router.navigateByUrl(`/shop/orders/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(a.qu),e.Y36(se.N0),e.Y36(Nt.N),e.Y36(Z.uw),e.Y36(h.F0),e.Y36(_.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-orders"]],viewQuery:function(t,i){if(1&t&&(e.Gf(St,5),e.Gf(y.NW,5),e.Gf(p.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.htmlOrderList=r.first),e.iGM(r=e.CRH())&&(i._paginator=r.first),e.iGM(r=e.CRH())&&(i._sort=r.first)}},decls:42,vars:12,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-50"],["matPrefix","",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex-auto","p-6","-mt-16","overflow-auto","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-8","shadow","lg:p-16","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listCard01Menu","matMenu"],["mat-menu-item",""],[4,"ngIf"],["rowDetailsTemplate",""],["noOrders",""],[4,"ngIf","ngIfElse"],["id","htmlOrdersList",1,"grid","max-h-256"],["htmlOrdersList",""],["matSort","","matSortDisableClear","",1,"sticky","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","-top-10","order-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","text-center","md:block"],[1,"hidden","xl:block"],[1,"hidden","text-right","sm:block"],[1,"hidden","text-center","lg:block"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","max-w-full","gap-4","px-6","py-3","overflow-x-hidden","border-b","orders-grid","md:px-8","overscroll-x-auto"],[1,""],[1,"hidden","text-center","truncate","md:block"],[1,"hidden","truncate","xl:block"],[1,"items-center","hidden","text-center","md:block"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],[1,"items-center","hidden","text-center","lg:block"],["class","-mb-1.5 text-base font-semibold rounded-lg",3,"matTooltip",4,"ngIf"],["class","-mb-1.5 text-base font-semibold  rounded-lg",3,"matTooltip",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","","matTooltip","Ver orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","",3,"matTooltip","click",4,"ngIf"],[1,"grid"],[1,"-mb-1.5","text-base","font-semibold","rounded-lg",3,"matTooltip"],[1,"icon-size-6",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","border-l","border-r","bg-gray-50"],["class","flex w-full",4,"ngIf"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","p-8","sm:flex-row"],[1,"flex","flex-col","w-full"],[1,"mb-5","font-semibold"],["class","flex items-center justify-center pb-5",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","justify-evenly"],[1,"flex","flex-col","w-full","gap-2","text-center"],[3,"color","checked","disabled"],[3,"color","formControlName"],[3,"color","checked","formControlName"],["class","flex flex-col items-center justify-center gap-1 md:flex-row",4,"ngIf"],["class","flex flex-col w-full gap-2 text-center",4,"ngIf"],["class","flex items-center justify-center py-5",4,"ngIf"],[1,"flex","w-full"],[3,"mode"],[1,"flex","items-center","justify-center","pb-5"],[3,"type","appearance"],["fuseAlertTitle",""],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Establecer orden lista para recoger o entregar",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar el estado de la orden",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Actualizar estado",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-blue-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Establecer orden lista para recoger o entregar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Cancelar el estado de la orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-red-400","icon-size-5",3,"svgIcon"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Confirmar env\xedo",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de env\xedo",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Confirmar env\xedo",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de env\xedo",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Confirmar entrega",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de entrega",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Confirmar entrega",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de entrega",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar orden",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Rechazar cancelaci\xf3n",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Cancelar orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Rechazar cancelaci\xf3n",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"flex","items-center","justify-center","py-5"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Tienda"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"\xd3rdenes"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19," Listado de \xd3rdenes "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"mat-form-field",14),e._UZ(22,"mat-icon",15),e._UZ(23,"input",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",17),e.TgZ(25,"div",18),e.TgZ(26,"div",19),e.TgZ(27,"div",20),e._uU(28,"Listado de \xf3rdenes"),e.qZA(),e.TgZ(29,"div",21),e.TgZ(30,"button",22),e._UZ(31,"mat-icon",23),e.qZA(),e.TgZ(32,"mat-menu",null,24),e.TgZ(34,"button",25),e._uU(35,"Exportar a PDF"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,Vt,2,2,"ng-container",26),e.ALo(37,"async"),e.YNc(38,kn,45,32,"ng-template",null,27,e.W1O),e.YNc(40,In,2,0,"ng-template",null,28,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(33);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar \xf3rdenes.."),e.xp6(7),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(5),e.Q6J("ngIf",e.lcZ(37,10,i.orders$))}},directives:[T.Hw,h.yS,g.KE,g.qo,w.Nt,a.Fj,a.JJ,a.oH,C.lW,f.p6,f.VK,f.OP,u.O5,p.YE,p.nU,y.NW,u.mk,u.sg,ie.gM,u.tP,a._Y,a.JL,a.sg,Ft.oG,a.u,Dt.pW,Ot.W,g.hX],pipes:[u.Ov,u.uU,u.JJ],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})();var z=c(771),Un=c(7231);function Jn(n,o){1&n&&(e.TgZ(0,"a",5),e._uU(1,"Nuevo"),e.qZA())}function Nn(n,o){if(1&n&&(e.TgZ(0,"a",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedProduct.name)}}function Fn(n,o){1&n&&(e.TgZ(0,"div",56),e._uU(1," Nuevo Producto "),e.qZA())}function Dn(n,o){if(1&n&&(e.TgZ(0,"div",56),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.selectedProduct.name," ")}}function On(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){return e.CHM(t),e.oxw().createProduct()}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Guardar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.productForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Sn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateProduct()}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Actualizar"),e.qZA(),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}function Yn(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",61),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function Mn(n,o){if(1&n&&(e.TgZ(0,"mat-error",62),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.productForm.get("onSale").getError("invalid")," ")}}function Rn(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",61),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Pn(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",61),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function $n(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e._UZ(1,"img",65),e._UZ(2,"div",66),e.TgZ(3,"div",67),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw().removeFile(r)}),e._UZ(4,"mat-icon",68),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t,e.LSH)}}function Bn(n,o){if(1&n&&(e.ynx(0),e.YNc(1,$n,5,1,"div",63),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!==t)}}function En(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){return e.CHM(t),e.oxw().createProduct()}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Guardar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.productForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Ln(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateProduct()}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Actualizar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.productForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}let jn=(()=>{class n{constructor(t,i,r,s,l,m,x,mi,gi){this._activatedRoute=t,this._categoriesService=i,this._changeDetectorRef=r,this._formBuilder=s,this._fuseConfirmationService=l,this._productsService=m,this._router=x,this._imagesService=mi,this.store=gi,this.categories=[],this.currencies=["CUP","MLC","BTC"],this.currentBusiness=null,this.editMode=!1,this.imagesId=[],this.productId=null,this.selectedProduct=Y.u5,this.units=["U","kg","lb","L"],this._unsubscribeAll=new b.xQ}ngOnInit(){this.store.select(K.dy).pipe((0,F.h)(t=>null!==t),(0,d.R)(this._unsubscribeAll)).subscribe(t=>{this._user=t,this._changeDetectorRef.markForCheck()}),this.store.select(B.pR).pipe((0,F.h)(t=>null!==t),(0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.currentBusiness=t,this._changeDetectorRef.markForCheck()}),this._categoriesService.categories$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this.productForm=this._formBuilder.group({_id:[null],userId:[this._user._id,[a.kI.required]],businessId:[this.currentBusiness._id,[a.kI.required]],active:[!0,[a.kI.required]],code:[null],name:[null,[a.kI.required]],description:[null],categoryId:[null,[a.kI.required]],stock:[null,[a.kI.min(0),a.kI.required]],onSale:[null,[a.kI.min(0),a.kI.required]],unit:[null,[a.kI.required]],guaranty:[null],cost:[0,[a.kI.min(0),a.kI.required]],price:[0,[a.kI.min(0),a.kI.required]],tax:[0,[a.kI.min(0),a.kI.required]],discount:[0,[a.kI.min(0),a.kI.required]],currency:[null,[a.kI.required]],weight:[null,[a.kI.min(0)]],volume:[null,[a.kI.min(0)]],dimensions:[null],imagesUrl:this._formBuilder.array([])},{validators:this._checkOnSaleQty("stock","onSale")}),this._activatedRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(({productId:t})=>{this.productId=t,"new"!==this.productId&&(this.editMode=!0,this._productsService.getProductById(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(i=>{this.selectedProduct=i,this.productForm.patchValue(this.selectedProduct),this.productForm.get("categoryId").patchValue(this.selectedProduct.categoryId),this.imagesId=this.selectedProduct.imagesUrl})),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}createProduct(){let t=this.productForm.getRawValue();t=(0,E.omit)(t,"_id"),t.imagesUrl=this.imagesId,this._fuseConfirmationService.open({title:"Crear Producto",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._productsService.createProduct(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`Producto ${s.product.name} creado correctamente`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/shop/products"),this._changeDetectorRef.markForCheck()},s=>{console.log(s),this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}updateProduct(){const t=this.productForm.getRawValue();delete t.currentImageIndex,t.imagesUrl=this.imagesId,this._fuseConfirmationService.open({title:"Actualizar Producto",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._productsService.updateProduct(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`${s.message}`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/shop/products"),this._changeDetectorRef.markForCheck()},s=>{this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}selectFiles(t){if(0!==t.target.files.length){this.selectedFiles=t.target.files;for(let i=0;i<this.selectedFiles.length;i++)this._uploadFile(this.selectedFiles[i])}}removeFile(t){void 0!==t&&this._imagesService.removeImage(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{const i=this.imagesId.findIndex(r=>r===t);this.imagesId.splice(i,1),this._changeDetectorRef.markForCheck()},i=>{this._fuseConfirmationService.open({title:`${i.statusText}: ${i.status}`,message:"No se han podido eliminar la imagen del servidor,\n                        int\xe9ntelo nuevamente si el error persistes contacte con el personal de soporte.",icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})}_uploadFile(t){this._imagesService.uploadImage("products",t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(i=>{this.imagesId.push(i.imageUrl),this._changeDetectorRef.markForCheck()},i=>{this._fuseConfirmationService.open({title:`${i.statusText}: ${i.status}`,message:"No se han podido guardar la im\xe1genes en el servidor,\n                            int\xe9ntelo nuevamente si el error persistes contacte con el personal de soporte.",icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})}_checkOnSaleQty(t,i){return r=>{const s=r.get(t),l=r.get(i);if(!s||!l||(l.hasError("invalid")&&(delete l.errors.invalid,l.updateValueAndValidity()),s.value<=l.value))return null;const m={invalid:"La cantidad en venta no debe ser mayor a la disponible"};return l.setErrors(m),m}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.gz),e.Y36(P),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(U.R),e.Y36(z.s),e.Y36(h.F0),e.Y36(Un.C),e.Y36(_.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-product-detail"]],decls:144,vars:58,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-500"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["class","ml-1 text-primary-500",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],["class","mt-2 text-3xl font-extrabold leading-tight tracking-tight sm:text-3xl",4,"ngIf"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white rounded-md bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","click",4,"ngIf"],["class","ml-4 text-white rounded-md bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"click",4,"ngIf"],[1,"flex-auto","p-6","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],[1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","grid-cols-1","gap-8","sm:grid-cols-2"],[1,"flex","flex-col","w-full"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex","flex-col","gap-4","md:flex-row"],[1,"w-full","md:w-1/2"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"fuse-mat-textarea"],[1,"flex","flex-col","pb-4"],[1,"font-medium"],[3,"formControlName","color"],[1,"flex","flex-col"],[1,"w-full","md:w-1/3"],["matInput","",3,"type","formControlName","min"],["class","pb-5",4,"ngIf"],["type","number","matInput","",3,"formControlName"],["type","text","matInput","",3,"formControlName"],[1,"flex","flex-col","gap-8","md:flex-row"],[1,"flex","flex-col","flex-auto","gap-8","md:flex-row"],[1,"flex","flex-col","w-full","rounded-lg"],[1,"flex","flex-col","gap-8"],["id","image-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["imageFileInput",""],["for","image-file-input","matRipple",""],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"grid","w-full","grid-cols-1","gap-2","md:grid-cols-3","xl:grid-cols-5"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"value"],[1,"pb-5"],["class","flex items-center justify-center p-3",4,"ngIf"],[1,"flex","items-center","justify-center","p-3"],["alt","IMAGEN",1,"object-cover","w-48","h-48","rounded","bg-hover",3,"src"],[1,"absolute","p-5","bg-gray-700","rounded-full","opacity-90"],["matRipple","",1,"absolute","cursor-pointer",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white","icon-size-6"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"a",5),e._uU(7,"Tienda"),e.qZA(),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Producto"),e.qZA(),e.qZA(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.YNc(14,Jn,2,0,"a",8),e.YNc(15,Nn,2,1,"a",8),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e.TgZ(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",12),e.YNc(22,Fn,2,0,"div",13),e.YNc(23,Dn,2,1,"div",13),e.qZA(),e.qZA(),e.TgZ(24,"div",14),e.YNc(25,On,4,2,"button",15),e.YNc(26,Sn,4,1,"button",16),e.qZA(),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"div",18),e.TgZ(29,"form",19),e.TgZ(30,"mat-accordion",20),e.TgZ(31,"mat-expansion-panel",21),e.TgZ(32,"mat-expansion-panel-header",22),e.TgZ(33,"mat-panel-title",23),e.TgZ(34,"div",24),e._uU(35," Informaci\xf3n general "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",25),e.TgZ(37,"div",26),e.TgZ(38,"mat-form-field",27),e.TgZ(39,"mat-label"),e._uU(40,"Nombre"),e.qZA(),e._UZ(41,"input",28),e.qZA(),e.TgZ(42,"div",29),e.TgZ(43,"mat-form-field",30),e.TgZ(44,"mat-label"),e._uU(45,"C\xf3digo"),e.qZA(),e._UZ(46,"input",28),e.qZA(),e.TgZ(47,"mat-form-field",30),e.TgZ(48,"mat-label"),e._uU(49,"Categor\xeda"),e.qZA(),e.TgZ(50,"mat-select",31),e.YNc(51,Yn,3,2,"ng-container",32),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"mat-form-field",33),e.TgZ(53,"mat-label"),e._uU(54,"Descripci\xf3n"),e.qZA(),e._UZ(55,"textarea",28),e.qZA(),e.TgZ(56,"div",34),e.TgZ(57,"span",35),e._uU(58,"Estado"),e.qZA(),e.TgZ(59,"mat-slide-toggle",36),e._uU(60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",37),e.TgZ(62,"div",29),e.TgZ(63,"mat-form-field",38),e.TgZ(64,"mat-label"),e._uU(65,"Cantidad disponible"),e.qZA(),e._UZ(66,"input",39),e.qZA(),e.TgZ(67,"mat-form-field",38),e.TgZ(68,"mat-label"),e._uU(69,"Cantidad en venta"),e.qZA(),e._UZ(70,"input",39),e.YNc(71,Mn,2,1,"mat-error",40),e.qZA(),e.TgZ(72,"mat-form-field",38),e.TgZ(73,"mat-label"),e._uU(74,"Unidad de medida"),e.qZA(),e.TgZ(75,"mat-select",31),e.YNc(76,Rn,3,2,"ng-container",32),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",29),e.TgZ(78,"mat-form-field",38),e.TgZ(79,"mat-label"),e._uU(80,"Peso (kg)"),e.qZA(),e._UZ(81,"input",41),e.qZA(),e.TgZ(82,"mat-form-field",38),e.TgZ(83,"mat-label"),e._uU(84,"Volumen (m3)"),e.qZA(),e._UZ(85,"input",41),e.qZA(),e.TgZ(86,"mat-form-field",38),e.TgZ(87,"mat-label"),e._uU(88,"Dimensiones (L-A-H)"),e.qZA(),e._UZ(89,"input",42),e.qZA(),e.qZA(),e.TgZ(90,"mat-form-field",33),e.TgZ(91,"mat-label"),e._uU(92,"Garant\xeda"),e.qZA(),e._UZ(93,"textarea",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"mat-expansion-panel"),e.TgZ(95,"mat-expansion-panel-header",22),e.TgZ(96,"mat-panel-title",23),e.TgZ(97,"div",24),e._uU(98," Precio "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(99,"div",43),e.TgZ(100,"div",44),e.TgZ(101,"div",45),e.TgZ(102,"div",29),e.TgZ(103,"mat-form-field",27),e.TgZ(104,"mat-label"),e._uU(105,"Costo"),e.qZA(),e._UZ(106,"input",39),e.qZA(),e.TgZ(107,"mat-form-field",27),e.TgZ(108,"mat-label"),e._uU(109,"Precio"),e.qZA(),e._UZ(110,"input",39),e.qZA(),e.TgZ(111,"mat-form-field",27),e.TgZ(112,"mat-label"),e._uU(113,"Descuento"),e.qZA(),e._UZ(114,"input",39),e.qZA(),e.TgZ(115,"mat-form-field",27),e.TgZ(116,"mat-label"),e._uU(117,"Impuesto"),e.qZA(),e._UZ(118,"input",39),e.qZA(),e.TgZ(119,"mat-form-field",38),e.TgZ(120,"mat-label"),e._uU(121,"Moneda"),e.qZA(),e.TgZ(122,"mat-select",31),e.YNc(123,Pn,3,2,"ng-container",32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(124,"mat-expansion-panel"),e.TgZ(125,"mat-expansion-panel-header",22),e.TgZ(126,"mat-panel-title",23),e.TgZ(127,"div",24),e._uU(128," Im\xe1genes "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(129,"div",46),e.TgZ(130,"div"),e.TgZ(131,"input",47,48),e.NdJ("change",function(s){return i.selectFiles(s)}),e.qZA(),e.TgZ(133,"label",49),e.TgZ(134,"div",50),e._UZ(135,"mat-icon",51),e.TgZ(136,"span",52),e._uU(137,"Agregar Imagen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(138,"div",53),e.YNc(139,Bn,2,1,"ng-container",32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(140,"div",54),e.TgZ(141,"div",55),e.YNc(142,En,4,2,"button",15),e.YNc(143,Ln,4,2,"button",15),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("routerLink","/shop/products"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf",!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(4),e.Q6J("ngIf",!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editMode),e.xp6(2),e.Q6J("ngIf","new"===i.productId),e.xp6(1),e.Q6J("ngIf","new"!==i.productId),e.xp6(3),e.Q6J("formGroup",i.productForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("formControlName","name"),e.xp6(5),e.Q6J("formControlName","code"),e.xp6(4),e.Q6J("formControlName","categoryId"),e.xp6(1),e.Q6J("ngForOf",i.categories),e.xp6(4),e.Q6J("formControlName","description"),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===i.productForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(6),e.Q6J("type","number")("formControlName","stock")("min",0),e.xp6(4),e.Q6J("type","number")("formControlName","onSale")("min",0),e.xp6(1),e.Q6J("ngIf",i.productForm.get("onSale").hasError("invalid")),e.xp6(4),e.Q6J("formControlName","unit"),e.xp6(1),e.Q6J("ngForOf",i.units),e.xp6(5),e.Q6J("formControlName","weight"),e.xp6(4),e.Q6J("formControlName","volume"),e.xp6(4),e.Q6J("formControlName","dimensions"),e.xp6(4),e.Q6J("formControlName","guaranty"),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(11),e.Q6J("type","number")("formControlName","cost")("min",0),e.xp6(4),e.Q6J("type","number")("formControlName","price")("min",0),e.xp6(4),e.Q6J("type","number")("formControlName","discount")("min",0),e.xp6(4),e.Q6J("type","number")("formControlName","tax")("min",0),e.xp6(4),e.Q6J("formControlName","currency"),e.xp6(1),e.Q6J("ngForOf",i.currencies),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(6),e.Q6J("multiple",!0)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Q6J("ngForOf",i.imagesId),e.xp6(3),e.Q6J("ngIf","new"===i.productId),e.xp6(1),e.Q6J("ngIf","new"!==i.productId))},directives:[J.PQ,T.Hw,h.yS,u.O5,a._Y,a.JL,a.sg,q.pp,q.ib,q.yz,q.yK,g.KE,g.hX,w.Nt,a.Fj,a.JJ,a.u,L.gD,u.sg,j.Rr,a.wV,$.wG,C.lW,$.ey,g.TO],encapsulation:2,changeDetection:0}),n})();const le=n=>n.products,Hn=((0,_.P1)(le,n=>n.product),(0,_.P1)(le,n=>n.products));function zn(n,o){if(1&n&&(e._UZ(0,"img",63),e.ALo(1,"image")),2&n){const t=e.oxw().$implicit;e.Q6J("alt","IMAGEN")("src",e.lcZ(1,2,t.images[0]),e.LSH)}}function Gn(n,o){1&n&&(e.TgZ(0,"div",64),e._uU(1," SIN IMAGEN "),e.qZA())}function Vn(n,o){1&n&&(e.TgZ(0,"div",65),e._UZ(1,"div",66),e.qZA())}function Wn(n,o){1&n&&(e.TgZ(0,"div",67),e._UZ(1,"div",68),e.qZA())}function Kn(n,o){1&n&&(e.TgZ(0,"div",69),e._UZ(1,"div",70),e.qZA())}function Xn(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",71),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function ei(n,o){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",72),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function ti(n,o){1&n&&e.GkF(0)}const ni=function(n){return{$implicit:n}};function ii(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ti,1,0,"ng-container",73),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngTemplateOutlet",i.rowDetailsTemplate)("ngTemplateOutletContext",e.VKq(2,ni,t))}}function oi(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43),e.TgZ(2,"div",44),e.TgZ(3,"div",45),e.YNc(4,zn,2,4,"img",46),e.YNc(5,Gn,2,0,"div",47),e.qZA(),e.qZA(),e.TgZ(6,"div",48),e._uU(7),e.qZA(),e.TgZ(8,"div",49),e._uU(9),e.qZA(),e.TgZ(10,"div",50),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",51),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"div",52),e._uU(17),e.ALo(18,"currency"),e.qZA(),e.TgZ(19,"div",53),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.TgZ(22,"div",54),e.TgZ(23,"div",55),e._uU(24),e.qZA(),e.YNc(25,Vn,2,0,"div",56),e.YNc(26,Wn,2,0,"div",57),e.YNc(27,Kn,2,0,"div",58),e.qZA(),e.TgZ(28,"div",34),e.YNc(29,Xn,2,1,"ng-container",29),e.YNc(30,ei,2,1,"ng-container",29),e.qZA(),e.TgZ(31,"div",59),e.TgZ(32,"button",60),e._UZ(33,"mat-icon",26),e.qZA(),e.TgZ(34,"button",61),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).deleteProduct(s)}),e._UZ(35,"mat-icon",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",62),e.YNc(37,ii,2,4,"ng-container",29),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(4),e.Q6J("ngIf",t.images),e.xp6(1),e.Q6J("ngIf",!t.images),e.xp6(2),e.hij(" ",t.code," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",e.gM2(12,19,t.cost,"CUP ","symbol","1.2-2")," "),e.xp6(3),e.hij(" ",e.gM2(15,24,t.price,"CUP ","symbol","1.2-2")," "),e.xp6(3),e.hij(" ",e.gM2(18,29,t.discount,"CUP ","symbol","1.2-2")," "),e.xp6(3),e.hij(" ",e.gM2(21,34,t.tax,"CUP ","symbol","1.2-2")," "),e.xp6(4),e.AsE("",t.stock," ",t.unit,""),e.xp6(1),e.Q6J("ngIf",t.stock<10),e.xp6(1),e.Q6J("ngIf",t.stock>=10&&t.stock<30),e.xp6(1),e.Q6J("ngIf",t.stock>=30),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink","/shop/products/"+t._id),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash"),e.xp6(2),e.Q6J("ngIf",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id)}}function ri(n,o){if(1&n&&(e.ynx(0),e.YNc(1,oi,38,39,"ng-container",42),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function si(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",32),e.TgZ(2,"div",33),e.TgZ(3,"div",34),e._uU(4," Foto "),e.qZA(),e.TgZ(5,"div",35),e._uU(6," C\xf3digo "),e.qZA(),e.TgZ(7,"div",36),e._uU(8," Nombre "),e.qZA(),e.TgZ(9,"div",37),e._uU(10," Costo "),e.qZA(),e.TgZ(11,"div",38),e._uU(12," Precio "),e.qZA(),e.TgZ(13,"div",39),e._uU(14," Descuento "),e.qZA(),e.TgZ(15,"div",40),e._uU(16," Impuesto "),e.qZA(),e.TgZ(17,"div",37),e._uU(18," Stock "),e.qZA(),e.TgZ(19,"div",34),e._uU(20," Activo "),e.qZA(),e.TgZ(21,"div",41),e._uU(22," Acciones "),e.qZA(),e.qZA(),e.YNc(23,ri,2,2,"ng-container",29),e.ALo(24,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","code"),e.xp6(2),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","price"),e.xp6(2),e.Q6J("mat-sort-header","discount"),e.xp6(2),e.Q6J("mat-sort-header","tax"),e.xp6(2),e.Q6J("mat-sort-header","stock"),e.xp6(6),e.Q6J("ngIf",e.lcZ(24,8,t.products$))}}function ai(n,o){if(1&n&&(e.ynx(0),e.YNc(1,si,25,10,"ng-container",31),e.BQk()),2&n){const t=o.ngIf;e.oxw();const i=e.MAs(43);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function ci(n,o){1&n&&(e.TgZ(0,"div",74),e._uU(1,"No hay productos en la tienda!"),e.qZA())}let li=(()=>{class n{constructor(t,i,r,s){this._changeDetectorRef=t,this._fuseConfirmationService=i,this._productsService=r,this.store=s,this.emptyProduct=Y.u5,this.flashMessage=null,this.products$=(0,M.of)([]),this.roles=[],this.searchInputControl=new a.NI,this.selectedProduct=null,this._unsubscribeAll=new b.xQ}ngOnInit(){this.products$=this.store.select(Hn)}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}deleteProduct(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el producto: ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._productsService.deleteProduct(t._id).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`${s.message}`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._fuseConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}trackByFn(t,i){return i.id||t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(U.R),e.Y36(z.s),e.Y36(_.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-products"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i._paginator=r.first),e.iGM(r=e.CRH())&&(i._sort=r.first)}},decls:44,vars:13,consts:[["cdkScrollable","","fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-50","md:min-w-100"],["matPrefix","",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-button","","routerLink","/shop/products/new",1,"ml-4","bg-primary-500"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[1,"flex-auto","p-6","-mt-16","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","overflow-auto","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listCard01Menu","matMenu"],["mat-menu-item",""],[4,"ngIf"],["noProducts",""],[4,"ngIf","ngIfElse"],["fuseScrollbar","",1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","products-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","text-center","lg:block"],[1,"hidden","text-center","xl:block",3,"mat-sort-header"],[3,"mat-sort-header"],[1,"hidden","md:block",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","xl:block",3,"mat-sort-header"],[1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","products-grid","md:px-8"],[1,"items-center","hidden","lg:block"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"hidden","truncate","xl:block"],[1,"truncate"],[1,"hidden","md:block"],[1,"hidden","sm:block"],[1,"hidden","lg:block"],[1,"hidden","xl:block"],[1,"items-center","hidden","md:flex"],[1,"min-w-4"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-red-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-orange-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-green-100 rounded",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"grid"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-red-200","rounded"],[1,"flex","w-full","bg-red-600","h-1/3"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-orange-200","rounded"],[1,"flex","w-full","bg-orange-400","h-2/4"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-green-100","rounded"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Tienda"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Productos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19," Productos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"mat-form-field",14),e._UZ(22,"mat-icon",15),e._UZ(23,"input",16),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"mat-icon",18),e.TgZ(26,"span",19),e._uU(27,"Nuevo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",20),e.TgZ(29,"div",21),e.TgZ(30,"div",22),e.TgZ(31,"div",23),e._uU(32,"Listado de productos"),e.qZA(),e.TgZ(33,"div",24),e.TgZ(34,"button",25),e._UZ(35,"mat-icon",26),e.qZA(),e.TgZ(36,"mat-menu",null,27),e.TgZ(38,"button",28),e._uU(39,"Exportar a PDF"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(40,ai,2,2,"ng-container",29),e.ALo(41,"async"),e.YNc(42,ci,2,0,"ng-template",null,30,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(37);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar productos..."),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(9),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(5),e.Q6J("ngIf",e.lcZ(41,11,i.products$))}},directives:[J.PQ,H.H,T.Hw,h.yS,g.KE,g.qo,w.Nt,a.Fj,a.JJ,a.oH,C.lW,h.rH,f.p6,f.VK,f.OP,u.O5,p.YE,p.nU,u.sg,u.tP],pipes:[u.Ov,u.H9],encapsulation:2,data:{animation:k.L},changeDetection:0}),n})(),G=(()=>{class n{constructor(t){this._categoriesService=t}resolve(t,i){return this._categoriesService.getCategories()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(P))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),de=(()=>{class n{constructor(t,i){this._productsService=t,this.store=i,this.businessId=null,this.store.select(B.pR).pipe((0,F.h)(r=>null!==r)).subscribe(r=>this.businessId=r._id)}resolve(t,i){return this._productsService.getProductsByBusiness(this.businessId)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(z.s),e.LFG(_.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const di=[{path:"",pathMatch:"full",redirectTo:"products"},{path:"products",component:li,resolve:{categories:G,products:de}},{path:"products/:productId",component:jn,resolve:{categories:G,products:de}},{path:"clients",component:Ee},{path:"clients/:clientId",component:ee},{path:"orders",component:Qn},{path:"orders/:orderId",component:ae},{path:"couriers",component:Qt},{path:"couriers/:courierId",component:oe},{path:"categories",component:ke,resolve:{categories:G}}];let ui=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.Bz.forChild(di),ue.m]]}),n})()}}]);