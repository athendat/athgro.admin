"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[430],{4430:(ui,Y,a)=>{a.r(Y),a.d(Y,{RolesModule:()=>mi});var B=a(5357),Re=a(2266),p=a(3075),be=a(6087),O=a(4847),G=a(7579),$=a(9646),C=a(2722),Ze=a(8372),ye=a(3900),Ce=a(8288),D=a(8966),Ae=a(7585),Te=a(139),F=a(4157);var H=a(8706);const q=function Pe(n,i){return function(t,o){if(null==t)return t;if(!(0,H.Z)(t))return n(t,o);for(var s=t.length,r=i?s:-1,l=Object(t);(i?r--:++r<s)&&!1!==o(l[r],r,l););return t}}(function Ie(n,i){return n&&(0,Te.Z)(n,i,F.Z)});var K=a(9940);var Z=a(4177);const A=function Fe(n,i){return((0,Z.Z)(n)?Ae.Z:q)(n,function Oe(n){return"function"==typeof n?n:K.Z}(i))};var T=a(5343),Me=a(3639);function I(n){var i=-1,t=null==n?0:n.length;for(this.__data__=new Me.Z;++i<t;)this.add(n[i])}I.prototype.add=I.prototype.push=function Ne(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},I.prototype.has=function Je(n){return this.__data__.has(n)};const Le=I,W=function Ye(n,i){for(var t=-1,o=null==n?0:n.length;++t<o;)if(i(n[t],t,n))return!0;return!1},Ge=function Be(n,i){return n.has(i)},X=function qe(n,i,t,o,s,r){var l=1&t,d=n.length,c=i.length;if(d!=c&&!(l&&c>d))return!1;var u=r.get(n),f=r.get(i);if(u&&f)return u==i&&f==n;var g=-1,m=!0,x=2&t?new Le:void 0;for(r.set(n,i),r.set(i,n);++g<d;){var h=n[g],_=i[g];if(o)var v=l?o(_,h,g,i,n,r):o(h,_,g,n,i,r);if(void 0!==v){if(v)continue;m=!1;break}if(x){if(!W(i,function(R,b){if(!Ge(x,b)&&(h===R||s(h,R,t,o,r)))return x.push(b)})){m=!1;break}}else if(h!==_&&!s(h,_,t,o,r)){m=!1;break}}return r.delete(n),r.delete(i),m};var z=a(8492),k=a(1630),Ke=a(3093);const Xe=function We(n){var i=-1,t=Array(n.size);return n.forEach(function(o,s){t[++i]=[s,o]}),t},ke=function ze(n){var i=-1,t=Array(n.size);return n.forEach(function(o){t[++i]=o}),t};var j=z.Z?z.Z.prototype:void 0,M=j?j.valueOf:void 0;var V=a(8501),hn=Object.prototype.hasOwnProperty;var ee=a(4116),ne=a(5202),vn=a(7583),te="[object Arguments]",ie="[object Array]",w="[object Object]",oe=Object.prototype.hasOwnProperty;const yn=function Zn(n,i,t,o,s,r){var l=(0,Z.Z)(n),d=(0,Z.Z)(i),c=l?ie:(0,ee.Z)(n),u=d?ie:(0,ee.Z)(i),f=(c=c==te?w:c)==w,g=(u=u==te?w:u)==w,m=c==u;if(m&&(0,ne.Z)(n)){if(!(0,ne.Z)(i))return!1;l=!0,f=!1}if(m&&!f)return r||(r=new T.Z),l||(0,vn.Z)(n)?X(n,i,t,o,s,r):function mn(n,i,t,o,s,r,l){switch(t){case"[object DataView]":if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=i.byteLength||!r(new k.Z(n),new k.Z(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,Ke.Z)(+n,+i);case"[object Error]":return n.name==i.name&&n.message==i.message;case"[object RegExp]":case"[object String]":return n==i+"";case"[object Map]":var d=Xe;case"[object Set]":if(d||(d=ke),n.size!=i.size&&!(1&o))return!1;var u=l.get(n);if(u)return u==i;o|=2,l.set(n,i);var f=X(d(n),d(i),o,s,r,l);return l.delete(n),f;case"[object Symbol]":if(M)return M.call(n)==M.call(i)}return!1}(n,i,c,t,o,s,r);if(!(1&t)){var x=f&&oe.call(n,"__wrapped__"),h=g&&oe.call(i,"__wrapped__");if(x||h){var _=x?n.value():n,v=h?i.value():i;return r||(r=new T.Z),s(_,v,t,o,r)}}return!!m&&(r||(r=new T.Z),function _n(n,i,t,o,s,r){var l=1&t,d=(0,V.Z)(n),c=d.length;if(c!=(0,V.Z)(i).length&&!l)return!1;for(var g=c;g--;){var m=d[g];if(!(l?m in i:hn.call(i,m)))return!1}var x=r.get(n),h=r.get(i);if(x&&h)return x==i&&h==n;var _=!0;r.set(n,i),r.set(i,n);for(var v=l;++g<c;){var R=n[m=d[g]],b=i[m];if(o)var ve=l?o(b,R,m,i,n,r):o(R,b,m,n,i,r);if(!(void 0===ve?R===b||s(R,b,t,o,r):ve)){_=!1;break}v||(v="constructor"==m)}if(_&&!v){var P=n.constructor,S=i.constructor;P!=S&&"constructor"in n&&"constructor"in i&&!("function"==typeof P&&P instanceof P&&"function"==typeof S&&S instanceof S)&&(_=!1)}return r.delete(n),r.delete(i),_}(n,i,t,o,s,r))};var se=a(214);const ae=function re(n,i,t,o,s){return n===i||(null==n||null==i||!(0,se.Z)(n)&&!(0,se.Z)(i)?n!=n&&i!=i:yn(n,i,t,o,re,s))};var E=a(1999);const le=function wn(n){return n==n&&!(0,E.Z)(n)},ce=function On(n,i){return function(t){return null!=t&&t[n]===i&&(void 0!==i||n in Object(t))}},Fn=function Dn(n){var i=function Pn(n){for(var i=(0,F.Z)(n),t=i.length;t--;){var o=i[t],s=n[o];i[t]=[o,s,le(s)]}return i}(n);return 1==i.length&&i[0][2]?ce(i[0][0],i[0][1]):function(t){return t===n||function Tn(n,i,t,o){var s=t.length,r=s,l=!o;if(null==n)return!r;for(n=Object(n);s--;){var d=t[s];if(l&&d[2]?d[1]!==n[d[0]]:!(d[0]in n))return!1}for(;++s<r;){var c=(d=t[s])[0],u=n[c],f=d[1];if(l&&d[2]){if(void 0===u&&!(c in n))return!1}else{var g=new T.Z;if(o)var m=o(u,f,c,n,i,g);if(!(void 0===m?ae(f,u,3,o,g):m))return!1}}return!0}(t,n,i)}};var de=a(7298);const Qn=function Nn(n,i){return null!=n&&i in Object(n)};var Jn=a(7370),Un=a(4825),Ln=a(6667),Yn=a(8696),N=a(2168);const Hn=function $n(n,i){return null!=n&&function Bn(n,i,t){for(var o=-1,s=(i=(0,Jn.Z)(i,n)).length,r=!1;++o<s;){var l=(0,N.Z)(i[o]);if(!(r=null!=n&&t(n,l)))break;n=n[l]}return r||++o!=s?r:!!(s=null==n?0:n.length)&&(0,Yn.Z)(s)&&(0,Ln.Z)(l,s)&&((0,Z.Z)(n)||(0,Un.Z)(n))}(n,i,Qn)};var fe=a(3660);const Xn=function Wn(n,i){return(0,fe.Z)(n)&&le(i)?ce((0,N.Z)(n),i):function(t){var o=function Mn(n,i,t){var o=null==n?void 0:(0,de.Z)(n,i);return void 0===o?t:o}(t,n);return void 0===o&&o===i?Hn(t,n):ae(i,o,3)}},nt=function et(n){return(0,fe.Z)(n)?function zn(n){return function(i){return null==i?void 0:i[n]}}((0,N.Z)(n)):function jn(n){return function(i){return(0,de.Z)(i,n)}}(n)},Q=function tt(n){return"function"==typeof n?n:null==n?K.Z:"object"==typeof n?(0,Z.Z)(n)?Xn(n[0],n[1]):Fn(n):nt(n)};var at=/\s/;var dt=/^\s+/;const mt=function ft(n){return n&&n.slice(0,function lt(n){for(var i=n.length;i--&&at.test(n.charAt(i)););return i}(n)+1).replace(dt,"")};var ut=a(6460),gt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,_t=parseInt;const Zt=function bt(n){return n?1/0===(n=function xt(n){if("number"==typeof n)return n;if((0,ut.Z)(n))return NaN;if((0,E.Z)(n)){var i="function"==typeof n.valueOf?n.valueOf():n;n=(0,E.Z)(i)?i+"":i}if("string"!=typeof n)return 0===n?n:+n;n=mt(n);var t=pt.test(n);return t||ht.test(n)?_t(n.slice(2),t?2:8):gt.test(n)?NaN:+n}(n))||-1/0===n?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0};var At=Math.max;const ge=function it(n){return function(i,t,o){var s=Object(i);if(!(0,H.Z)(i)){var r=Q(t);i=(0,F.Z)(i),t=function(d){return r(s[d],d,s)}}var l=n(i,t,o);return l>-1?s[r?i[l]:l]:void 0}}(function Tt(n,i,t){var o=null==n?0:n.length;if(!o)return-1;var s=null==t?0:function yt(n){var i=Zt(n),t=i%1;return i==i?t?i-t:i:0}(t);return s<0&&(s=At(o+s,0)),function st(n,i,t,o){for(var s=n.length,r=t+(o?1:-1);o?r--:++r<s;)if(i(n[r],r,n))return r;return-1}(n,Q(i),s)}),Pt=function wt(n,i){var t;return q(n,function(o,s,r){return!(t=i(o,s,r))}),!!t};var St=a(4810);var Ft=a(5119);class J{clear(){this._id=null,this.name="",this.permissions=[],this.isCoreRole=!1,this.checked=!1}}class pe{clear(){this._id=void 0,this.title="",this.level=1,this.parentId=void 0,this.isSelected=!1,this.name="",this._children=[]}}var e=a(5e3),he=a(1683),U=a(1349),y=a(9808),_e=a(7423),Mt=a(7446),xe=a(5245),L=a(7322),Et=a(7531);function Nt(n,i){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar rol "),e.qZA())}function Qt(n,i){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar rol "),e.qZA())}function Jt(n,i){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Detalles del rol "),e.qZA())}function Ut(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Title"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()(),e.TgZ(9,"div",15)(10,"h6",13),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"span",14),e._uU(13),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.role.name||"Sin nombre"),e.xp6(5),e.Oqu(t.data.role.description||"Sin descripci\xf3n")}}function Lt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"span")(2,"mat-checkbox",37),e.NdJ("ngModelChange",function(s){const l=e.CHM(t).$implicit;return e.KtG(l.isSelected=s)})("change",function(s){const l=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.isSelectedChanged(s,l))}),e._uU(3),e.qZA()()()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(2),e.Q6J("color","primary")("ngModel",t.isSelected)("disabled",o.singleRole.isCoreRole),e.xp6(1),e.hij(" ",t.title," ")}}function Yt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"mat-checkbox",33),e.NdJ("ngModelChange",function(s){const l=e.CHM(t).$implicit;return e.KtG(l.isSelected=s)})("change",function(s){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.isSelectedChanged(s,l))}),e.qZA()(),e.TgZ(5,"div",34),e.YNc(6,Lt,4,4,"div",35),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw(2);e.xp6(3),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngModel",t.isSelected)("disabled",o.singleRole.isCoreRole),e.xp6(2),e.Q6J("ngForOf",t._children)}}function Bt(n,i){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17)(2,"form",18)(3,"div",19)(4,"mat-form-field",20)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"mat-icon",21)(8,"input",22),e.qZA()(),e.TgZ(9,"div",23)(10,"mat-form-field",20)(11,"mat-label"),e._uU(12,"Descripc\xf3n"),e.qZA(),e._UZ(13,"mat-icon",24)(14,"textarea",25),e.qZA()()(),e.TgZ(15,"div",26)(16,"div",27)(17,"mat-label",28),e._uU(18,"Permisos"),e.qZA()(),e.TgZ(19,"div",29),e.YNc(20,Yt,7,4,"div",30),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.roleForm)("autocomplete","off"),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre del rol")("disabled",t.singleRole.static),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1),e.xp6(6),e.Q6J("ngForOf",t.rolePermissions)}}function Gt(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateRole())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.roleForm.disabled||t.roleForm.invalid)("color","primary")("matDialogClose","confirmed")}}function $t(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.createRole())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.roleForm.disabled||t.roleForm.invalid)("color","primary")("matDialogClose","confirmed")}}function Ht(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",38),e.ynx(2),e.TgZ(3,"button",39),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Gt,3,3,"ng-container",6),e.YNc(6,$t,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let qt=(()=>{class n{constructor(t,o,s,r,l){this.data=t,this._changeDetectorRef=o,this._formBuilder=s,this._fuseConfirmationService=r,this._roleService=l,this.singleRole=new J,this.dialogMode="view",this.rolePermissions=[],this._unsubscribeAll=new G.x}ngOnInit(){this.singleRole.clear(),this.roleForm=this._formBuilder.group({_id:[""],isCoreRole:[!1],name:["",[p.kI.required]],description:["",[p.kI.required,p.kI.minLength(8)]]}),"edit"===this.data.dialogMode&&(this.singleRole=this.data.singleRole,this.roleForm.patchValue(this.data.singleRole)),this.allPermissions$=this._roleService.permissions$,this.loadPermissions()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadPermissions(){this.allPermissions$.subscribe(t=>{t&&t.filter(s=>s.parentId===s._id).forEach(s=>{const r=this.singleRole.permissions.some(c=>c===s._id),l=new pe;l.clear(),l.isSelected=r,l._children=[],l._id=s._id,l.level=s.level,l.parentId=s.parentId,l.title=s.title,t.filter(c=>c.parentId&&c.parentId===s._id).forEach(c=>{if(c._id!==c.parentId){const u=this.singleRole.permissions.some(g=>g===c._id),f=new pe;f.clear(),f.isSelected=u,f._children=[],f._id=c._id,f.level=c.level,f.parentId=c.parentId,f.title=c.title,l._children.push(f)}}),this.rolePermissions.push(l)})}),console.table(this.rolePermissions)}preparePermissionIds(){const t=[];return A(this.rolePermissions,o=>{o.isSelected&&(t.push(o._id),A(o._children,s=>{s.isSelected&&t.push(s._id)}))}),t}prepareRole(){const t=new J;return t._id=this.singleRole._id,t.permissions=this.preparePermissionIds(),t.name=this.singleRole.name,t.isCoreRole=this.singleRole.isCoreRole,t}isSelectedChanged(t,o){if(0===o._children.length&&o.isSelected){const s=ge(this.rolePermissions,r=>r._id===o.parentId);s&&!s.isSelected&&(s.isSelected=!0)}else if(0!==o._children.length||o.isSelected)o._children.length>0&&o.isSelected?A(o._children,s=>s.isSelected=!0):o._children.length>0&&!o.isSelected&&A(o._children,s=>{s.isSelected=!1});else{const s=ge(this.rolePermissions,r=>r._id===o.parentId);s&&s.isSelected&&(function Ot(n,i,t){var o=(0,Z.Z)(n)?W:Pt;return t&&(0,St.Z)(n,i,t)&&(i=void 0),o(n,Q(i))}(s._children,r=>!0===r.isSelected)||(s.isSelected=!1))}}createRole(){let t=this.roleForm.getRawValue();t=(0,Ft.Z)(t,"id"),t.permissions=this.prepareRole().permissions,this._fuseConfirmationService.open({title:"Crear Rol",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._roleService.createRole(t).pipe((0,C.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Rol creado correctamente",message:r.name,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateRole(){const t=this.roleForm.getRawValue();t.permissions=this.prepareRole().permissions,this._fuseConfirmationService.open({title:"Actualizar Rol",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._roleService.updateRole(t).pipe((0,C.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Rol actualizado correctamente",message:r.name,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D.WI),e.Y36(e.sBO),e.Y36(p.QS),e.Y36(he.R),e.Y36(U.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["roles-dialog"]],decls:12,vars:6,consts:[["athScrollbar","",1,"relative","flex","flex-col","w-full","h-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","pb-6","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:pb-6","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","sm:flex-row","sm:items-start"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","pb-4","my-10"],[1,"w-full","overflow-hidden"],[1,"flex",2,"flex-direction","column"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"sm:col-span-3"],[1,"w-full","fuse-mat-no-subscript"],[1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",2,"margin-left","6px",3,"type","formControlName","placeholder","disabled"],[1,"py-5","sm:col-span-2"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","","required","",3,"formControlName","rows","spellcheck"],[2,"margin-top","10px","margin-bottom","20px"],[2,"margin-bottom","12px"],[1,"font-medium"],[2,"border-width","1.5px","border-radius","6px","--tw-border-opacity","1 !important","border-color","#3bbf44","padding","20px 25px 0 20px","--tw-shadow","0 0 #f000","box-shadow","0 4px 8px 0 rgba(0, 0, 0, 0.02)"],["class","mb-4","style","display: grid;\n                            grid-template-columns: 150px auto;",4,"ngFor","ngForOf"],[1,"mb-4",2,"display","grid","grid-template-columns","150px auto"],[1,"mt-2",2,"display","flex","justify-content","space-between"],[3,"ngModel","disabled","ngModelChange","change"],[2,"display","flex","flex-wrap","wrap","justify-content","space-between"],["class","mt-2","style","display: flex; justify-content: space-around;",4,"ngFor","ngForOf"],[1,"mt-2",2,"display","flex","justify-content","space-around"],[2,"opacity","0.8",3,"color","ngModel","disabled","ngModelChange","change"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",1,"rounded-sm","text-mine-900","bg-primary-700",3,"matDialogClose"],["mat-flat-button","",1,"rounded-sm","text-mine-900","bg-primary-700",3,"disabled","color","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Nt,2,0,"h2",2),e.YNc(4,Qt,2,0,"h2",2),e.YNc(5,Jt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,Ut,14,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,Bt,21,12,"div",5),e.BQk(),e.qZA(),e.YNc(11,Ht,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===o.data.singleRole._id&&"add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf",o.data.singleRole._id&&"edit"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf",o.data.singleRole._id&&"view"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[y.sg,y.O5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.On,p.sg,p.u,_e.lW,Mt.oG,D.ZT,xe.Hw,L.KE,L.hX,L.qo,Et.Nt],encapsulation:2,changeDetection:0}),n})();var Kt=a(2729),Wt=a(5094),Xt=a(393),zt=a(7238),kt=a(1235);function jt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.createRole())}),e._UZ(1,"mat-icon",20),e.TgZ(2,"span",21),e._uU(3,"Nuevo"),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"))}function Vt(n,i){1&n&&e._UZ(0,"mat-icon",33),2&n&&e.Q6J("color","primary")}function ei(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.updateRole(s))}),e._UZ(1,"mat-icon",38),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"))}function ni(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(3).$implicit,r=e.oxw(3);return e.KtG(r.deleteRole(s))}),e._UZ(1,"mat-icon",38),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:trash"))}function ti(n,i){1&n&&(e.TgZ(0,"div"),e.YNc(1,ni,2,1,"button",35),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngxPermissionsOnly","RolesPermissionsDelete"))}function ii(n,i){1&n&&(e.TgZ(0,"button",39),e._UZ(1,"mat-icon",38),e.qZA()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:eye"))}const oi=function(){return["RolesPermissionsUpdate","RolesPermissionsDelete"]};function si(n,i){if(1&n&&(e.TgZ(0,"div",34),e.YNc(1,ei,2,1,"button",35),e.YNc(2,ti,2,1,"div",26),e.YNc(3,ii,2,1,"button",36),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngxPermissionsOnly","RolesPermissionsUpdate"),e.xp6(1),e.Q6J("ngIf",!t.static),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(3,oi))}}function ri(n,i){1&n&&(e.TgZ(0,"div",34)(1,"button",39),e._UZ(2,"mat-icon",38),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("svgIcon","heroicons_solid:eye"))}function ai(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e.YNc(3,Vt,1,1,"mat-icon",30),e._uU(4),e.qZA(),e.TgZ(5,"div",31),e._uU(6),e.qZA(),e.YNc(7,si,4,4,"div",32),e.YNc(8,ri,3,1,"div",32),e.qZA(),e.BQk()),2&n){const t=i.$implicit;e.xp6(3),e.Q6J("ngIf",t.isCoreRole),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(1),e.Q6J("ngIf",!t.isCoreRole),e.xp6(1),e.Q6J("ngIf",t.isCoreRole)}}function li(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ai,9,5,"ng-container",27),e.BQk()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function ci(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23)(3,"div",24),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"div",25),e._uU(8,"Acci\xf3n"),e.qZA()(),e.YNc(9,li,2,2,"ng-container",26),e.ALo(10,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(6),e.Q6J("ngIf",e.lcZ(10,2,t.role$))}}function di(n,i){1&n&&(e.TgZ(0,"div",40),e._uU(1," \xa1A\xfan ha creado ning\xfan rol a\xfan! "),e.qZA())}const fi=[{path:"",component:(()=>{class n{constructor(t,o,s,r,l){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._roleService=s,this.dialog=r,this.store=l,this.emptyRole=new J,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new p.p4,this.selectedRole=null,this._unsubscribeAll=new G.x}ngOnInit(){this.emptyRole.clear(),this.role$=this.store.select(Kt.g),this.searchInputControl.valueChanges.pipe((0,C.R)(this._unsubscribeAll),(0,Ze.b)(200),(0,ye.w)(t=>(this.closeDetails(),this.isLoading=!0,this.role$.pipe((0,C.R)(this._unsubscribeAll)).subscribe(o=>{this.role$=(0,$.of)(o.filter(s=>s.name.toLowerCase().includes(t.toLowerCase()))),this.isLoading=!1}),(0,$.of)(t)))).subscribe()}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDetails(){this.selectedRole=null}createRole(){this.openDialog(this.emptyRole,"add")}updateRole(t){this.openDialog(t,"edit")}deleteRole(t){this._fuseConfirmationService.open({title:"Eliminar Rol",message:"\xbfEsta seguro que desea eliminar este rol?",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._roleService.deleteRole(t._id).subscribe(()=>{this._fuseConfirmationService.open({title:"Rol eliminada correctamente",message:"",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,o){return t||o.id}openDialog(t,o){this.dialog.open(qt,{maxWidth:"750px",minWidth:"200px",height:"90%",data:{singleRole:t,dialogMode:o},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(he.R),e.Y36(U.N),e.Y36(D.uw),e.Y36(Wt.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-roles"]],viewQuery:function(t,o){if(1&t&&(e.Gf(be.NW,5),e.Gf(O.YE,5)),2&t){let s;e.iGM(s=e.CRH())&&(o._paginator=s.first),e.iGM(s=e.CRH())&&(o._sort=s.first)}},decls:27,vars:6,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-700"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","","class","ml-4 text-white bg-primary-500","mat-button","",3,"click",4,"ngxPermissionsOnly"],[1,"flex-auto","p-6","-mt-16","shadow","bg-mine-200","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[4,"ngIf","ngIfElse"],["noRoles",""],["mat-raised-button","","mat-button","",1,"ml-4","text-white","bg-primary-500",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","roles-grid","role-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","roles-grid","role-table","md:px-8"],[1,"truncate","flex"],["svgIcon","heroicons_solid:fire","class","mr-1",3,"color",4,"ngIf"],[1,"truncate"],["style","justify-content: center;","class","flex flex-row gap-2",4,"ngIf"],["svgIcon","heroicons_solid:fire",1,"mr-1",3,"color"],[1,"flex","flex-row","gap-2",2,"justify-content","center"],["class","px-2 leading-6  min-w-10 min-h-7 h-7","mat-stroked-button","",3,"click",4,"ngxPermissionsOnly"],["disabled","","class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Proximamente",4,"ngxPermissionsExcept"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["disabled","","mat-stroked-button","","matTooltip","Proximamente",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Usuarios"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Roles"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"h2",12),e._uU(19," Gesti\xf3n de Roles "),e.qZA()()(),e.TgZ(20,"div",13),e.YNc(21,jt,4,1,"button",14),e.qZA()(),e.TgZ(22,"div",15)(23,"div",16),e.YNc(24,ci,11,4,"ng-container",17),e.YNc(25,di,2,0,"ng-template",null,18,e.W1O),e.qZA()()()),2&t){const s=e.MAs(26);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(7),e.Q6J("ngxPermissionsOnly","RolesPermissionsCreate"),e.xp6(3),e.Q6J("ngIf",o.role$)("ngIfElse",s)}},dependencies:[B.yS,y.sg,y.O5,Xt.PQ,_e.lW,xe.Hw,O.YE,O.nU,zt.gM,kt.gE,y.Ov],styles:[".roles-grid{grid-template-columns:auto 95px}@media (min-width: 960px){.roles-grid{grid-template-columns:150px auto 95px}}@media (min-width: 1280px){.roles-grid{grid-template-columns:150px auto 95px}}\n"],encapsulation:2,data:{animation:Ce.L},changeDetection:0}),n})(),resolve:{roles:(()=>{class n{constructor(t){this._roleService=t}resolve(t,o){return this._roleService.getPermissions()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(U.N))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let mi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[B.Bz.forChild(fi),Re.m]}),n})()}}]);